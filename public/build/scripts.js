!function(){angular.module("AboutUsApp",[]),angular.module("AdminPanelApp",[]),angular.module("AccountApp",[]),angular.module("AmazonS3UploadApp",[]),angular.module("ApplicationApp",[]),angular.module("AuthApp",[]),angular.module("CampaignApp",[]),angular.module("FooterApp",[]),angular.module("LandingPageApp",[]),angular.module("LeaseApp",[]),angular.module("NavbarApp",[]),angular.module("SharedFactoryApp",[]),angular.module("SharedServiceApp",[]),angular.module("UnitApp",[]),angular.module("FooterApp",[]),angular.module("Models",[]),angular.module("Directives",[]),angular.module("MainApp",["AdminPanelApp","AccountApp","AmazonS3UploadApp","ApplicationApp","AuthApp","AboutUsApp","Directives","FooterApp","LandingPageApp","LeaseApp","CampaignApp","NavbarApp","SharedFactoryApp","SharedServiceApp","UnitApp","Models","ui.router","ngFacebook","ngStorage","ngResource","ngLodash","ui.bootstrap","angular-jwt"]).config(["$facebookProvider","$sceDelegateProvider",function(e,t){e.setAppId("439701646205204"),t.resourceUrlWhitelist(["self","https://youtu.be/**","https://www.youtube.com/watch?v=**","https://www.youtube.com/watch?v=*&feature=youtu.be","http://www.youtube.com/embed/**"])}]).run(["$rootScope","$state","$localStorage","$window","$facebook","jwtHelper","AuthFct","TokenSvc",function(e,t,a,n,o,r,i,l){function s(){o.getLoginStatus().then(function(t){switch(t.status){case"not authorized":e.isLoggedIn=!1,e.authObjects.facebookConnected=!1;break;case"connected":e.authObjects.facebookConnected=!0,o.api("/me").then(function(a){var n={user:a,fbLoginStatus:t,facebook:!0};i.signin(n,function(t,a){return 403===a?void(e.isLoggedIn=!1):void(e.isLoggedIn=!0)})});break;default:e.isLoggedIn=!1,e.authObjects.facebookConnected=!1}})}!function(e,t,a){var n,o=e.getElementsByTagName(t)[0];e.getElementById(a)||(n=e.createElement(t),n.id=a,n.src="//connect.facebook.net/en_US/sdk.js",o.parentNode.insertBefore(n,o))}(document,"script","facebook-jssdk"),e.authObjects={facebookConnected:!1};var c=l.getToken(),d=null;c&&(d=l.checkExp()),"No Token"===c?s():d?(l.deleteToken(),s()):(e.userType=l.decode().userType,e.isLoggedIn=!0)}])}(),angular.module("MainApp").constant("WizioConfig",{baseAPIURL:"http://test-2-1-16-grtustfprs.elasticbeanstalk.com/api/",frontEndURL:window.location.origin,modulesURL:"public/app/modules",AdminPanelAppMainViewsURL:"public/app/modules/adminpanelapp/main/",AdminPanelAppViewsURL:"public/app/modules/adminpanelapp/viewtemplates/",AuthViewsURL:"public/app/modules/authapp/viewtemplates/",ApplicationViewsURL:"public/app/modules/applicationapp/main/",ApplicationFormViewsURL:"public/app/modules/applicationapp/applicationformapp/viewtemplates/",BuyerDashboardViewsURL:"public/app/modules/accountapp/dashboard/viewtemplates/",CampaignMainViewsURL:"public/app/modules/campaignapp/main/",CampaignVideoUploadViewsURL:"public/app/modules/campaignapp/videouploadapp/viewtemplates/",FooterViewsURL:"public/app/modules/footerapp/viewtemplates/",landingPageAppViewsURL:"public/app/modules/landingpageapp/viewtemplates/",leaseMainViewsURL:"public/app/modules/leaseapp/main/",leaseViewsURL:"public/app/modules/leaseapp/viewtemplates/",NavbarViewsURL:"public/app/modules/navbarapp/viewtemplates/",AccountViewsURL:"public/app/modules/accountapp/main/",AccountDashboardViewsURL:"public/app/modules/accountapp/dashboardapp/viewtemplates/",AccountAuthViewsURL:"public/app/modules/accountapp/authapp/viewtemplates/",UnitMainViewsURL:"public/app/modules/unitapp/main/",UnitViewsURL:"public/app/modules/unitapp/viewtemplates/",extProfileMainViewsURL:"public/app/modules/accountapp/extendedprofileapp/main/",extProfileViewsURL:"public/app/modules/accountapp/extendedprofileapp/viewtemplates/"}),angular.module("MainApp").config(["$stateProvider","$urlRouterProvider","$locationProvider","$httpProvider","WizioConfig",function(e,t,a,n,o){var r={templateUrl:o.NavbarViewsURL+"navbar.html",controller:"NavbarCtrl"},i={templateUrl:o.FooterViewsURL+"footer.html",controller:"FooterCtrl"},l={requireLogin:!0},s={requireLogin:!0,userType:2},c={requireLogin:!1};e.state("LandingPage",{url:"/",views:{navbar:r,footer:i,maincontent:{templateUrl:o.landingPageAppViewsURL+"landingpage.html",controller:"LandingPageCtrl"}},data:c}).state("About",{url:"/about",views:{footer:i,navbar:r,maincontent:{templateUrl:"public/app/modules/aboutusapp/viewtemplates/aboutus.html",controller:"AboutListCtrl"}},data:c}).state("AdminPanel",{"abstract":!0,views:{footer:i,navbar:r,maincontent:{templateUrl:o.AdminPanelAppMainViewsURL+"AdminPanelMain.html",controller:"AdminPanelMainCtrl"}},data:{requireLogin:!0,userType:0}}).state("AdminPanel.Main",{url:"/wizioadminpanel",views:{AdminTop:{templateUrl:o.AdminPanelAppViewsURL+"AdminSearchUnit.html",controller:"AdminSearchUnitCtrl"},AdminLeft:{templateUrl:o.AdminPanelAppViewsURL+"AdminUpdateUnit.html",controller:"AdminUpdateUnitCtrl"},AdminRight:{templateUrl:o.AdminPanelAppViewsURL+"AdminUpdateAssignment.html",controller:"AdminUpdateAssignmentCtrl"},AdminBottom:{templateUrl:o.AdminPanelAppViewsURL+"admincreateunit.html",controller:"AdminCreateUnitCtrl"},AdminSecondBottom:{templateUrl:o.AdminPanelAppViewsURL+"admincreateassignment.html",controller:"AdminCreateAssignmentCtrl"}}}).state("Styleguide",{url:"/about/styleguide",views:{navbar:r,footer:i,maincontent:{templateUrl:"public/viewtemplates/public/styleguide.html"}},data:c}).state("SendResetEmail",{url:"/sendresetpassemail",views:{navbar:r,footer:i,maincontent:{templateUrl:o.AccountAuthViewsURL+"sendResetEmail.html",controller:"AuthResetPassCtrl"}},data:c}).state("UpdatePassword",{url:"/resetpassword/:token",views:{navbar:r,footer:i,maincontent:{templateUrl:o.AccountAuthViewsURL+"resetPassword.html",controller:"AuthResetPassCtrl"}},data:c}).state("Account",{url:"/account","abstract":!0,views:{navbar:r,footer:i,maincontent:{templateUrl:o.AccountViewsURL+"AccountMain.html",controller:"AccountMainCtrl"}},data:l}).state("Account.Create",{url:"/create",views:{AccountMain:{templateUrl:o.AccountAuthViewsURL+"/AuthCreateAcctForm.html",controller:"AuthCreateAcctCtrl"}},data:c}).state("Account.Dashboard",{"abstract":!0,views:{AccountMain:{templateUrl:o.AccountDashboardViewsURL+"DashboardMain.html",controller:"DashboardMainCtrl"}}}).state("Account.Dashboard.Main",{url:"/dashboard",views:{topHorizontal:{templateUrl:o.AccountDashboardViewsURL+"DashboardUserInfo.html",controller:"DashboardUserInfoCtrl"},controlPanel:{templateUrl:o.AccountDashboardViewsURL+"DashboardControls.html",controller:"DashboardControlsCtrl"},midHorizontal:{templateProvider:["TokenSvc","$templateFactory",function(e,t){return 2==e.decode().userType?t.fromUrl(o.AccountDashboardViewsURL+"DashboardLLUnitList.html"):null}],controllerProvider:["$rootScope",function(e){return 2==e.userType?"DashboardLLUnitListCtrl":null}]},application:{templateProvider:["TokenSvc","$templateFactory",function(e,t){return 1==e.decode().userType?t.fromUrl(o.AccountDashboardViewsURL+"DashboardApplications.html"):void 0}],controllerProvider:["$rootScope",function(e){return 1==e.userType?"DashboardApplicationCtrl":null}]},favorites:{templateProvider:["TokenSvc","$templateFactory",function(e,t){return 1==e.decode().userType?t.fromUrl(o.AccountDashboardViewsURL+"DashboardFavorites.html"):null}],controllerProvider:["$rootScope",function(e){switch(e.userType){case 1:return console.dir(e.userType),"DashboardFavoriteCtrl";case 2:}}],data:l}}}).state("Account.Dashboard.Application",{url:"/application",views:{midHorizontal:{templateUrl:o.ApplicationFormViewsURL+"ApplicationDetails.html",controller:"ApplicationDetailCtrl"}},data:l}).state("Account.Lease",{"abstract":!0,url:"/lease",views:{AccountMain:{templateUrl:o.leaseMainViewsURL+"leasemain.html",controller:"LeaseMainCtrl"}}}).state("Account.Lease.Create",{url:"/create",views:{LeaseMain:{templateUrl:o.leaseViewsURL+"leaseform.html",controller:"LeaseFormCtrl"}}}).state("Account.Lease.Edit",{url:"/edit",views:{LeaseMain:{templateUrl:o.leaseViewsURL+"leaseform.html",controller:"LeaseFormCtrl"}}}).state("Account.Profile",{url:"/profile",views:{AccountMain:{templateUrl:o.extProfileMainViewsURL+"extprofilemain.html",controller:"ExtProfileMainCtrl"}}}).state("Account.Profile.Create",{url:"/create",views:{ProfileMain:{templateUrl:o.extProfileViewsURL+"extprofileform.html",controller:"ExtProfileFormCtrl"}},data:l}).state("Account.Profile.Edit",{url:"/edit",views:{ProfileMain:{templateUrl:o.extProfileViewsURL+"extprofileform.html",controller:"ExtProfileFormCtrl"}},data:l}).state("sellerDashboard",{url:"/brokerInfo",views:{navbar:r,footer:i,maincontent:{templateUrl:"public/viewtemplates/public/brokerAddInfo.html",controller:"brokerAddInfoCtrl"}},data:l}).state("Application",{url:"/application",views:{navbar:r,footer:i,maincontent:{templateUrl:o.ApplicationViewsURL+"applicationmain.html"}},"abstract":!0,data:l}).state("Application.New",{url:"/new",views:{ApplicationPage:{templateUrl:o.ApplicationFormViewsURL+"applicationform.html",controller:"ApplicationFormCtrl"}}}).state("Application.Edit",{url:"/edit",views:{ApplicationPage:{templateUrl:o.ApplicationFormViewsURL+"applicationform.html",controller:"ApplicationFormCtrl"}}}).state("Unit",{url:"/unit",views:{navbar:r,footer:i,maincontent:{templateUrl:o.UnitMainViewsURL+"UnitMain.html",controller:"UnitMainCtrl"}},"abstract":!0}).state("Unit.Create",{url:"/create",views:{UnitMain:{templateUrl:o.UnitViewsURL+"UnitCreate.html",controller:"UnitCreateCtrl"}},data:l}).state("Unit.Details",{url:"/details/:id",views:{UnitMain:{templateUrl:o.UnitViewsURL+"unitDetailsPage.html",controller:"UnitDetailCtrl"}},data:c}).state("Unit.Display",{url:"/display",views:{UnitMain:{templateUrl:o.UnitViewsURL+"unitDisplay.html",controller:"UnitDisplayCtrl"}},data:c}).state("Unit.Claim",{url:"/claim",views:{UnitMain:{templateUrl:o.UnitViewsURL+"UnitClaimForm2.html",controller:"UnitClaimFormCtrl2"}},data:s}).state("Unit.Edit",{url:"/edit",views:{UnitMain:{templateUrl:o.UnitViewsURL+"UnitClaimForm2.html",controller:"UnitClaimFormCtrl2"}},data:s}).state("Campaign",{url:"/campaign","abstract":!0,views:{navbar:r,footer:i,maincontent:{templateUrl:o.CampaignMainViewsURL+"CampaignMain.html",controller:"CampaignMainCtrl"}}}).state("Campaign.VideoUpload",{"abstract":!0,views:{CampaignMain:{templateUrl:o.CampaignVideoUploadViewsURL+"/VideoUploadMain.html",controller:"VideoUploadMainCtrl"}},data:c}).state("Campaign.VideoUpload.Main",{url:"/apartmentupload",views:{MainContent1:{templateUrl:o.CampaignVideoUploadViewsURL+"/VideoUploadSplash.html",controller:"VideoUploadSplashCtrl"}},data:c}).state("Campaign.VideoUpload.Form",{url:"/form",views:{VideoUploadMain:{templateUrl:o.CampaignVideoUploadViewsURL+"/VideoUploadForm.html",controller:"VideoUploadFormCtrl"}}}),t.otherwise("/"),n.interceptors.push(["$q","$location","$localStorage","$injector","TokenSvc",function(e,t,a,n,o){return{request:function(e){return e.headers=e.headers||{},e.headers.searchCheck?(delete e.headers.searchCheck,e):(o.getToken()&&(e.headers.Authorization=o.getToken()),e)},response:function(e){return"undefined"!=typeof e.data.token&&null!==e.data.token&&e.data.token?(o.storeToken(e.data.token),n.get("$state").reload(),e):e},responseError:function(t){if(401===t.status||403===t.status){if(o.deleteToken(),t.data.facebook)return e.reject(t);alert("Authentication Failed")}return t}}}])}]),angular.module("Directives").directive("favoritesDirv",["FavoritesFct",function(e){return{restrict:"A",link:function(e,t,a,n){}}}]),angular.module("Models").factory("ApartmentModel",["$sessionStorage","$resource","$q","lodash","WizioConfig","UnitCreateSvc",function(e,t,a,n,o,r){function i(e,t,a,n,o,r,i,l,s,c,d,u,p,m,f,h,g,A,v,S,y,w,b,U,C,L){this.apartmentData={id:e||null,street:t||null,unitNum:a||null,neighborhood:n||null,locality:o||null,administrative_area_level_3:r||null,state:i||null,zip:l||null,beds:s||null,baths:c||null,livingSpaces:d||null,maxResidency:u||null,costPerMonth:p||null,renovated:m||null,pets:f||null,ApartmentType:h||null,latitude:g||null,longitude:A||null,concatAddr:v||null,leaseType:S||null,leaseExpectedEnd:y||null,leaseActualEnd:w||null,LandlordId:b||null,route:U||null,laundry:C||null,elevator:L||null}}return i.prototype.api=function(){var e=this;return{create:function(e){t(o.baseAPIURL+"apartment").save(this.data,function(t){return e(t)})},update:function(e){t(o.baseAPIURL+"apartment/:id",{id:"@id"}).save({id:this.id},this.data,function(t){return e(t)})},getById:function(e){t(o.baseAPIURL+"apartment/:id",{id:"@id"}).get({id:this.id},function(t){return e(t)})},findOrCreate:function(a,n){console.dir(e),t(o.baseAPIURL+"apartment/claim/:action",{action:"@action"}).save(a,e,function(e){return n(e)})}}},i.prototype.getGeocodeData=function(e){var t=this.apartmentData;return a(function(e,a){r.parseGeocodeData(t.concatAddr,null,function(a,n){console.dir(n);for(var o in n)t[o]=n[o];console.dir("ENUHAEOSNTHEUSNTHAEUNTAOHEUNEAUHAEUNTAHUNRTUAOH"),e("done")})})},i.prototype.duplicate=function(){var e={};for(var t in this.apartmentData)this.apartmentData.hasOwnProperty(t)&&(e[t]=this.apartmentData[t]);return e},i.setDescription=function(){arguments.length>0&&(this.apartmentData.Descriptions=null,this.apartmentData.Descriptions.description=arguments.description)},i.prototype.concealAddress=function(){var e=Math.floor(this.apartmentData.concatAddr.charCodeAt(5)/19+4),t=Math.floor(this.apartmentData.concatAddr.charCodeAt(3)/19+4),a=parseInt(this.apartmentData.concatAddr.replace(/(^\d+)(.+$)/i,"$1")),n=a-e;15>a&&(n=1);var o=a+t,r=n.toString()+"-"+o.toString();this.apartmentData.concatAddr=r+this.apartmentData.concatAddr.replace(/^\d+/,"")},i.api=function(){return t(o.baseAPIURL+"apartment/:id",{id:"@id"})},i.claimApi=function(e,a){return t(o.baseAPIURL+"apartment/claim/finalize").save(e,function(e){return a(e)})},i.copyGeocodedData=function(e){var t=e.apartmentData;return new i(t.id,t.street,null,t.neighborhood,t.locality,t.administrative_area_level_3,t.state,t.zip,null,null,null,null,null,null,null,null,t.latitude,t.longitude,t.concatAddr,null,null,null,null,null)},i.build=function(e){return new i(e.id,e.street,e.unitNum,e.neighborhood,e.locality,e.administrative_area_level_3,e.state,e.zip,e.beds,e.baths,e.livingSpaces,e.maxResidency,e.costPerMonth,e.renovated,e.pets,e.ApartmentType,e.latitude,e.longitude,e.concatAddr,e.leaseType,e.leaseExpectedEnd,e.leaseActualEnd,e.LandlordId,e.route,e.laundry,e.elevator)},i}]),angular.module("Models").factory("ApplicantModel",["$resource","WizioConfig",function(e,t){function a(e,t,n,o,r){return this instanceof a?(this.UserId=e,this.ApplicationId=t,this.owner=n,this.applicationStatus=o,void(this.applicantStatus=r)):new a(e,t,n,o,r)}return a.prototype.setStatus=function(e){var t=this.status;switch(e){case 1:t="Confirmed";break;case 2:t="Rejected";break;case 3:t="Pending"}},a.prototype.setStatus=function(e){switch(e){case 1:this.status="Approved";break;case 2:this.status="Rejected";break;case 1:this.status="Pending"}},a.prototype.setOwner=function(a){var n=this;return e(t.baseAPIURL+"application/applicant/setowner").save(n,function(e){return a(e)})},a.prototype["delete"]=function(a){var n=this;return e(t.baseAPIURL+"/application/applicant").remove(n,function(e){return a(e)})},a.build=function(e){return console.dir(e),new a(e.UserId,e.ApplicationId,e.ApplicationOwner,e.applicationStatus,e.applicantStatus)},a}]),angular.module("Models").factory("ApplicationModel",["$resource","WizioConfig",function(e,t){function a(){for(var e=0;e<arguments.length;e++)this[e]=arguments[e]}a.prototype.api={base:function(){e(t.baseAPIURL+"application",{save:{method:"POST",isArray:!1}})},flex:function(){e(t.baseAPIURL+"application/:item/:action",{item:"@item",action:"@action"})},findByAppIds:function(){e(t.baseAPIURL+"application/ApplicationIds",{},{save:{method:"POST",isArray:!0}})},oneParam:function(){e(t.baseAPIURL+"/application/:param1",{param1:"@param1"},{save:{method:"POST",isArray:!0}})}};var n={base:e(t.baseAPIURL+"application",{save:{method:"POST",isArray:!1}}),flex:e(t.baseAPIURL+"application/:item/:action",{item:"@item",action:"@action"}),findByAppIds:e(t.baseAPIURL+"application/ApplicationIds",{},{save:{method:"POST",isArray:!0}}),oneParam:e(t.baseAPIURL+"/application/:param1",{param1:"@param1"},{save:{method:"POST",isArray:!0}})};return a.api=n,a}]),angular.module("Models").factory("AssignmentModel",["$resource","WizioConfig",function(e,t){function a(e,t){this.UserId=e,this.ApartmentId=t}return a.api=function(){return{base:e(t.baseAPIURL+"/assignment"),oneParam:e(t.baseAPIURL+"/assignment/:param1",{param1:"@param1"}),twoParam:e(t.baseAPIURL+"/assignment/:param1/:param2",{param1:"@param1",param2:"@param2"},{},{get:{method:"GET",isArray:!0}})}},a.build=function(e){return new Apartment(e.UserId,e.ApartmentId)},a}]),angular.module("Models").factory("DescriptionModel",["$sessionStorage","$resource","lodash","TokenSvc","WizioConfig",function(e,t,a,n,o){function r(e,t,a){this.UserId=e||null,this.ApartmentId=t||null,this.description=a,this.upvotes=0,this.downvotes=0}return r.prototype.api=function(){return t(o.baseAPIURL+"description")},r.prototype.getAssociatonData=function(e){this.UserId=n.decode().id,e&&(this.ApartmentId=e)},r.prototype.duplicate=function(){var e={};for(var t in this.apartmentData)this.descriptionData.hasOwnProperty(t)&&(e[t]=this.descriptionData[t]);return e},r.build=function(e){return new r(e.UserId,e.ApartmentId,e.description)},r}]),angular.module("Models").factory("FavoriteModel",["$sessionStorage","$resource","lodash","WizioConfig",function(e,t,a,n){function o(e,t){this.UserId=e,this.ApartmentId=t}return o.api=function(){return t(n.baseAPIURL+"favorite")},o.findByUser=function(){return t(n.baseAPIURL+"favorite/findbyuser",{},{save:{method:"POST",isArray:!0}})},o.build=function(e){return new o(e.UserId,e.ApartmentId)},o}]),angular.module("Models").factory("LeaseModel",["$resource","TokenSvc","FlexGetSetSvc","WizioConfig",function(e,t,a,n){function o(e,t,a,n,o,r,i,l,s,c,d,u,p,m,f,h,g,A,v,S,y,w,b,U){this.leaseData={id:e,dateStart:t,dateEnd:a,snowRemoval:n,smoking:o,pets:r,electricIncluded:i,heatIncluded:l,hotWaterIncluded:s,waterIncluded:c,gasIncluded:d,cableIncluded:u,internetIncluded:p,trashRemoval:m,monthsRentFree:f,lastMonthsRentNeeded:h,firstMonthsRentNeeded:g,brokerFeeNeeded:A,newKeyFeeNeeded:v,securityDeposit:S,secDepositNeeded:y,monthlyRent:w,brokerFeeAmount:U,newKeyFeeAmount:b}}var r={base:e(n.baseAPIURL+"lease")};return o.prototype.setAssociationData=function(){this.leaseData.UserId=t.decode().id,this.leaseData.LandlordId=t.decode().LandlordId,this.leaseData.ApartmentId=a.get("NewLeaseApartmentId")},o.prototype.create=function(t){var a=this;e(n.baseAPIURL+"lease").save(a,function(e){t(e)})},o.prototype.update=function(t){e(n.baseAPIURL+"lease/:id",{id:"@id"}).save({id:this.leaseData.id},this.leaseData,function(e){t(e)})},o.build=function(e){return new o(e.id,e.dateStart,e.dateEnd,e.snowRemoval,e.smoking,e.pets,e.electricIncluded,e.heatIncluded,e.hotWaterIncluded,e.waterIncluded,e.gasIncluded,e.cableIncluded,e.internetIncluded,e.trashRemoval,e.monthsRentFree,e.lastMonthsRent,e.firstMonthsRent,e.brokerFeeNeeded,e.newKeyFeeNeeded,e.securityDeposit,e.secDepositNeeded,e.monthlyRent,e.brokerFeeAmount,e.newKeyFeeAmount)},o.api=r,console.dir(o),o}]),angular.module("Models").factory("MediaModel",["$resource","$stateParams","TokenSvc","WizioConfig",function(e,t,a,n){function o(e,t,a,n,o){this.link=e,this.type=t||null,this.title=a||null,this.UserId=n,this.ApartmentId=o}return o.prototype.saveMedia=function(t){var a=this;return e(n.baseAPIURL+"/media").save(a,function(e){return t(e)})},o.prototype.getAssociationData=function(){this.UserId=a.decode().id,this.ApartmentId=t.id},o.build=function(e){return new o(e.link,e.type,e.title,e.UserId,e.ApartmentId)},o}]),angular.module("Models").factory("ProfileModel",["$sessionStorage","$resource","lodash","WizioConfig",function(e,t,a,n){function o(e,t,a,n,o,r,i,l,s,c,d,u,p,m,f,h,g,A,v,S,y,w,b){this.UserId=e,this.currentEmployer1=t,this.currentEmployerLOE1=a,this.currentEmployerPosition1=n,this.currentEmployer2=o,this.currentEmployerLOE2=r,this.currentEmployerPosition2=i,this.creditScore=l,this.pets=s,this.dateOfBirth=c,this.maritalStatus=d,this.emergencyContactName=u,this.emergencyContactPhone=p,this.emergencyContactRelationship=m,this.phoneNumber=f,this.currentAddress=h,this.currentPMName=g,this.currentPMContact=A,this.employmentStatus=v,this.studentStatus=S,this.studentSchool=y,this.studentType=w,this.studentMajor=b}o.prototype.api=function(){return t(n.baseAPIURL+"profile/:id",{id:"@id"})};var r={base:t(n.baseAPIURL+"profile"),oneParam:t(n.baseAPIURL+"profile/:id",{id:"@id"})};return o.api=r,o.build=function(e){return new o(e.UserId,e.currentEmployer1,e.currentEmployerLOE1,e.currentEmployerPosition1,e.currentEmployer2,e.currentEmployerLOE2,e.currentEmployerPosition2,e.creditScore,e.pets,e.dateOfBirth,e.maritalStatus,e.emergencyContactName,e.emergencyContactPhone,e.emergencyContactRelationship,e.phoneNumber,e.currentAddress,e.currentPMName,e.currentPMContact,e.employmentStatus,e.studentStatus,e.studentSchool,e.studentType,e.studentMajor)},o}]),angular.module("Models").factory("SearchModel",["$resource","WizioConfig",function(e,t){function a(e,t,a){this.unitInstance=e,this.topLevelType=t||null,this.filters=a||null}return a.prototype.send=function(a){return e(t.baseAPIURL+"search",{},{save:{method:"POST",isArray:!0}}).save(this,function(e){return console.dir(e),a(e)})},a.build=function(e){return new a(e.UnitInstance,e.filters)},a}]),angular.module("AdminPanelApp").factory("AdminPanelResource",["$resource","WizioConfig",function(e,t){return e(t.baseAPIURL+"admin/:item/:action",{item:"@item",action:"@action"})}]),angular.module("AmazonS3UploadApp").controller("AmazonS3UploadCtrl",["$scope","$http","$state",function(e,t,a){e.sizeLimit=5368709120,e.uploadProgress=0,e.creds={},e.upload=function(){AWS.config.update({accessKeyId:"AKIAIPGWV5OFR73P3VLQ",secretAccessKey:"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"}),AWS.config.region="us-east-1";var t=new AWS.S3({params:{Bucket:"wiziouservideos"}});if(e.file){var a=Math.round(parseInt(e.file.size));if(a>e.sizeLimit)return toastr.error("Sorry, your attachment is too big. <br/> Maximum "+e.fileSizeLabel()+" file attachment allowed","File Too Large"),!1;var n=e.uniqueString()+"-"+e.file.name,o={Key:n,ContentType:e.file.type,Body:e.file,ServerSideEncryption:"AES256"};t.putObject(o,function(t,a){return t?(toastr.error(t.message,t.code),!1):(toastr.success("File Uploaded Successfully","Done"),void setTimeout(function(){e.uploadProgress=0,e.$digest()},1e4))}).on("httpUploadProgress",function(t){e.uploadProgress=Math.round(t.loaded/t.total*100),e.$digest()})}else toastr.error("Please select a file to upload")},e.fileSizeLabel=function(){return Math.round(e.sizeLimit/1073741824)+"GB"},e.uniqueString=function(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=0;8>a;a++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}}]),angular.module("AmazonS3UploadApp").directive("file",function(){return{restrict:"AE",scope:{file:"@"},link:function(e,t,a){t.bind("change",function(t){var a=t.target.files,n=a[0];e.file=n,e.$parent.file=n,e.$apply()})}}}),angular.module("UnitApp").factory("UnitResource",["$resource","WizioConfig",function(e,t){return e(t.baseAPIURL+"apartment/:id",{id:"@id"})}]),angular.module("UnitApp").service("UnitCreateSvc",["lodash","FlexGetSetSvc","ApartmentClaimGetSetSvc",function(e,t,a){function n(t,a){console.dir(a);var n=e.filter(a.data.results,function(e){return e.formatted_address===t});switch(0===n.length&&(n=e.filter(a.data.results,function(e){return e["formatted address"]===t})),n.length){case 0:return!1;default:return n}}function o(e){return"undefined"!=typeof e[0].long_name?e[0].long_name:"undefined"!=typeof e[0].short_name?e[0].short_name:"na"}function r(t,a){function n(t){return e.filter(s,function(e){return e.types[0]===t})}function r(e,t){e&&e.length>0&&(i[t]=o(e))}var i={};if(console.dir(t),i.topLevelType=t[0].types[0],a)for(var l in a)i[l]=a[l];var s=t[0].address_components;i.concatAddr=t[0].formatted_address;var c=n("street_number"),d=n("route"),u=n("locality"),p=n("administrative_area_level_3"),m=n("administrative_area_level_1"),f=n("neighborhood"),h=n("postal_code");return c&&c.length>0&&d.length>0&&(i.street=o(c)+" "+o(d)),r(d,"route"),r(f,"neighborhood"),r(u,"locality"),r(p,"administrative_area_level_3"),r(m,"state"),r(h,"zip"),isNaN(t[0].geometry.location.lat)&&(i.latitude=t[0].geometry.location.lat().toFixed(6),i.longitude=t[0].geometry.location.lng().toFixed(6)),i}var i=function(e,t){var a=new google.maps.Geocoder;a.geocode({address:e},function(e,a){return a==google.maps.GeocoderStatus.OK?t(null,e):t({message:"No Google API Address found"},null)})},l=function(n,o){var r,i=null;"Unit.Claim"==$state.current.name?(r=a.get(),0===gooogleAPIDataRaw.length&&(console.dir("ARRAY BROKEN"),gooogleAPIDataRaw=a.get("Staging-ApartmentClaims"))):gooogleAPIDataRaw=t.get();var l=e.values(r.data.results.types);return 1===l.length?(i=l[0],o(i)):o(i)},s=function(e,a,o){var l=t.get(),s=!1;if(0!==l.length&&(s=n(e,l)),s!==!1){var c=r(s,a);return o(null,c)}i(e,function(e,t){if(e)return o("no address info found",null);var n=r(t,a);return o(null,n)})};return{getGeocodeData:i,addressSearchType:l,parseGeocodeData:s}}]),angular.module("AboutUsApp").controller("AboutListCtrl",["$scope",function(e){e.members=[{name:"Chris Canal",title:"CEO",picture:"chriscanal.png",twitter:"chriscanal4",linkedin:"chriscanal",email:"chris@wizio.co"},{name:"Cameron Billings",title:"CTO",picture:"cameronbillings.png",twitter:"CamBillings_",linkedin:"cameronbillings",email:"cameron@wizio.co"},{name:"Devon Grodkiewicz",title:"COO/CMO",picture:"devongrodkiewicz.jpg",twitter:"dsgrod",linkedin:"dsgrod",email:"devon@wizio.co"},{name:"Trent Duffy",title:"CMS-Chief of Misc Stuff",picture:"trentduffy.png",twitter:"trentolol",linkedin:"trentduffy",email:"ct_trentduffy@me.com"}]}]),angular.module("AboutUsApp").controller("AboutUsCtrl",["$scope",function(e){alert("welcome !")}]),angular.module("AccountApp").controller("AccountMainCtrl",["$scope",function(e){console.dir("HELLO")}]),angular.module("AdminPanelApp").controller("AdminCreateAssignmentCtrl",["$scope","SmartSearchSvc","UnitResource","UnitCreateSvc","TokenSvc","AssignmentResource",function(e,t,a,n,o,r){e.getLocation=function(e){return t.smartSearch(e)},e.toggleMin=function(){e.minDate=e.minDate?null:new Date},e.toggleMin(),e.maxDate=new Date(2020,5,22),e.open=function(t){e.status.opened=!0},e.setDate=function(t,a,n){e.dt=new Date(t,a,n)},e.dateOptions={formatYear:"yy",startingDay:1},e.status={opened:!1},e.sizeLimit=5368709120,e.uploadProgress=0,e.creds={},e.landlord={},e.apartment={},e.upload=function(){n.parseGeocodeData(e.apartmentAddress,e.apartment,function(t,n){n.landlordInfo=e.landlord,a.save(n,function(t,a){var n=t;AWS.config.update({accessKeyId:"AKIAIPGWV5OFR73P3VLQ",secretAccessKey:"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"}),AWS.config.region="us-east-1";var i=new AWS.S3({params:{Bucket:"wiziouservideos"}});if(e.file){var l=Math.round(parseInt(e.file.size));if(l>e.sizeLimit)return toastr.error("Sorry, your attachment is too big. <br/> Maximum "+e.fileSizeLabel()+" file attachment allowed","File Too Large"),!1;var s=o.decode(),c=e.apartmentAddress;c=c.replace(/[^0-9a-zA-Z]/g,"");var d=s.email+"-"+c+Math.floor(80*Math.random()+10),u={Key:d,ContentType:e.file.type,Body:e.file,ServerSideEncryption:"AES256"};i.putObject(u,function(t,a){if(t)return toastr.error(t.message,t.code),$modalInstance.dismiss(),!1;toastr.success("File Uploaded Successfully","Done");var o={UserId:s.id,ApartmentId:n.id,S3VideoId:d,youtubeId:e.assignment.youtubeId};r.save(o,function(e,t){}),setTimeout(function(){e.uploadProgress=0,e.$digest()},1e4),$modalInstance.close("ok")}).on("httpUploadProgress",function(t){e.uploadProgress=Math.round(t.loaded/t.total*100),e.$digest()})}else toastr.error("Please select a file to upload")})})},e.fileSizeLabel=function(){return Math.round(e.sizeLimit/1073741824)+"GB"},e.uniqueString=function(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=0;8>a;a++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}}]),angular.module("AdminPanelApp").controller("AdminCreateUnitCtrl",["$scope","$sessionStorage","$rootScope","$state","lodash","UnitResource","SmartSearchSvc","UnitCreateSvc","FlexGetSetSvc",function(e,t,a,n,o,r,i,l,s){e.$storage=t,e.numBeds=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],e.getLocation=function(e){return i.smartSearch(e)},e.addUnit=function(){var t=e.apartmentAddress,a={unitNum:e.unitNum,beds:e.beds,baths:e.baths,livingSpaces:e.livingRooms,maxResidency:e.maxResidency,costPerMonth:e.costPerMonth,renovated:e.renovated,pets:e.petPolicy,youtubeVRID:e.youtubeVRID};l.parseGeocodeData(t,a,function(e,t){r.save(t,function(e,t){n.go("Account.Dashboard.Main")})})}}]),angular.module("AdminPanelApp").controller("AdminSearchUnitCtrl",["$scope","SmartSearchSvc",function(e,t){e.filters={beds:null,baths:null,minPrice:null,maxPrice:null},e.search=function(){},e.getLocation=function(e){return t.smartSearch(e)}}]),angular.module("AdminPanelApp").controller("AdminUpdateAssignmentCtrl",["$scope","AdminPanelResource",function(e,t){e.data={},e.submitEdits=function(){t.save({item:"assignment",action:"update"},e.data,function(e,t){})}}]),angular.module("AdminPanelApp").controller("AdminUpdateUnitCtrl",["$scope","lodash","AdminPanelResource",function(e,t,a){e.apartment=null,e.numBeds=[0,1,2,3,4,5,6],e.numBaths=[0,1,2,3,4],e.numLivingrooms=[0,1,2,3],e.maxResidency=[0,1,2,3,4,5,6,7,8,9,10],e.renovatedSelect=["No","Yes","Unsure"],e.petPolicy=["Dogs Only","Cats Only","Dogs & Cats","Small Animals","None"],e.$on("updateUnitData",function(t,a){e.apartment=a[0]}),e.editUnit=function(){e.apartmentAddress,{unitNum:e.apartment.unitNum,beds:e.apartment.beds,baths:e.apartment.baths,livingSpaces:e.apartment.livingSpaces,maxResidency:e.apartment.maxResidency,costPerMonth:e.apartment.costPerMonth,renovated:e.apartment.renovated,pets:e.apartment.petPolicy,youtubeVRID:e.apartment.youtubeID};a.save({item:"unit",action:"update"},e.apartment,function(e,t){$state.go("Account.Dashboard.Main")})}}]),angular.module("AdminPanelApp").controller("AdminPanelMainCtrl",["$scope",function(e){e.$on("passToSiblingAdminApp",function(t,a){e.$broadcast(a.name,a.data)})}]),angular.module("ApplicationApp").factory("ApplicationResource",["$resource","WizioConfig",function(e,t){return{base:e(t.baseAPIURL+"application",{},{save:{method:"POST",isArray:!1}}),flex:e(t.baseAPIURL+"application/:item/:action",{item:"@item",action:"@action"}),findByAppIds:e(t.baseAPIURL+"application/ApplicationIds",{},{save:{method:"POST",isArray:!0}})}}]),angular.module("CampaignApp").controller("CampaignMainCtrl",["$scope",function(e){}]),angular.module("FooterApp").controller("FooterCtrl",["$rootScope","$scope","$state","$http","$modal","AuthFct","SmartSearchSvc","ModalSvc","WizioConfig",function(e,t,a,n,o,r,i,l,s){var c=function(e,t,a){return{backdrop:!0,keyboard:!0,modalFade:!0,templateUrl:e,controller:t,animation:!1,resolve:{data:function(){return a}}}};t.goToLogin=function(){a.go("Login")},t.getLocation=function(e){return i.smartSearch(e)},t.logout=function(e){r.logout()},t.getLocation=function(e){return i.smartSearch(e)},t.createUnit=function(){a.go("Unit.Create")},t.goHome=function(){a.go("LandingPage")},t.goAbout=function(){a.go("About")},t.goAccountCreate=function(){var e=s.AccountAuthViewsURL,a=c(e+"AccountTypeModal.html","AccountTypeModalCtrl"),n=c(e+"AuthCreateAcctForm.html","AuthCreateAcctModalCtrl","Tenant"),o=c(e+"AuthCreateAcctForm.html","AuthCreateAcctModalCtrl","Landlord"),r=c(e+"Login.html","AuthLoginModalCtrl");l.showModal(a,{}).then(function(e){"tenantSignup"===e?l.showModal(n,{}).then(function(e){if("login"===e)l.showModal(r,{}).then(function(e){});else{if("backStep"!=e)return;t.goAccoutCreate()}}):"landlordSignup"===e&&l.showModal(o,{}).then(function(e){
"login"===e&&l.showModal(r,{}).then(function(e){})})})},t.goAccountDashboard=function(){a.go("Account.Dashboard.Main")}}]),angular.module("LandingPageApp").controller("LandingPageCtrl",["$scope","$http","$state","UserRegistrationSvc","SmartSearchSvc","UnitCreateSvc","SearchFct",function(e,t,a,n,o,r,i){e.radioModel={realtor:!1,tenant:!0,broker:!1},e.filters={beds:null,baths:null,minPrice:null,maxPrice:null},e.neighborhoods=["Boston","Allston","Brighton","Jamaica Plain","Back Bay","Beacon Hill"],e.localeButtonClick=function(e){},e.goToUploadPage=function(){a.go("Campaign.VideoUpload.Main")},e.search=function(){var t={concatAddr:e.searchString};i.search(t,e.filters,function(e){a.go("Unit.Display")})},e.getLocation=function(e){return o.smartSearch(e)},e.registerUser=function(){var t={firstName:e.firstName,lastName:e.lastName,email:e.email,password:e.password,accountType:"local",userType:1};n.saveUser(t,function(e){a.go("Account.Dashboard.Main")})},e.sizeLimit=5368709120,e.uploadProgress=0,e.creds={},e.upload=function(){AWS.config.update({accessKeyId:"AKIAIPGWV5OFR73P3VLQ",secretAccessKey:"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"}),AWS.config.region="us-east-1";var t=new AWS.S3({params:{Bucket:"wiziouservideos"}});if(e.file){var a=Math.round(parseInt(e.file.size));if(a>e.sizeLimit)return toastr.error("Sorry, your attachment is too big. <br/> Maximum "+e.fileSizeLabel()+" file attachment allowed","File Too Large"),!1;var n=e.uniqueString()+"-"+e.file.name,o={Key:n,ContentType:e.file.type,Body:e.file,ServerSideEncryption:"AES256"};t.putObject(o,function(t,a){return t?(toastr.error(t.message,t.code),!1):(toastr.success("File Uploaded Successfully","Done"),void setTimeout(function(){e.uploadProgress=0,e.$digest()},1e4))}).on("httpUploadProgress",function(t){e.uploadProgress=Math.round(t.loaded/t.total*100),e.$digest()})}else toastr.error("Please select a file to upload")},e.fileSizeLabel=function(){return Math.round(e.sizeLimit/1073741824)+"GB"},e.uniqueString=function(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=0;8>a;a++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}}]),angular.module("LeaseApp").controller("LeaseFormCtrl",["$scope","$state","TokenSvc","LeaseFct","FlexGetSetSvc",function(e,t,a,n,o){if(e.lease={},e.selectOptions=n.selectLeaseOptions,e.editingListing="Account.Lease.Edit"===t.current.name?!0:!1,console.dir(e.editingListing),e.editingListing){var r=o.get("EditCurrentListing").Leases;2==r.length&&1==r[1].currentListing?e.lease=r[1]:e.lease=r[0]}else e.lease.ApartmentId=o.get("NewLeaseApartmentId"),console.dir(e.lease);e.formSubmission=function(t){console.dir(t),e.lease.UserId=a.decode().id,n[t](e.lease,function(e){})}}]),angular.module("LeaseApp").controller("LeaseMainCtrl",["$scope",function(e){}]),angular.module("LeaseApp").factory("LeaseFct",["LeaseModel","TokenSvc","FlexGetSetSvc",function(e,t,a){var n={utilities:[{variable:"electricIncluded",label:"Electricity Included",trueValue:1,falseValue:0},{variable:"gasIncluded",label:"Gas Included",trueValue:1,falseValue:0},{variable:"heatIncluded",label:"Heat Included",trueValue:1,falseValue:0},{variable:"hotWaterIncluded",label:"Hot Water Included",trueValue:1,falseValue:0},{variable:"waterIncluded",label:"Water Included",trueValue:1,falseValue:0},{variable:"cableIncluded",label:"Cable Included",trueValue:1,falseValue:0},{variable:"internetIncluded",label:"Internet Included",trueValue:1,falseValue:0}],additionalAmmenities:[{variable:"smoking",label:"Smoking OK",trueValue:1,falseValue:0},{variable:"snowRemoval",label:"Snow Removal Included",trueValue:1,falseValue:0},{variable:"trashRemoval",label:"Trash Removal Included",trueValue:1,falseValue:0}],pets:["Cats and Dogs OK","Cats OK","Dogs OK","Pets OK","Contact Landlord","No Pets"],neededUpfront:[{variable:"secDepositNeeded",label:"Security Deposit"},{variable:"newKeyFeeNeeded",label:"New Key Fee"},{variable:"firstMonthsRentNeeded",label:"First Months Rent"},{variable:"lastMonthsRentNeeded",label:"Last Months Rent"},{variable:"brokerFeeNeeded",label:"Broker Fee"}]},o=function(t,a){var n=e.build(t);n.setAssociationData(),console.dir(n),n.create(function(e){a(e)})},r=function(t,a){var n=e.build(t);n.update(function(e){a(e)})};return{selectLeaseOptions:n,createLease:o,editLease:r}}]),angular.module("NavbarApp").controller("NavbarCtrl",["$rootScope","$location","$scope","$state","$http","$modal","$sessionStorage","ApartmentModel","SearchModel","SearchFct","AuthFct","SmartSearchSvc","ModalSvc","WizioConfig",function(e,t,a,n,o,r,i,l,s,c,d,u,p,m){a.isCollapsed=!1,a.filters={beds:null,baths:null,minPrice:null,maxPrice:null};var f=function(e,t,a){return{backdrop:!0,keyboard:!0,modalFade:!0,templateUrl:e,controller:t,animation:!1,resolve:{data:function(){return a}}}};a.isActive=function(e){return e===t.path()},"LandingPage"===n.current.name?a.landingPageStyle={position:"absolute"}:a.landingPageStyle={},a.goToLogin=function(){var e=m.AccountAuthViewsURL,t=f(e+"Login.html","AuthLoginModalCtrl");p.showModal(t,{}).then(function(e){})},a.search=function(){var e={concatAddr:a.searchString};c.search(e,a.filters,function(e){n.go("Unit.Display")})},a.getLocation=function(e){return u.smartSearch(e)},a.logout=function(e){d.logout()},a.createUnit=function(){n.go("Unit.Create")},a.goHome=function(){n.go("LandingPage")},a.goAbout=function(){n.go("About")},a.goBlog=function(e){},a.goAccoutCreate=function(){var e=m.AccountAuthViewsURL,t=f(e+"AccountTypeModal.html","AccountTypeModalCtrl"),n=f(e+"AuthCreateAcctForm.html","AuthCreateAcctModalCtrl","Tenant"),o=f(e+"AuthCreateAcctForm.html","AuthCreateAcctModalCtrl","Landlord"),r=f(e+"Login.html","AuthLoginModalCtrl");p.showModal(t,{}).then(function(e){"tenantSignup"===e?p.showModal(n,{}).then(function(e){if("login"===e)p.showModal(r,{}).then(function(e){});else{if("backStep"!=e)return;a.goAccoutCreate()}}):"landlordSignup"===e&&p.showModal(o,{}).then(function(e){"login"===e&&p.showModal(r,{}).then(function(e){})})})},a.goAccountDashboard=function(){n.go("Account.Dashboard.Main")}}]),angular.module("SharedFactoryApp").factory("GeocoderFct",["$q",function(e){var t=function(t){var a=e.defer(),n=new google.maps.Geocoder;return n.geocode({address:t},function(e,t){t===google.maps.GeocoderStatus.OK&&a.resolve(e[0].geometry.location)}),a.promise};return{getLatLong:t}}]).factory("MapFct",["ApartmentGetSetSvc","$sessionStorage","$stateParams","$state","WizioConfig",function(e,t,a,n,o){var r=function(){var t={scrollwheel:!1,zoom:12,center:new google.maps.LatLng(42.3601,-71.0589),mapTypeId:google.maps.MapTypeId.ROADMAP},a=function(e){if(console.dir(e),e.constructor!==Array&&(e=[e]),0===e.length)return t;var a=null,n=null;for(i=0;i<e.length;i++)a+=e[i].apartmentData.latitude,n+=e[i].apartmentData.longitude;return a/=e.length,n/=e.length,t={scrollwheel:!1,zoom:12,center:new google.maps.LatLng(a,n),mapTypeId:google.maps.MapTypeId.ROADMAP}},o=null;return"Unit.Details"===n.current.name?(o=e.get("apartmentSelected"),console.dir(o)):"Unit.Display"===n.current.name&&(o=e.get("apartmentSearch")),console.dir(o),a(o)},l=function(t){function a(e){var a=new google.maps.Marker({map:t,position:new google.maps.LatLng(e.apartmentData.latitude,e.apartmentData.longitude),title:e.apartmentData.concatAddr,icon:"/public/viewtemplates/images/brand_assets/map_pin.png"});console.dir("NSUETOEUNSTHEONUTSHOENUOEU"),console.dir(e),a.content='<div class="infoWindowContent"><div style="width: 140px; display:inline-block; margin:auto;padding: 20px 25px;"><span class="apt-tile__favorite-btn"><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="20px" height="20px" viewBox="0 0 40 40" enable-background="new 0 0 40 40" xml:space="preserve"><path fill="none" stroke="#000000" stroke-linecap="round" stroke-miterlimit="10" d="M20.001,37.152 C6.783,24.287,3.066,19.554,2.262,14.704C1.278,8.769,5.694,2.848,12.578,2.848c2.949,0,5.63,1.133,7.423,3.026 c1.79-1.893,4.471-3.026,7.421-3.026c6.853,0,11.306,5.893,10.315,11.856C36.952,19.449,33.479,24.031,20.001,37.152z"/></svg></span><p style="display: inline-block; padding-left:10px; padding-top:10px;">$'+e.Lease.leaseData.monthlyRent+'</p><a href="'+o.frontEndURL+"#/unit/details/"+e.apartmentData.id+'"><button class="btn btn-small" style="display: block; padding: 2px 22px; background-color:transparent; border:1px solid #7A9DD1; color:#7A9DD1;">View</button></a></div><img class="pull-right "src = style="width:160px;height:120px;" /></div>';var n=new google.maps.InfoWindow;google.maps.event.addListener(a,"click",function(){n.setContent("<p>"+a.title+"</p>"+a.content),n.open(t,a)}),r.push(a)}var r=[],l=null;"Unit.Details"===n.current.name?l=e.get("apartmentSelected"):"Unit.Display"===n.current.name&&(l=e.get("apartmentSearch"));var s=function(e){for(console.dir(e),Array.isArray(e)||(e=[e]),i=0;i<e.length;i++)console.dir(e[i]),a(e[i]);return r};return s(l)};return{makeMap:r,makeMarkers:l}}]),angular.module("SharedFactoryApp").factory("SearchResource",["$resource","WizioConfig",function(e,t){return e(t.baseAPIURL+"search/",{},{save:{method:"POST",isArray:!0}})}]),angular.module("SharedServiceApp").factory("SearchFct",["$sessionStorage","$rootScope","ApartmentModel","SearchModel","DescriptionModel","LeaseModel","lodash",function(e,t,a,n,o,r,l){var s=function(e){for(i=0;i<e.length;i++){var t=Math.floor(e[i].concatAddr.charCodeAt(5)/19+4),a=Math.floor(e[i].concatAddr.charCodeAt(3)/19+4),n=parseInt(e[i].concatAddr.replace(/(^\d+)(.+$)/i,"$1")),o=n-t;15>n&&(o=1);var r=n+a,l=o.toString()+"-"+r.toString();e[i].hiddenAddress=l+e[i].concatAddr.replace(/^\d+/,"")}return e},c=function(e){for(var t,n=[],i=0;i<e.length;i++){t=e[i];var s=a.build(t);s.concealAddress(),n.push(s),t.Descriptions&&0!==t.Descriptions.length&&(console.dir(t.Descriptions[0]),n[i].Description=o.build(t.Descriptions[0])),t.Leases&&0!==t.Leases.length&&(n[i].Lease=r.build(t.Leases[0])),console.dir(t),t.Media&&0!==t.Media.length&&(n[i].Media=l.groupBy(t.Media,"type"))}return n},d=function(o,r,i){var l=a.build(o);l.getGeocodeData().then(function(a){var o=null;l.apartmentData.topLevelType&&(o=l.apartmentData.topLevelType);var s=new n(l,o,r);s.send(function(a){var n=c(a);e.apartmentSearch=n,t.$broadcast("searchFinished",n),i("done")})})};return{search:d,concealAddress:s,formatSearchResults:c}}]),angular.module("SharedServiceApp").service("ApartmentSearchSvc",["$rootScope","$sessionStorage","$state","SearchResource","UnitCreateSvc",function(e,t,a,n,o){}]).service("UserRegistrationSvc",["$state","AuthRegistrationResource",function(e,t){function a(e,a){t.save(e,function(e){a(e)})}return{saveUser:a}}]).service("TokenSvc",["$rootScope","$localStorage","jwtHelper",function(e,t,a){var n=function(){return t.token&&!a.isTokenExpired(t.token)?a.decodeToken(t.token):"No Token"},o=function(){return t.token?a.isTokenExpired(t.token)?(delete t.token,!0):!1:!0},r=function(a){return a?(e.isLoggedIn=!0,t.token=a,!0):!1},i=function(){return t.token?a.isTokenExpired(t.token)?(t.token=void 0,delete t.token,"No Token"):t.token:"No Token"},l=function(){return t.token?(t.token=void 0,delete t.token,!0):!1};return{decode:n,checkExp:o,storeToken:r,getToken:i,deleteToken:l}}]).service("SmartSearchSvc",["$http","$state","FlexGetSetSvc","ApartmentClaimGetSetSvc",function(e,t,a,n){var o=function(t,o){return e.get("//maps.googleapis.com/maps/api/geocode/json",{headers:{searchCheck:!0},params:{address:t,sensor:!1,components:"country:US|administrative_area:MA"}}).then(function(e){return"Staging-ApartmentClaims"===o?(n.reset("Staging-ApartmentClaims"),n.set(e.data,o)):(console.dir(e),a.set(e,o)),e.data.results.map(function(e){return e.formatted_address})})};return{smartSearch:o}}]).service("ModalSvc",["$modal",function(e){var t={backdrop:!0,keyboard:!0,modalFade:!0,templateUrl:"/public/app/modules/shared/viewtemplates/defaultmodal.html"},a={closeButtonText:"Close",actionButtonText:"OK",headerText:"Proceed?",bodyText:"perform this action"};this.showModal=function(e,t){return e||(e={}),this.show(e,t)},this.show=function(n,o){var r={},i={};return angular.extend(r,t,n),angular.extend(i,a,o),r.controller||(r.controller=["$scope","$modalInstance",function(e,t){e.modalOptions=i,e.modalOptions.ok=function(e){t.close(e)},e.modalOptions.close=function(e){t.close("cancel")}}]),e.open(r).result}}]),angular.module("UnitApp").controller("UnitClaimFormCtrl",["$scope","$state","UnitFct","ApartmentModel","SmartSearchSvc","UnitCreateSvc","ModalSvc","TokenSvc","ApartmentClaimGetSetSvc","WizioConfig",function(e,t,a,n,o,r,i,l,s,c){e.singleUnit="Unit.Edit"===t.current.name||"Unit.Create"===t.current.name?!0:!1,e.selectOptions=a.selectOptions,e.apartmentArray=[[]];var d=[{}];e.getLocation=function(e){return o.smartSearch(e,"Staging-ApartmentClaims")},e.addAddress=function(){d.push({}),e.apartmentArray.push([])},e.addressEntered=function(t){var a=e.apartmentArray[t];r.parseGeocodeData(a.address,null,function(e,n){d[t]=n,a.push(n),s.set(n,"ApartmentClaims")})},e.addUnit=function(t){e.apartmentArray[t].push({}),console.dir(e.apartmentArray[t]);var a=e.apartmentArray[t].length-1;e.apartmentArray[t][a]=d[t],console.dir(e.apartmentArray),console.dir(e.apartmentArray[t])},e.unitEntered=function(t,a){var o=e.apartmentArray[t][a];n.claimApi().save(null,o,function(t){if(t.created){for(var a in t.apartment)t.apartment.hasOwnProperty(a)&&(o[a]=t.apartment[a]);return void console.dir(e.apartmentArray)}var n={backdrop:!0,keyboard:!0,modalFade:!0,templateUrl:c.UnitViewsURL+"UnitVerifyModal.html",controller:"UnitVerifyModalCtrl",resolve:{modalData:function(){return t.apartment}}};i.showModal(n,{}).then(function(e){if("Do not use data"===e)return void(o.id=t.apartment.id);delete o.unitNum;for(var a in t.apartment)t.apartment.hasOwnProperty(a)&&(o[a]=t.apartment[a])})})},e.copyUnit=function(t,a){var n=e.apartmentArray[t][a],o={};o.copy=!0;var r,i=Object.keys(n);for(r=0;r<i.length;r++)o[i[r]]=n[i[r]];var l,s={},c=Object.keys(n.Descriptions);for(l=0;l<c.length;l++)"description"==n.Descriptions[i[r]],s[i[r]]=n.Descriptions[i[r]];o.Descriptions=s,e.apartmentArray[t].push(o)},e.removeUnit=function(t,a){console.dir(e.apartmentArray)},e.removeAddress=function(t){delete e.apartmentArray[t]},e.submit=function(){for(var t=0;t<e.apartmentArray.length;t++)for(var a=0;a<e.apartmentArray[t].length;a++)e.apartmentArray[t][a].Descriptions.ApartmentId=e.apartmentArray[t][a].id,e.apartmentArray[t][a].Descriptions.UserId=l.decode().id,e.apartmentArray[t][a].Descriptions.userType=l.decode().userType;s.reset("ApartmentClaims"),n.claimApi().save({action:"finalize"},e.apartmentArray,function(e){})}}]),angular.module("UnitApp").controller("UnitClaimFormCtrl2",["$scope","$state","TokenSvc","ApartmentModel","DescriptionModel","SmartSearchSvc","UnitFct","FlexGetSetSvc","ModalSvc",function(e,t,a,n,o,r,i,l,s){e.singleUnit="Unit.Edit"===t.current.name?!0:!1,e.selectOptions=i.selectOptions,e.getLocation=function(e){return r.smartSearch(e,"Staging-ApartmentClaims")},e.singleUnit?l.get("UnitToEdit"):e.containingArray=[[{}]],e.addAddress=function(){e.containingArray.push([])},e.addUnit=function(t){var a=e.containingArray[t][0],o=n.copyGeocodedData(a);e.containingArray[t].push(o)},e.onUnitBlur=function(t,o){var r=e.containingArray[t][o].apartmentData,i=(r.Assignment,n.build(r));i.getGeocodeData().then(function(n){console.dir(i),i.api().findOrCreate(null,function(n){if(n.created)i.apartmentData.id=n.apartment.id,i.Assignment={UserId:a.decode().id,ApartmentId:i.apartmentData.id},e.containingArray[t][o]=i;else{var r={closeButtonText:"Close",actionButtonText:"OK",headerText:"This apartment has been claimed already",bodyText:"Help text"};s.showModal({},r).then(function(e){})}})})},e.onDescriptionBlur=function(t,a){console.dir(e.containingArray);var n=e.containingArray[t][a];console.dir(n);var r=n.Description.description||null,i=new o(null,null,r);i.getAssociatonData(n.apartmentData.id),n.Description=i},e.copyUnit=function(t,a){var r=e.containingArray[t][a],i=r.Description,l=r.duplicate(),s=i.duplicate(),c=n.build(l);c.Description=o.build(s),e.containingArray[t].push(c)},e.deleteUnit=function(t,a){delete e.containingArray[t][a]},e.deleteAddress=function(t,a){delete e.containingArray[t][a]},e.submit=function(){n.claimApi(e.containingArray,function(e){})}}]),angular.module("UnitApp").controller("UnitCreateCtrl",["$scope","$sessionStorage","$rootScope","$state","lodash","UnitResource","SmartSearchSvc","UnitCreateSvc","FlexGetSetSvc",function(e,t,a,n,o,r,i,l,s){e.$storage=t,e.numBeds=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],e.getLocation=function(e){return i.smartSearch(e)},e.addUnit=function(){var t=e.apartmentAddress,a={unitNum:e.unitNum,beds:e.beds,baths:e.baths,livingSpaces:e.livingRooms,maxResidency:e.maxResidency,costPerMonth:e.costPerMonth,renovated:e.renovated,pets:e.petPolicy,youtubeVRID:e.youtubeVRID};l.parseGeocodeData(t,a,function(e,t){r.save(t,function(e,t){n.go("Account.Dashboard.Main")})})}}]),angular.module("UnitApp").controller("UnitDetailCtrl",["$scope","$state","$modal","$location","$sessionStorage","$sce","lodash","ApartmentGetSetSvc","UnitResource","MapFct","TokenSvc","FlexGetSetSvc","RerouteGetSetSvc","FavoriteModel","MediaModel","ModalSvc","WizioConfig","SearchFct",function(e,t,a,n,o,r,i,l,s,c,d,u,p,m,f,h,g,A){function v(t){var a=new m(t.id,e.apartment.id),n={};m.api().save(a,function(t){return"ERR"===t.status?(n.closeButtonText="Close",n.actionButtonText="OK",n.headerText="Error",n.bodyText="You've already favorited this apartment!",void h.showModal({},n)):(n.closeButtonText="Close",n.actionButtonText="OK",n.headerText="Success!",n.bodyText="This apartment is favorited! You can view this apartment in your account page now.",h.showModal({},n),void(e.favorited=!0))})}e.listing={},l.checkApartment(function(t){t=t[0],l.set(t,"apartmentSelected"),e.description=t.Description,e.listing=t.Lease?t.Lease.leaseData:"Monthly Rent Unavailable",newApartmentData=i.mapValues(t.apartmentData,function(e){return null===e?"Unknown":e}),t.apartmentData=newApartmentData,e.apartment=t.apartmentData,e.media=t.Media;var a=0;e.photoUrl=e.media.vrphoto[a].link,e.photosRight=function(){a===e.media.vrphoto.length?a=0:e.photoUrl=e.media.vrphoto[a++].link},e.photosLeft=function(){a--},e.trust=r;var n=d.decode();if(n&&"No Token"!==n&&"undefined"!==n&&(n=d.decode(),n.applications.length>0)){i.find(n.applications.ApartmentId,e.apartment)}var o=c.makeMap();e.map=new google.maps.Map(document.getElementById("map"),o);c.makeMarkers(e.map);n&&"undefined"!=typeof n.favorites&&0!==n.favorites.length&&-1!==i.indexOf(n.favorites,e.apartment.id)?e.favorited=!0:e.favorited=!1}),e.mediaTab="unitPhotos",e.selectMediaTab=function(t){e.mediaTab=t},e.range=function(e){return new Array(e)};var S=function(t){width=$(".unit-details-media-tab-content-picker-slider-scroller").width(),el=$(".unit-details-media-tab-content-picker-slider-scroller"),currentPosition=el.scrollLeft(),moveWidth=.5*width*t,el.animate({scrollLeft:currentPosition+moveWidth},500,function(){e.sliderCanGoForward=e.canSliderForward(),e.sliderCanGoBackward=e.canSliderBackward()})};e.sliderCanGoForward=!0,e.sliderCanGoBackward=!1,e.canSliderBackward=function(){return $(".unit-details-media-tab-content-picker-slider-scroller").scrollLeft()>0},e.canSliderForward=function(){return el=$(".unit-details-media-tab-content-picker-slider-scroller"),width=el.outerWidth(),currentPosition=el.scrollLeft(),viewportWidth=el.width(),currentPosition+viewportWidth<width},e.moveSliderBackward=function(){S(-1)},e.moveSliderForward=function(){S(1)},e.available=!1;var y=function(e,t,a,n){return{backdrop:!0,keyboard:!0,modalFade:!0,templateUrl:e,controller:t,resolve:{modalData:function(){return n}}}},w=g.AccountAuthViewsURL,b=y(w+"Login.html","AuthLoginModalCtrl");e.applyToApartment=function(){var a=y(g.ApplicationFormViewsURL+"ApplicationCreateModal.html","ApplicationCreateModalCtrl","md");d.checkExp()?(d.deleteToken(),h.showModal(b,{}).then(function(n){console.dir(n),n&&(u.set(e.apartment,"ApartmentApplyingTo"),h.showModal(a,{}).then(function(e){t.go("Account.Dashboard.Main")}))})):(u.set(e.apartment,"ApartmentApplyingTo"),h.showModal(a,{}).then(function(e){t.go("Account.Dashboard.Main")}))},e.favorite=function(){var e=d.decode();return"No Token"!==e?void v(e):void h.showModal(b,{}).then(function(e){if(e){var t=d.decode();return void v(t)}})},e.deleteFavorite=function(){var t=d.decode(),a=new m(t.id,e.apartment.id);m.api()["delete"](a,function(e){})},e.setupTour=function(){var e=y(g.ApplicationFormVidewsURL+"../../../../../assets/featureComing.html","ApplicationCreateModalCtrl","md");h.showModal(e,{}).then(function(e){})},e.submitVideo=function(){var t=new f(e.media.video.link,"vrvideo");t.getAssociationData(),t.saveMedia(function(e){console.dir(e)})},e.submitPhoto=function(){var t=new f(e.media.photo.link,"vrphoto",e.media.photo.title);t.getAssociationData(),t.saveMedia(function(e){console.dir(e)})}}]),angular.module("UnitApp").controller("UnitDisplayCtrl",["$scope","$sessionStorage","$state","lodash","ApartmentGetSetSvc","ApartmentModel","SearchModel","ModalSvc","SearchFct","SmartSearchSvc","MapFct",function(e,t,a,n,o,r,i,l,s,c,d){var u=function(){var t=d.makeMap();e.map=new google.maps.Map(document.getElementById("map"),t);d.makeMarkers(e.map);e.openInfoWindow=function(e,t){e.preventDefault(),google.maps.event.trigger(t,"click")}};if(e.sessionStorage=t,e.apartmentSearch=t.apartmentSearch,console.dir(e.apartmentSearch),0===e.apartmentSearch.length){var p={closeButtonText:"Close",actionButtonText:"OK",headerText:"No Listings Found",bodyText:"Unfortunatly, we could not find any listings that met your specified criteria. Pleasse try broadening your search parameters."};l.showModal({},p).then(function(e){})}e.mapshow=!0,e.maphidden=!1,e.filterToggle=!0,e.filters={beds:null,baths:null,minPrice:null,maxPrice:null},u(),e.tabToggleMap=function(){e.mapshow||(e.mapshow=!e.mapshow,e.maphidden=!e.maphidden)},e.tabToggleGrid=function(){e.maphidden||(e.mapshow=!e.mapshow,e.maphidden=!e.maphidden)},e.tabToggleFilters=function(){e.filterToggle=!e.filterToggle},e.$on("searchFinished",function(t,a){e.apartmentSearch=a,u()}),e.apartmentSelected=function(t){console.dir("HI");var r=n.find(e.apartmentSearch,function(e){return e.apartmentData.id===t});if(console.dir(r),void 0!==r)console.dir(r),o.set(r,"apartmentSelected"),a.go("Unit.Details",{id:t});else{var i={closeButtonText:"Close",actionButtonText:"OK",headerText:"Listing Load Error",bodyText:"There was an error loading the page you requested. Please try again, or start your search over."};l.showModal({},i).then(function(e){})}},e.search=function(){var t={concatAddr:e.searchString};s.search(t,e.filters,function(e){a.go("Unit.Display")})},e.getLocation=function(e){return c.smartSearch(e)}}]),angular.module("UnitApp").controller("UnitVerifyModalCtrl",["$scope","$modalInstance","modalData",function(e,t,a){e.apartment=a,e.dontUseData=function(){t.close("Do not use data")},e.useData=function(){t.close("Use data")}}]),angular.module("UnitApp").controller("UnitMainCtrl",["$scope",function(e){}]),angular.module("UnitApp").factory("UnitFct",["ApartmentModel",function(e){var t={beds:[0,1,2,3,4,5,6,7,8],baths:[1,2,3],livingSpaces:[0,1,2,3],laundry:["In Unit","In Building","None"],elevator:["Yes","No"]},a=function(){};return{selectOptions:t,createUnit:a}}]),angular.module("AccountApp").controller("AccountTypeModalCtrl",["$scope","$modalInstance",function(e,t){e.closeModal=function(){t.close()},e.nextStep=function(e){exitCode="tenant"==e?"tenantSignup":"landlordSignup",t.close(exitCode)}}]),angular.module("AccountApp").controller("AuthCreateAcctModalCtrl",["$scope","$state","$modal","$modalInstance","ModalSvc","data","WizioConfig","UserRegistrationSvc",function(e,t,a,n,o,r,i,l){e.user={},e.backStep=function(){n.close("backStep")},e.hasRegistered=!1,e.closeModal=function(){return n.close("ok")},e.setUserObj=function(){if(e.user.password===e.user.passwordConfirm)e.user.accountType="local","Tenant"===r?e.user.userType=1:e.user.userType=2,l.saveUser(e.user,function(t){if("ERR"===t.status){var a={closeButtonText:"Close",actionButtonText:"OK",headerText:"Email Not valid",bodyText:"That email is already in use by an account holder. Please try another email or reset your password if you forgot it."};o.showModal({},a).then(function(e){})}else e.hasRegistered=!0});else{var t={closeButtonText:"Close",actionButtonText:"OK",headerText:"Password Error",bodyText:"The two passwords you typed do not match"};o.showModal({},t).then(function(e){})}},e.login=function(){return n.close("login")},e.cancel=function(){"Campaign.VideoUpload.Main"===t.current.name?n.dismiss():t.go("Home")}}]),angular.module("AccountApp").controller("AuthLoginModalCtrl",["$rootScope","$scope","$state","$localStorage","$stateParams","$facebook","$location","$modalInstance","ModalSvc","AuthFct","AuthResetPasswordResource","AuthUpdatePasswordResource","TokenSvc","RerouteGetSetSvc","WizioConfig",function(e,t,a,n,o,r,i,l,s,c,d,u,p,m,f){f.AccountAuthViewsURL;t.closeModal=function(){l.close()},t.forgotPassword=function(){return a.go("SendResetEmail"),l.close("ok")},t.requestLogin=function(){var a={email:t.email,password:t.password};c.signin(a,function(t){return e.isLoggedIn=!0,e.userType=p.decode().userType,l.close("ok")},function(){e.error="Failed to sign in!",t.email="",t.password=""})}}]),angular.module("AccountApp").controller("AuthResetPassCtrl",["$rootScope","$scope","$state","$localStorage","$stateParams","$facebook","$location","ModalSvc","AuthFct","AuthResetPasswordResource","AuthUpdatePasswordResource","TokenSvc","RerouteGetSetSvc","WizioConfig",function(e,t,a,n,o,r,i,l,s,c,d,u,p,m){var f=function(e,t,a){return{backdrop:!0,keyboard:!0,modalFade:!0,templateUrl:e,controller:t,resolve:{data:function(){return a}}}},h=m.AccountAuthViewsURL;t.sendResetEmail=function(){var e={};e.email=t.email,c.save(e,function(t){if("ERR"===t.status){var n={closeButtonText:"Close",actionButtonText:"OK",headerText:"Password Reset Error",bodyText:"We could not send an email to "+e.email+" for some reason. Please try another email."};l.showModal({},n).then(function(e){})}else{var o={closeButtonText:"Close",actionButtonText:"OK",headerText:"Password Reset",bodyText:"An email has been sent to "+e.email+" with instructions on how to reset your password"};l.showModal({},o).then(function(e){a.go("LandingPage")})}})},t.closeModal=function(){$modalInstance.close()};var g=f(h+"Login.html","AuthLoginModalCtrl");t.resetPassword=function(){if(t.password===t.passwordConfirm){var e={};e.password=t.password,e.token=o.token,d.save(e,function(e){if("ERR"!==e.status){var t={closeButtonText:"Close",actionButtonText:"OK",headerText:"Password Updated",bodyText:"You have succesfully updated the password for your account!"};l.showModal({},t).then(function(e){a.go("LandingPage")})}else{var n={closeButtonText:"Close",actionButtonText:"OK",headerText:"Password Update Error",bodyText:"We coult not update your password for some reason. Please try again."};l.showModal({},n).then(function(e){})}})}else{t.password="",t.passwordConfirm="";var n={closeButtonText:"Close",actionButtonText:"OK",headerText:"Password do not match error",bodyText:"The two passwords that you typed do not match. Please try again"};l.showModal({},n).then(function(e){})}},t.requestLogin=function(){var a={email:t.email,password:t.password};s.signin(a,function(t){return e.isLoggedIn=!0,e.userType=u.decode().userType,$modalInstance.close("ok")},function(){e.error="Failed to sign in!",l.showModal(g,{}).then(function(e){})})}}]),angular.module("AuthApp").factory("AuthFct",["$state","$localStorage","$http","$rootScope","AuthRegistrationResource","AuthLoginResource","TokenSvc",function(e,t,a,n,o,r,i){var l=function(){var e=!0,t=i.getToken();return"No Token"!==t&&(e=i.checkExp(t)),"No Token"===t||e?!1:!0};return{signup:function(e,t,a){o.save(null,e,function(e,a){t(a)})},signin:function(e,t,a){r.save(e,function(e){return e.token?t(e,status):a("failed")})},logout:function(){return t.token=null,delete t.token,n.isLoggedIn=!1,e.current.data.requireLogin?void e.go("LandingPage"):void 0},isLoggedin:l}}]),angular.module("AuthApp").factory("AuthLoginResource",["$resource","WizioConfig",function(e,t){return e(t.baseAPIURL+"user/authenticate")}]).factory("AuthResetPasswordResource",["$resource","WizioConfig",function(e,t){return e(t.baseAPIURL+"user/forgotpassword")}]).factory("AuthUpdatePasswordResource",["$resource","WizioConfig",function(e,t){return e(t.baseAPIURL+"user/updatepassword")}]).factory("AuthRegistrationResource",["$resource","WizioConfig",function(e,t){return e(t.baseAPIURL+"user/registration")}]),angular.module("AccountApp").service("AuthCreateUserSvc",[function(){var e=function(e,t){return e={firstName:e.firstName,lastName:e.lastName,email:e.email,password:e.password},"tenant"===t.usertype?e.userType=1:"realtor"===t.usertype?e.userType=2:"broker"===t.usertype&&(e.userType=3),e};return{CreateUser:e}}]),angular.module("AccountApp").controller("AddTenantsToLeaseCtrl",["$scope","$modalInstance","modalData","LeaseModel",function(e,t,a,n){e.inputNames=[{labelName:"First Name:",variable:"firstName"},{labelName:"Last Name:",variable:"lastName"},{labelName:"Email:",vairable:"email"}],e.lease=[];for(var o=0;o<a.Apartment.maxResidency;o++)e.lease.push({});e.addTenantsToLease=function(){console.dir(e.lease)}}]),angular.module("AccountApp").controller("DashboardApplicationCtrl",["$scope","ApplicationResource","ApplicationModel","TokenSvc","lodash","ModalSvc","WizioConfig",function(e,t,a,n,o,r,i){var l=n.decode(),s=o.pluck(l.applications,"ApplicationId");t.findByAppIds.save(s,function(t,a){if(0!==t.length){var n=o.groupBy(t,"ApplicationId");e.applications=o.values(n),console.dir(e.applications),e.applications.length>0&&(e.applicationsExist=!0,console.dir(e.applications))}else e.applicationsExist=!1}),e.changeOwner=function(t){var a={backdrop:!0,keyboard:!0,modalFade:!0,size:"md",templateUrl:i.ApplicationFormViewsURL+"NewOwnerSelectModal.html",controller:"NewOwnerSelectModalCtrl",resolve:{modalData:function(){return e.applications[t]}}};r.showModal(a,{}).then(function(e){})},e.deleteApplication=function(t){var n={closeButtonText:"Cancel",actionButtonText:"Delete Application",headerText:"Deleting Application",bodyText:"This will delete the entire application and remove yourself and all other applicants from the apartment. Are you sure you want to proceed?"};r.showModal({},n).then(function(n){a.api.oneParam.remove({param1:e.applications[t][0].ApplicationId},function(a,n){e.applications.splice(t),alert("Removed from application")})})},e.removeFromApplication=function(a){var n={ApplicationId:e.applications[a][0].ApplicationId,concatAddr:e.applications[a][0].Apartment.concatAddr,UserId:l.id};if(l.id===e.applications[a][0].ApplicationOwner){var o={closeButtonText:"Delete Application",actionButtonText:"Select a New Owner",headerText:"Deleting Applicant",bodyText:"Would you like to delete the entire application or select a new application owner for the remaining applicants?"};e.applications[a].removeCurrentUser=!0;var s={backdrop:!0,keyboard:!0,modalFade:!0,size:"md",templateUrl:i.ApplicationFormViewsURL+"NewOwnerSelectModal.html",controller:"NewOwnerSelectModalCtrl",resolve:{modalData:function(){return e.applications[a]}}};r.showModal({},o).then(function(o){console.dir(o),"ok"===o?r.showModal(s,{}).then(function(e){}):t.flex.save({item:"user",action:"remove"},n,function(t,n){e.applications.splice(a);var o={closeButtonText:"Close",actionButtonText:"OK",headerText:"User Removal",bodyText:"You have been removed from this application. Thanks for using Wizio!"};r.showModal({},o).then(function(e){})})})}else{var o={closeButtonText:"Delete Application",actionButtonText:"Select a New Owner",headerText:"Deleting Applicant",bodyText:"Would you like to delete the entire application or select a new application owner for the remaining applicants?"
};r.showModal({},o).then(function(o){console.dir(o),"ok"===o&&t.flex.save({item:"user",action:"remove"},n,function(t,n){e.applications.splice(a),alert("Removed from application")})})}}}]),angular.module("AccountApp").controller("DashboardControlsCtrl",["$scope","$state","TokenSvc","FlexGetSetSvc","ProfileModel",function(e,t,a,n,o){e.accountInfo=a.decode(),e.viewProfile=function(){console.dir(e.accountInfo),e.accountInfo.ProfileId?o.api.oneParam.get({id:e.accountInfo.ProfileId},function(e){e?(n.set(e,null,"ExtendedProfile"),t.go("Account.Profile.Edit")):t.go("Account.Profile.Create")}):t.go("Account.Profile.Create")},e.claimApartments=function(){t.go("Unit.Claim")}}]),angular.module("AccountApp").controller("DashboardFavoriteCtrl",["$scope","FavoriteModel","TokenSvc","lodash",function(e,t,a,n){var o=a.decode(),r={ApartmentIdArray:o.favorites,UserId:o.id};e.favoritesExist=!1,0!==o.favorites.length&&t.findByUser().save(r,function(t){0!==t.lenght&&(e.favorites=t,e.favoritesExist=!0)}),e.removeFromFavorite=function(a){var n=new t(o.id,e.favorites[a].ApartmentId);t.api()["delete"](n,function(t,n){e.favorites.splice(a),alert("DONE!")})}}]),angular.module("AccountApp").controller("DashboardLLUnitListCtrl",["$scope","$state","TokenSvc","ModalSvc","lodash","AssignmentModel","WizioConfig","ApplicationModel","FlexGetSetSvc",function(e,t,a,n,o,r,i,l,s){var c=function(e,t,a,n){return{backdrop:!0,keyboard:!0,modalFade:!0,size:e,templateUrl:t,controller:a,resolve:{modalData:function(){return n}}}},d=a.decode().id,u=[];r.api().twoParam.query({param1:"user",param2:d},function(t){e.assignments=t;for(var a=0;a<e.assignments.length;a++){0!==e.assignments[a].Apartment.Applications.length&&(u=o.pluck(e.assignments[a].Apartment.Applications,"ApplicationId"));var n=o.groupBy(e.assignments[a].Apartment.Applications,"ApplicationId");e.assignments[a].Apartment.Applications=n,e.assignments[a].Apartment.Applications.numberOf=Object.keys(n).length}e.noTenants=!0}),e.add_tenants=function(t){var a=c("md",i.AccountDashboardViewsURL+"AddTenantsToLeaseForm.html","AddTenantsToLeaseCtrl",e.assignments[t]);n.showModal(a,{}).then(function(e){})},e.editApartments=function(a){s.set(e.assignments[a].Apartment,"ApartmentToEdit","ApartmentToEdit"),t.go("")},e.claimApartments=function(){t.go("Unit.Claim")},e.emailNow=function(e){n.showModal(addTenantsModalDefaults,{}).then(function(e){})},e.createListing=function(a){var n=e.assignments[a].id;s.set(n,"NewLeaseApartmentId","NewLeaseApartmentId"),t.go("Account.Lease.Create")},e.editListing=function(a){s.set(e.assignments[a].Apartment,"EditCurrentListing","EditCurrentListing"),t.go("Account.Lease.Edit")},e.viewApplicants=function(e){l.api.oneParam.save({param1:"ApplicationIdsWithProfiles"},u,function(e){var a=c("lg",i.ApplicationFormViewsURL+"ApplicationOverviewModal.html","ApplicationOverviewCtrl",e);n.showModal(a,{}).then(function(e){switch(e){case"VIEW-DETAILS":t.go("Account.Dashboard.Application")}})})}}]),angular.module("AccountApp").controller("DashboardMainCtrl",["$scope","TokenSvc","ModalSvc","WizioConfig",function(e,t,a,n){var o=t.decode().userType;console.dir(o),1==o?(e.applicationSelected=!0,e.favoritesSelected=!1,e.toggleapplication=function(){e.applicationSelected||(e.applicationSelected=!e.applicationSelected,e.favoritesSelected=!e.favoritesSelected)},e.toggleFavorites=function(){e.favoritesSelected||(e.applicationSelected=!e.applicationSelected,e.favoritesSelected=!e.favoritesSelected)},e.gridViewSelected=!0,e.listViewSelected=!1,e.toggleGridView=function(){e.gridViewSelected||(e.gridViewSelected=!e.gridViewSelected,e.listViewSelected=!e.listViewSelected)},e.toggleListView=function(){e.listViewSelected||(e.gridViewSelected=!e.gridViewSelected,e.listViewSelected=!e.listViewSelected)}):2==o&&(e.myApplicationsSelected=!1,e.myApartmentsSelected=!0,e.toggleMyApartments=function(){console.dir("HELLO"),e.myApartmentsSelected||(e.myApartmentsSelected=!e.myApartmentsSelected,e.myApplicationsSelected=!e.myApplicationsSelected)},e.toggleMyApplications=function(){e.myApplicationsSelected||(e.myApplicationsSelected=!e.myApplicationsSelected,e.myApartmentsSelected=!e.myApartmentsSelected)})}]),angular.module("AccountApp").controller("DashboardUserInfoCtrl",["$scope","TokenSvc",function(e,t){e.accountInfo=t.decode()}]),angular.module("AccountApp").factory("AssignmentResource",["$resource","WizioConfig",function(e,t){return e(t.baseAPIURL+"assignment")}]).factory("FavoriteResource",["$resource","WizioConfig",function(e,t){return e(t.baseAPIURL+"user/favorite")}]),angular.module("AccountApp").controller("ExtProfileFormCtrl",["$scope","$state","ProfileModel","FlexGetSetSvc","TokenSvc",function(e,t,a,n,o){e.profile={};var r=n.get(null,"ExtendedProfile");console.dir(r),console.dir(typeof r),"undefined"!=typeof r&&r&&(console.dir("HI"),e.editing=!0,e.profile=r),e.selectOptions={employmentStatus:["Full Time Employed","Part Time Employed","Not Employed"],studentStatus:["Full Time Student","Part Time Student","Not A Student"],yesno:["Yes","No"],studentTypes:["Undergraduate","Graduate"],maritalStatus:["Married","Not Married"]},e.yesNoContainer={},e.submitProfile=function(){var n=o.decode().id;if(e.profile.UserId=n,"Account.Profile.Edit"===t.current.name)console.dir(e.profile),a.api.oneParam.save({id:e.profile.id},e.profile,function(e){});else if("Account.Profile.Create"===t.current.name){var r=a.build(e.profile);a.api.oneParam.save(null,r,function(e){alert("DONE")})}}}]),angular.module("AccountApp").controller("ExtProfileMainCtrl",["$rootScope","$scope",function(e,t){}]),angular.module("ApplicationApp").controller("ApplicationCreateModalCtrl",["$scope","$modalInstance","FlexGetSetSvc","TokenSvc","ApplicationResource",function(e,t,a,n,o){e.apartment=a.get("ApartmentApplyingTo"),e.apartmentSlotsModal=[];var r={apartmentInfo:null,users:null,owner:null};e.applicationArray=[],e.trial=[];for(var i=1;i<=e.apartment.beds-1;i++){var l={id:i};e.apartmentSlotsModal.push(l)}e.applicationSignup=function(){var a={apartmentId:e.apartment.id,apartmentMaxResidency:e.apartment.maxResidency};r.apartmentInfo=a,r.users=e.applicationArray,r.owner=n.decode().id,r.ownerEmail=n.decode().email,o.base.save(r,function(e,a){t.close("ok")})},e.cancel=function(){t.dismiss("cancel")}}]),angular.module("ApplicationApp").controller("ApplicationDetailCtrl",["$scope","FlexGetSetSvc",function(e,t){e.applicationDetails=t.get("ApplicationDetails","ApplicationDetails")}]),angular.module("ApplicationApp").controller("ApplicationFormCtrl",["$scope",function(e){alert("test")}]),angular.module("ApplicationApp").controller("ApplicationOverviewCtrl",["$scope","$state","$modalInstance","modalData","lodash","FlexGetSetSvc",function(e,t,a,n,o,r){e.modalData=n,e.applications=o.groupBy(n,"ApplicationId"),console.dir(e.applications),e.applicationArray=[],console.dir(e.applications);for(var i in e.applications)e.applications.hasOwnProperty(i)&&e.applicationArray.push([e.applications[i]]);e.applicationArray=o.flatten(e.applicationArray),console.dir(e.applicationArray),e.viewDetails=function(t){r.set(e.applicationArray[t],"ApplicationDetails","ApplicationDetails"),a.close("VIEW-DETAILS")}}]),angular.module("ApplicationApp").controller("NewOwnerSelectModalCtrl",["$scope","$modalInstance","TokenSvc","modalData","ApplicantModel","ApplicationResource",function(e,t,a,n,o,r){e.applications=n,e.selectNewOwner=function(i){var l=o.build(e.applications[i]);n.removeCurrentUser&&(l.removeCurrentUser=!0),console.dir(l),l.setOwner(function(n){if(l.removeCurrentUser){var o={UserId:a.decode().id,ApartmentId:l.ApartmentId,ApplicationId:l.ApplicationId,concatAddr:e.applications[i].Apartment.concatAddr};r.flex.save({item:"user",action:"remove"},o,function(e,a){console.dir(e),alert("Removed from application"),t.close()})}else t.close()})},e.cancel=function(){t.dismiss()}}]),angular.module("CampaignApp").controller("VideoUploadMainCtrl",["$scope",function(e){e.$on("ViewTemplatesSelector",function(t,a){e.viewtemplates=a})}]),angular.module("CampaignApp").controller("VideoUploadModalCtrl",["$scope","$modalInstance","SmartSearchSvc","UnitResource","UnitCreateSvc","TokenSvc","DescriptionModel","ApartmentModel","AssignmentResource",function(e,t,a,n,o,r,i,l,s){e.getLocation=function(e){return a.smartSearch(e)},e.sizeLimit=5368709120,e.uploadProgress=0,e.creds={},e.landlord={},e.apartment={},e.upload=function(){var a=r.decode(),c=l.build(e.apartment);c.description=new i(a.id,null,e.apartment.description.DescriptionText),o.parseGeocodeData(e.apartmentAddress,c,function(o,r){n.save(r,function(n,o){var r=n;AWS.config.update({accessKeyId:"AKIAIPGWV5OFR73P3VLQ",secretAccessKey:"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"}),AWS.config.region="us-east-1";var i=new AWS.S3({params:{Bucket:"wiziouservideos"},httpOptions:{timeout:1e12}});if(e.file){var l=Math.round(parseInt(e.file.size));if(l>e.sizeLimit)return toastr.error("Sorry, your attachment is too big. <br/> Maximum "+e.fileSizeLabel()+" file attachment allowed","File Too Large"),!1;var c=e.apartmentAddress;c=c.replace(/[^0-9a-zA-Z]/g,"");var d=a.email+"-"+c+"unitNum:"+c.unitNum+"___"+Math.floor(80*Math.random()+10),u={Key:d,ContentType:e.file.type,Body:e.file,ServerSideEncryption:"AES256"};i.putObject(u,function(e,n){if(e)return toastr.error(e.message,e.code),t.dismiss(),!1;toastr.success("File Uploaded Successfully","Done");var o={UserId:a.id,ApartmentId:r.id,S3VideoId:d};s.save(o,function(e,t){}),t.close("ok")}).on("httpUploadProgress",function(t){e.uploadProgress=Math.round(t.loaded/t.total*100),console.dir(Math.round(t.loaded/t.total*100)),e.$digest()})}else toastr.error("Please select a file to upload")})})},e.fileSizeLabel=function(){return Math.round(e.sizeLimit/1073741824)+"GB"},e.uniqueString=function(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=0;8>a;a++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}}]),angular.module("CampaignApp").controller("VideoUploadSplashCtrl",["$scope","$state","$modal","WizioConfig","AuthFct","ModalSvc",function(e,t,a,n,o,r){var i={topHorizontal1:!0,topHorizontal2:!0,mainContent1:!1,mainContent2:!0,bottomHorizontal:!0};e.$emit("ViewTemplatesSelector",i);var l=function(e,t,a,n){return{backdrop:!0,keyboard:!0,modalFade:!0,size:e,templateUrl:t,controller:a,resolve:{data:function(){return n}}}},s=function(){var e=n.CampaignVideoUploadViewsURL,t=l("lg",e+"VideoUploadModal.html","VideoUploadModalCtrl");r.showModal(t,{}).then(function(e){switch(e){case"ok":alert("success");break;default:return}})},c=function(e){var t=n.AccountAuthViewsURL,a=l("md",t+"AuthCreateAcctForm.html","AuthCreateAcctModalCtrl");r.showModal(a,{}).then(function(t){e("ok"===t?"ok":"login")})},d=function(e){var t=n.AccountAuthViewsURL,a=l("md",t+"Login.html","AuthLoginModalCtrl");r.showModal(a,{}).then(function(t){e(t)})};e.uploadVideo=function(){o.isLoggedin()?s():c(function(e){switch(e){case"ok":s();break;case"login":d(function(e){switch(e){case"ok":s();break;default:return}})}})}}]),angular.module("CampaignApp").service("AWSS3UploadSvc",[function(){}]),angular.module("SharedServiceApp").service("ApartmentClaimGetSetSvc",["$sessionStorage",function(e){var t=[],a=function(a,n){return"undefined"!=typeof e[n]&&e[n]&&n?(e[n].push(a),void t.push(a)):(e[n]=[],e[n].push(a),void t.push(a))},n=function(a){return a?e[a]:0===t.length?[]:t[0]},o=function(a){return a?(delete e[a],void(t=[])):void(t=[])};return{set:a,get:n,reset:o}}]),angular.module("SharedServiceApp").service("ApartmentGetSetSvc",["$sessionStorage","$stateParams","$q","UnitResource","lodash","SearchFct",function(e,t,a,n,o,r){var i=null,l=function(e){return a(function(t,a){n.get({id:e},function(e){response=r.formatSearchResults([e]),console.dir(response),t(response)})})},s=function(t,a){console.dir(t),a&&(e[a]=t),i=t},c=function(a){return a?i=e[a]:null!==i&&i.id===t.id?i:void l(apartmentURLID).then(function(e){callback(e)})},d=function(){i=null},u=function(a){var n=t.id,o=e.apartmentSelected;if(console.dir(o),o){if(n===o.apartmentData.id)return console.dir(o),a(o);l(n).then(function(e){console.dir(e),a(e)})}else l(n).then(function(e){console.dir(e),a(e)})};return{set:s,get:c,reset:d,checkApartment:u}}]),angular.module("SharedServiceApp").service("FlexGetSetSvc",["$sessionStorage","$sessionStorage",function(e,t){var a=[],n={},o=function(t,o,r){return o?(e[o]=t,void a.push(t)):(r&&(n[r]=t),console.dir(t),void a.push(t))},r=function(t,o){return t&&"undefined"!=typeof e[t]&&e[t]?e[t]:o?n[o]:0===a.length?[]:a[0]},i=function(t){return t?(delete e[t],void(a=[])):void(a=[])};return{set:o,get:r,reset:i}}]),angular.module("SharedServiceApp").service("RerouteGetSetSvc",["$sessionStorage",function(e){var t=[],a=function(a,n){return n?(e[n]=a,t=[],void t.push(a)):(t=[],void t.push(a))},n=function(a){if(a)return e[a];if(0===t.length)return[];var n=t[0];return t=[],n},o=function(a){return a?(delete e[a],void(t=[])):void(t=[])};return{set:a,get:n,reset:o}}]);
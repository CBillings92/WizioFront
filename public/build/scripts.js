angular.module("AboutUsApp",[]),angular.module("AdminPanelApp",[]),angular.module("AccountApp",[]),angular.module("AmazonS3UploadApp",[]),angular.module("ApplicationApp",[]),angular.module("AuthApp",[]),angular.module("BlogApp",[]),angular.module("CampaignApp",[]),angular.module("LandingPageApp",[]),angular.module("NavbarApp",[]),angular.module("SellerApp",[]),angular.module("SharedControllersApp",[]),angular.module("SharedFactoryApp",[]),angular.module("SharedServiceApp",[]),angular.module("UnitApp",[]),angular.module("FooterApp",[]),angular.module("Models",[]),angular.module("MainApp",["AdminPanelApp","AccountApp","AmazonS3UploadApp","ApplicationApp","AuthApp","AboutUsApp","BlogApp","LandingPageApp","CampaignApp","NavbarApp","SellerApp","SharedControllersApp","SharedFactoryApp","SharedServiceApp","UnitApp","FooterApp","Models","ui.router","ngFacebook","ngStorage","ngResource","ngLodash","ui.bootstrap","angular-jwt"]).config(["$facebookProvider","$sceDelegateProvider",function(e,t){e.setAppId("439701646205204"),t.resourceUrlWhitelist(["self","https://youtu.be/**","https://www.youtube.com/watch?v=**","https://www.youtube.com/watch?v=*&feature=youtu.be","http://www.youtube.com/embed/**"])}]).run(["$rootScope","$state","$localStorage","$window","$facebook","jwtHelper","AuthFct","TokenSvc",function(e,t,n,o,a,r,i,l){function s(){a.getLoginStatus().then(function(t){switch(t.status){case"not authorized":e.isLoggedIn=!1,e.authObjects.facebookConnected=!1;break;case"connected":e.authObjects.facebookConnected=!0,a.api("/me").then(function(n){var o={user:n,fbLoginStatus:t,facebook:!0};i.signin(o,function(t,n){return 403===n?void(e.isLoggedIn=!1):void(e.isLoggedIn=!0)})});break;default:e.isLoggedIn=!1,e.authObjects.facebookConnected=!1}})}!function(e,t,n){var o,a=e.getElementsByTagName(t)[0];e.getElementById(n)||(o=e.createElement(t),o.id=n,o.src="//connect.facebook.net/en_US/sdk.js",a.parentNode.insertBefore(o,a))}(document,"script","facebook-jssdk"),e.authObjects={facebookConnected:!1};var c=l.getToken(),u=null;c&&(u=l.checkExp()),"No Token"===c?s():u?(l.deleteToken(),s()):(e.userType=l.decode().userType,e.isLoggedIn=!0)}]),angular.module("MainApp").constant("WizioConfig",{baseAPIURL:"http://172.16.0.3:4000/api/",frontEndURL:"http://172.16.0.2:3000/",modulesURL:"public/app/modules",AdminPanelAppMainViewsURL:"public/app/modules/adminpanelapp/main/",AdminPanelAppViewsURL:"public/app/modules/adminpanelapp/viewtemplates/",AuthViewsURL:"public/app/modules/authapp/viewtemplates/",ApplicationViewsURL:"public/app/modules/applicationapp/main/",ApplicationFormViewsURL:"public/app/modules/applicationapp/applicationformapp/viewtemplates",ApplicationWaitlistViewsURL:"public/app/modules/applicationapp/waitlistapp/viewtemplates/",BlogViewsURL:"public/app/modules/blogApp/viewtemplates/",BuyerViewsURL:"public/app/modules/accountapp/viewtemplates/",BuyerDashboardViewsURL:"public/app/modules/accountapp/dashboard/viewtemplates/",CampaignMainViewsURL:"public/app/modules/campaignapp/main/",CampaignVideoUploadViewsURL:"public/app/modules/campaignapp/videouploadapp/viewtemplates/",landingPageAppViewsURL:"public/app/modules/landingpageapp/viewtemplates/",NavbarViewsURL:"public/app/modules/navbarapp/viewtemplates/",FooterViewsURL:"public/app/modules/footerapp/viewtemplates/",AccountViewsURL:"public/app/modules/accountapp/main/",AccountDashboardViewsURL:"public/app/modules/accountapp/dashboardapp/viewtemplates/",AccountAuthViewsURL:"public/app/modules/accountapp/authapp/viewtemplates/",UnitMainViewsURL:"public/app/modules/unitapp/main/",UnitViewsURL:"public/app/modules/unitapp/viewtemplates/"}),angular.module("MainApp").config(["$stateProvider","$urlRouterProvider","$locationProvider","$httpProvider","WizioConfig",function(e,t,n,o,a){var r={templateUrl:a.NavbarViewsURL+"navbar.html",controller:"NavbarCtrl"},i={templateUrl:a.FooterViewsURL+"footer.html",controller:"FooterCtrl"},l={requireLogin:!0},s={requireLogin:!0,userType:2},c={requireLogin:!1};e.state("LandingPage",{url:"/",views:{navbar:r,footer:i,maincontent:{templateUrl:a.landingPageAppViewsURL+"landingpage.html",controller:"LandingPageCtrl"}},data:c}).state("Blog",{"abstract":!0,views:{navbar:r,footer:i,maincontent:{templateUrl:"public/app/modules/blogapp/viewtemplates/blogMain.html",controller:"BlogMainCtrl"}},data:c}).state("Blog.List",{url:"/blog",footer:i,views:{BlogMain:{templateUrl:"public/app/modules/blogapp/viewtemplates/blogDetail.html",controller:"BlogListCtrl"}}}).state("Blog.Detail",{url:"/blog/:articleUrl",views:{}}).state("About",{url:"/about",views:{navbar:r,footer:i,maincontent:{templateUrl:"public/app/modules/aboutusapp/viewtemplates/aboutus.html",controller:"AboutListCtrl"}},data:c}).state("AdminPanel",{"abstract":!0,views:{navbar:r,footer:i,maincontent:{templateUrl:a.AdminPanelAppMainViewsURL+"AdminPanelMain.html",controller:"AdminPanelMainCtrl"}},data:{requireLogin:!0,userType:0}}).state("AdminPanel.Main",{url:"/wizioadminpanel",views:{AdminTop:{templateUrl:a.AdminPanelAppViewsURL+"AdminSearchUnit.html",controller:"AdminSearchUnitCtrl"},AdminLeft:{templateUrl:a.AdminPanelAppViewsURL+"AdminUpdateUnit.html",controller:"AdminUpdateUnitCtrl"},AdminRight:{templateUrl:a.AdminPanelAppViewsURL+"AdminUpdateAssignment.html",controller:"AdminUpdateAssignmentCtrl"},AdminBottom:{templateUrl:a.AdminPanelAppViewsURL+"admincreateunit.html",controller:"AdminCreateUnitCtrl"},AdminSecondBottom:{templateUrl:a.AdminPanelAppViewsURL+"admincreateassignment.html",controller:"AdminCreateAssignmentCtrl"}}}).state("Styleguide",{url:"/about/styleguide",views:{navbar:r,footer:i,maincontent:{templateUrl:"public/viewtemplates/public/styleguide.html"}},data:c}).state("SendResetEmail",{url:"/sendresetpassemail",views:{navbar:r,footer:i,maincontent:{templateUrl:a.AccountAuthViewsURL+"sendResetEmail.html",controller:"AuthLoginCtrl"}},data:c}).state("UpdatePassword",{url:"/resetpassword/:token",views:{navbar:r,footer:i,maincontent:{templateUrl:a.AccountAuthViewsURL+"resetPassword.html",controller:"AuthLoginCtrl"}},data:c}).state("Account",{url:"/account","abstract":!0,views:{navbar:r,footer:i,maincontent:{templateUrl:a.AccountViewsURL+"AccountMain.html",controller:"AccountMainCtrl"}},data:l}).state("Account.Dashboard",{"abstract":!0,views:{AccountMain:{templateUrl:a.AccountDashboardViewsURL+"DashboardMain.html",controller:"DashboardMainCtrl"}}}).state("Account.Create",{url:"/create",views:{AccountMain:{templateUrl:a.AccountAuthViewsURL+"/AuthCreateAcctForm.html",controller:"AuthCreateAcctCtrl"}},data:c}).state("Account.Dashboard.Main",{url:"/dashboard",views:{topHorizontal:{templateUrl:a.AccountDashboardViewsURL+"DashboardUserInfo.html",controller:"DashboardUserInfoCtrl"},midHorizontal:{templateUrl:a.AccountDashboardViewsURL+"DashboardLLUnitList.html",controllerProvider:function(e){return 2===e.userType?"DashboardLLUnitListCtrl":void 0}},leftSplit:{templateUrl:a.AccountDashboardViewsURL+"DashboardWaitlist.html",controllerProvider:function(e){return 1===e.userType||0===e.userType?"DashboardWaitlistCtrl":void 0}}},data:l}).state("sellerDashboard",{url:"/brokerInfo",views:{navbar:r,footer:i,maincontent:{templateUrl:"public/viewtemplates/public/brokerAddInfo.html",controller:"brokerAddInfoCtrl"}},data:l}).state("Profile",{url:"/profile","abstract":!0,views:{navbar:r,footer:i,maincontent:{templateUrl:"public/app/modules/AccountApp/profileapp/viewtemplates/profilemain.html"}},data:l}).state("Profile.Create",{url:"/",views:{profilepage:{templateUrl:"public/app/modules/AccountApp/profileapp/viewtemplates/profileform.html",controller:"ProfileFormCtrl"}}}).state("Profile.Edit",{url:"/edit",views:{profilepage:{templateUrl:"public/app/modules/AccountApp/profileapp/viewtemplates/profileform.html",controller:"ProfileFormCtrl"}}}).state("Application",{url:"/application",views:{navbar:r,footer:i,maincontent:{templateUrl:a.ApplicationViewsURL+"applicationmain.html"}},"abstract":!0,data:l}).state("Application.New",{url:"/new",views:{ApplicationPage:{templateUrl:a.ApplicationFormViewsURL+"applicationform.html",controller:"ApplicationFormCtrl"}}}).state("Application.Edit",{url:"/edit",views:{ApplicationPage:{templateUrl:a.ApplicationFormViewsURL+"applicationform.html",controller:"ApplicationFormCtrl"}}}).state("Unit",{url:"/unit",views:{navbar:r,footer:i,maincontent:{templateUrl:a.UnitMainViewsURL+"UnitMain.html",controller:"UnitMainCtrl"}},"abstract":!0}).state("Unit.Create",{url:"/create",views:{UnitMain:{templateUrl:a.UnitViewsURL+"UnitCreate.html",controller:"UnitCreateCtrl"}},data:l}).state("Unit.Details",{url:"/details/:id",views:{UnitMain:{templateUrl:a.UnitViewsURL+"unitDetailsPage.html",controller:"UnitDetailCtrl"}},data:c}).state("Unit.Display",{url:"/display",views:{UnitMain:{templateUrl:a.UnitViewsURL+"unitDisplay.html",controller:"UnitDisplayCtrl"}},data:c}).state("Unit.Claim",{url:"/claim",views:{UnitMain:{templateUrl:a.UnitViewsURL+"unitClaimForm.html",controller:"UnitClaimFormCtrl"}},data:s}).state("Campaign",{url:"/campaign","abstract":!0,views:{navbar:r,footer:i,maincontent:{templateUrl:a.CampaignMainViewsURL+"CampaignMain.html",controller:"CampaignMainCtrl"}}}).state("Campaign.VideoUpload",{"abstract":!0,views:{CampaignMain:{templateUrl:a.CampaignVideoUploadViewsURL+"/VideoUploadMain.html",controller:"VideoUploadMainCtrl"}},data:c}).state("Campaign.VideoUpload.Main",{url:"/apartmentupload",views:{MainContent1:{templateUrl:a.CampaignVideoUploadViewsURL+"/VideoUploadSplash.html",controller:"VideoUploadSplashCtrl"}},data:c}).state("Campaign.VideoUpload.Form",{url:"/form",views:{VideoUploadMain:{templateUrl:a.CampaignVideoUploadViewsURL+"/VideoUploadForm.html",controller:"VideoUploadFormCtrl"}}}),t.otherwise("/"),o.interceptors.push(["$q","$location","$localStorage","$injector","TokenSvc",function(e,t,n,o,a){return{request:function(e){return e.headers=e.headers||{},e.headers.searchCheck?(delete e.headers.searchCheck,e):(a.getToken()&&(e.headers.Authorization=a.getToken()),e)},response:function(e){return"undefined"!=typeof e.data.token&&null!==e.data.token&&e.data.token?(a.storeToken(e.data.token),e):e},responseError:function(t){return 401!==t.status&&403!==t.status||(a.deleteToken(),!t.data.facebook)?e.reject(t):e.reject(t)}}}])}]),angular.module("Models").factory("ApartmentModel",["$sessionStorage","$resource","lodash","WizioConfig",function(e,t,n,o){function a(e,t,n,o,a,r,i,l,s,c,u,p,d,m,f,g,h,A,v,S,U,b,w){this.street=e,this.unitNum=t,this.neighborhood=n,this.locality=o,this.administrative_area_level_3=a,this.state=r,this.zip=i,this.beds=l,this.baths=s,this.livingSpaces=c,this.maxResidency=u,this.costPerMonth=p,this.renovated=d,this.pets=m,this.ApartmentType=f,this.latitude=g,this.longitude=h,this.concatAddr=A,this.leaseType=v,this.leaseExpectedEnd=S,this.leaseActualEnd=U,this.LandlordId=b,this.route=w}return a.prototype.api=function(){return t(o.baseAPIURL+"apartment/:id",{id:"@id"})},a.api=function(){return $resouce(o.baseAPIURL+"apartment/:id",{id:"@id"})},a.search=function(e,t,n,o){},a.build=function(e){return new a(e.street,e.unitNum,e.neighborhood,e.locality,e.administrative_area_level_3,e.state,e.zip,e.beds,e.baths,e.livingSpaces,e.maxResidency,e.costPerMonth,e.renovated,e.pets,e.ApartmentType,e.latitude,e.longitude,e.concatAddr,e.leaseType,e.leaseExpectedEnd,e.leaseActualEnd,e.LandlordId,e.route)},a}]),angular.module("Models").factory("DescriptionModel",["$sessionStorage","$resource","lodash","WizioConfig",function(e,t,n,o){function a(e,t,n){this.UserId=e,this.ApartmentId=t,this.description=n,this.upvotes=0,this.downvotes=0}return a.prototype.api=function(){return t(o.baseAPIURL+"description")},a.build=function(e){return new a(e.UserId,e.ApartmentId,e.DescriptionText)},a}]),angular.module("AdminPanelApp").factory("AdminPanelResource",["$resource","WizioConfig",function(e,t){return e(t.baseAPIURL+"admin/:item/:action",{item:"@item",action:"@action"})}]),angular.module("AmazonS3UploadApp").controller("AmazonS3UploadCtrl",["$scope","$http","$state",function(e,t,n){e.sizeLimit=5368709120,e.uploadProgress=0,e.creds={},e.upload=function(){AWS.config.update({accessKeyId:"AKIAIPGWV5OFR73P3VLQ",secretAccessKey:"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"}),AWS.config.region="us-east-1";var t=new AWS.S3({params:{Bucket:"wiziouservideos"}});if(e.file){var n=Math.round(parseInt(e.file.size));if(n>e.sizeLimit)return toastr.error("Sorry, your attachment is too big. <br/> Maximum "+e.fileSizeLabel()+" file attachment allowed","File Too Large"),!1;var o=e.uniqueString()+"-"+e.file.name,a={Key:o,ContentType:e.file.type,Body:e.file,ServerSideEncryption:"AES256"};t.putObject(a,function(t,n){return t?(toastr.error(t.message,t.code),!1):(toastr.success("File Uploaded Successfully","Done"),void setTimeout(function(){e.uploadProgress=0,e.$digest()},1e4))}).on("httpUploadProgress",function(t){e.uploadProgress=Math.round(t.loaded/t.total*100),e.$digest()})}else toastr.error("Please select a file to upload")},e.fileSizeLabel=function(){return Math.round(e.sizeLimit/1073741824)+"GB"},e.uniqueString=function(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;8>n;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}}]),angular.module("AmazonS3UploadApp").directive("file",function(){return{restrict:"AE",scope:{file:"@"},link:function(e,t,n){t.bind("change",function(t){var n=t.target.files,o=n[0];e.file=o,e.$parent.file=o,e.$apply()})}}}),angular.module("UnitApp").factory("UnitResource",["$resource","WizioConfig",function(e,t){return e(t.baseAPIURL+"apartment/:id",{id:"@id"})}]),angular.module("UnitApp").service("UnitObjectSvc",[function(){var e=function(e,t,n,o,a,r,i,l,s,c){this.address=e,this.unitNum=t,this.beds=n,this.baths=o,this.livingSpaces=a,this.maxResidency=r,this.costPerMonth=i,this.renovated=l,this.pets=s,this.youtubeVRID=c};e.prototype.saveToDB=function(){}}]).service("UnitCreateSvc",["lodash","FlexGetSetSvc",function(e,t){function n(t,n){var o=e.filter(n.data.results,function(e){return e.formatted_address===t});switch(0===o.length&&(o=e.filter(n.data.results,function(e){return e["formatted address"]===t})),o.length){case 0:return!1;default:return o}}function o(e){return"undefined"!=typeof e[0].long_name?e[0].long_name:"undefined"!=typeof e[0].short_name?e[0].short_name:"na"}function a(t,n){function a(t){return e.filter(s,function(e){return e.types[0]===t})}function r(e,t){e&&e.length>0&&(i[t]=o(e))}var i={};if(i.topLevelType=t[0].types[0],n)for(var l in n)i[l]=n[l];var s=t[0].address_components;i.formattedAddress=t[0].formatted_address;var c=a("street_number"),u=a("route"),p=a("locality"),d=a("administrative_area_level_3"),m=(a("state"),a("neighborhood")),f=a("zip");c&&c.length>0&&u.length>0&&(i.street=o(c)+" "+o(u)),r(u,"route"),r(m,"neighborhood"),r(p,"locality"),r(d,"administrative_area_level_3"),r(f,"zip");var g=null,h=null,A=null;return t[0].geometry.hasOwnProperty("location")?g=e.values(t[0].geometry.location):t[0].geometry.hasOwnProperty("viewport")&&(t[0].geometry.viewport.hasOwnProperty("northeast")?g=e.values(t[0].geometry.viewport.northeast):t[0].geometry.viewport.hasOwnProperty("northwest")?g=e.values(t[0].geometry.viewport.northwest):t[0].geometry.viewport.hasOwnProperty("southeast")?g=e.values(t[0].geometry.viewport.southeast):t[0].geometry.viewport.hasOwnProperty("southwest")&&(g=e.values(t[0].geometry.viewport.southwest))),("string"==typeof g[0]||"number"==typeof g[0])&&(h=parseFloat(g[0].toFixed(6)),i.latitude=h),("string"==typeof g[1]||"number"==typeof g[1])&&(A=parseFloat(g[1].toFixed(6)),i.longitude=A),i}var r=function(e,t){var n=new google.maps.Geocoder;n.geocode({address:e},function(e,n){return n==google.maps.GeocoderStatus.OK?t(null,e):t({message:"No Google API Address found"},null)})},i=function(n,o){var a=null,r=(t.get(),e.values(googleAPIDataRaw.data.results.types));return 1===r.length?(a=r[0],o(a)):o(a)},l=function(e,o,i){var l=t.get(),s=!1;if(0!==l.length&&(s=n(e,l)),s!==!1){var c=a(s,o);return i(null,c)}r(e,function(e,t){if(e)return i("no address info found",null);var n=a(t,o);return i(null,n)})};return{getGeocodeData:r,addressSearchType:i,parseGeocodeData:l}}]),angular.module("AboutUsApp").controller("AboutListCtrl",["$scope",function(e){e.members=[{name:"Chris Canal",title:"CEO",picture:"radish.png",twitter:"chriscanal4",linkedin:"chriscanal"},{name:"Cameron Billings",title:"CTO",picture:"radish.png",twitter:"CamBillings_",linkedin:"cameronbillings"},{name:"Devon Billings",title:"COO/CMO",picture:"radish.png",twitter:"dsgrod",linkedin:"dsgrod"},{name:"Trent Duffy",title:"CMS-Cheif of Misc Stuff",picture:"radish.png",twitter:"trentolol",linkedin:"trentduffy"}]}]),angular.module("AboutUsApp").controller("AboutUsCtrl",["$scope",function(e){}]),angular.module("AccountApp").controller("AccountMainCtrl",["$scope",function(e){}]),angular.module("AdminPanelApp").controller("AdminCreateAssignmentCtrl",["$scope","SmartSearchSvc","UnitResource","UnitCreateSvc","TokenSvc","AssignmentResource",function(e,t,n,o,a,r){e.getLocation=function(e){return t.smartSearch(e)},e.toggleMin=function(){e.minDate=e.minDate?null:new Date},e.toggleMin(),e.maxDate=new Date(2020,5,22),e.open=function(t){e.status.opened=!0},e.setDate=function(t,n,o){e.dt=new Date(t,n,o)},e.dateOptions={formatYear:"yy",startingDay:1},e.status={opened:!1},e.sizeLimit=5368709120,e.uploadProgress=0,e.creds={},e.landlord={},e.apartment={},e.upload=function(){o.parseGeocodeData(e.apartmentAddress,e.apartment,function(t,o){o.landlordInfo=e.landlord,n.save(o,function(t,n){var o=t;AWS.config.update({accessKeyId:"AKIAIPGWV5OFR73P3VLQ",secretAccessKey:"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"}),AWS.config.region="us-east-1";var i=new AWS.S3({params:{Bucket:"wiziouservideos"}});if(e.file){var l=Math.round(parseInt(e.file.size));if(l>e.sizeLimit)return toastr.error("Sorry, your attachment is too big. <br/> Maximum "+e.fileSizeLabel()+" file attachment allowed","File Too Large"),!1;var s=a.decode(),c=e.apartmentAddress;c=c.replace(/[^0-9a-zA-Z]/g,"");var u=s.email+"-"+c+Math.floor(80*Math.random()+10),p={Key:u,ContentType:e.file.type,Body:e.file,ServerSideEncryption:"AES256"};i.putObject(p,function(t,n){if(t)return toastr.error(t.message,t.code),$modalInstance.dismiss(),!1;toastr.success("File Uploaded Successfully","Done");var a={UserId:s.id,ApartmentId:o.id,S3VideoId:u,youtubeId:e.assignment.youtubeId};r.save(a,function(e,t){}),setTimeout(function(){e.uploadProgress=0,e.$digest()},1e4),$modalInstance.close("ok")}).on("httpUploadProgress",function(t){e.uploadProgress=Math.round(t.loaded/t.total*100),e.$digest()})}else toastr.error("Please select a file to upload")})})},e.fileSizeLabel=function(){return Math.round(e.sizeLimit/1073741824)+"GB"},e.uniqueString=function(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;8>n;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}}]),angular.module("AdminPanelApp").controller("AdminCreateUnitCtrl",["$scope","$sessionStorage","$rootScope","$state","lodash","UnitResource","SmartSearchSvc","UnitCreateSvc","FlexGetSetSvc",function(e,t,n,o,a,r,i,l,s){e.$storage=t,e.numBeds=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],e.getLocation=function(e){return i.smartSearch(e)},e.addUnit=function(){var t=e.apartmentAddress,n={unitNum:e.unitNum,beds:e.beds,baths:e.baths,livingSpaces:e.livingRooms,maxResidency:e.maxResidency,costPerMonth:e.costPerMonth,renovated:e.renovated,pets:e.petPolicy,youtubeVRID:e.youtubeVRID};l.parseGeocodeData(t,n,function(e,t){r.save(t,function(e,t){o.go("Account.Dashboard.Main")})})}}]),angular.module("AdminPanelApp").controller("AdminSearchUnitCtrl",["$scope","ApartmentSearchSvc","SmartSearchSvc",function(e,t,n){e.filters={beds:null,baths:null,minPrice:null,maxPrice:null},e.search=function(){t.searchApartment(e.searchString,e.unitNum,e.filters,function(t,n){e.$emit("passToSiblingAdminApp",{name:"updateUnitData",data:n})})},e.getLocation=function(e){return n.smartSearch(e)}}]),angular.module("AdminPanelApp").controller("AdminUpdateAssignmentCtrl",["$scope","AdminPanelResource",function(e,t){e.data={},e.submitEdits=function(){t.save({item:"assignment",action:"update"},e.data,function(e,t){})}}]),angular.module("AdminPanelApp").controller("AdminUpdateUnitCtrl",["$scope","lodash","AdminPanelResource",function(e,t,n){e.apartment=null,e.numBeds=[0,1,2,3,4,5,6],e.numBaths=[0,1,2,3,4],e.numLivingrooms=[0,1,2,3],e.maxResidency=[0,1,2,3,4,5,6,7,8,9,10],e.renovatedSelect=["No","Yes","Unsure"],e.petPolicy=["Dogs Only","Cats Only","Dogs & Cats","Small Animals","None"],e.$on("updateUnitData",function(t,n){e.apartment=n[0]}),e.editUnit=function(){e.apartmentAddress,{unitNum:e.apartment.unitNum,beds:e.apartment.beds,baths:e.apartment.baths,livingSpaces:e.apartment.livingSpaces,maxResidency:e.apartment.maxResidency,costPerMonth:e.apartment.costPerMonth,renovated:e.apartment.renovated,pets:e.apartment.petPolicy,youtubeVRID:e.apartment.youtubeID};n.save({item:"unit",action:"update"},e.apartment,function(e,t){$state.go("Account.Dashboard.Main")})}}]),angular.module("AdminPanelApp").controller("AdminPanelMainCtrl",["$scope",function(e){e.$on("passToSiblingAdminApp",function(t,n){e.$broadcast(n.name,n.data)})}]),angular.module("ApplicationApp").factory("ApplicationResource",["$resource","WizioConfig",function(e,t){return e(t.baseAPIURL+"application/:item/:action",{item:"@item",action:"@action"},{save:{method:"POST",isArray:!0}})}]),angular.module("CampaignApp").controller("CampaignMainCtrl",["$scope",function(e){}]),angular.module("BlogApp").controller("BlogListCtrl",["$scope",function(e){e.articles=[{title:"Local Landlord Shocked to Find Lack of Interest in Apartment",intro:"Sam explained to the Wizio staff-writers that he remains hopeful that his new, candid apartment listing will help him to find a good tenant match.",author:"The Radish",authorPicture:"radish.png",images:["post1_img1.jpg","post1_img2.jpg"]},{title:"Local Landlord Shocked to Find Lack of Interest in Apartment",intro:"Sam explained to the Wizio staff-writers that he remains hopeful that his new, candid apartment listing will help him to find a good tenant match.",author:"The Radish",authorPicture:"radish.png",images:["post1_img1.jpg","post1_img2.jpg"]}]}]),angular.module("BlogApp").controller("BlogMainCtrl",["$scope",function(e){}]),angular.module("FooterApp").controller("FooterCtrl",["$rootScope","$scope","$state","$http","ApartmentSearchSvc","AuthFct","SmartSearchSvc",function(e,t,n,o,a,r,i){t.goToLogin=function(){n.go("Login")},t.search=function(){a.searchApartment(t.searchString),n.go("Unit.Display")},t.getLocation=function(e){return i.smartSearch(e)},t.logout=function(e){r.logout()},t.getLocation=function(e){return i.smartSearch(e)},t.createUnit=function(){n.go("Unit.Create")},t.goHome=function(){n.go("LandingPage")},t.goAbout=function(){n.go("About")},t.goBlog=function(e){n.go("Blog.List")},t.goAccoutCreate=function(){n.go("Account.Create")},t.goAccountDashboard=function(){n.go("Account.Dashboard.Main")}}]),angular.module("LandingPageApp").controller("LandingPageCtrl",["$scope","$http","$state","UserRegistrationSvc","ApartmentSearchSvc","SmartSearchSvc","UnitCreateSvc",function(e,t,n,o,a,r,i){e.radioModel={realtor:!1,tenant:!0,broker:!1},e.filters={beds:null,baths:null,minPrice:null,maxPrice:null},e.neighborhoods=["Boston","Allston","Brighton","Jamaica Plain","Back Bay","Beacon Hill"],e.localeButtonClick=function(e){a.searchApartment(e,null,function(e,t){return n.go("Unit.Display")})},e.goToUploadPage=function(){n.go("Campaign.VideoUpload.Main")},e.search=function(){a.searchApartment(e.searchString,null,e.filters,function(e,t){return n.go("Unit.Display")})},e.getLocation=function(e){return r.smartSearch(e)},e.registerUser=function(){var t={firstName:e.firstName,lastName:e.lastName,email:e.email,password:e.password,accountType:"local",userType:1};o.saveUser(t,function(e){n.go("Account.Dashboard.Main")})},e.sizeLimit=5368709120,e.uploadProgress=0,e.creds={},e.upload=function(){AWS.config.update({accessKeyId:"AKIAIPGWV5OFR73P3VLQ",secretAccessKey:"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"}),AWS.config.region="us-east-1";var t=new AWS.S3({params:{Bucket:"wiziouservideos"}});if(e.file){var n=Math.round(parseInt(e.file.size));if(n>e.sizeLimit)return toastr.error("Sorry, your attachment is too big. <br/> Maximum "+e.fileSizeLabel()+" file attachment allowed","File Too Large"),!1;var o=e.uniqueString()+"-"+e.file.name,a={Key:o,ContentType:e.file.type,Body:e.file,ServerSideEncryption:"AES256"};t.putObject(a,function(t,n){return t?(toastr.error(t.message,t.code),!1):(toastr.success("File Uploaded Successfully","Done"),void setTimeout(function(){e.uploadProgress=0,e.$digest()},1e4))}).on("httpUploadProgress",function(t){e.uploadProgress=Math.round(t.loaded/t.total*100),e.$digest()})}else toastr.error("Please select a file to upload")},e.fileSizeLabel=function(){return Math.round(e.sizeLimit/1073741824)+"GB"},e.uniqueString=function(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;8>n;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}}]),angular.module("NavbarApp").controller("NavbarCtrl",["$rootScope","$scope","$state","$http","$modal","ApartmentSearchSvc","AuthFct","SmartSearchSvc","ModalSvc","WizioConfig",function(e,t,n,o,a,r,i,l,s,c){t.isCollapsed=!1;var u=function(e,t,n){return{backdrop:!0,keyboard:!0,modalFade:!0,templateUrl:e,controller:t,resolve:{data:function(){return n}}}};t.filters={beds:null,baths:null,minPrice:null,maxPrice:null},t.goToLogin=function(){var e=c.AccountAuthViewsURL,t=u(e+"Login.html","AuthLoginModalCtrl");s.showModal(t,{}).then(function(e){})},t.search=function(){r.searchApartment(t.searchString,null,t.filters,function(e,t){n.go("Unit.Display")})},t.getLocation=function(e){return l.smartSearch(e)},t.logout=function(e){i.logout()},t.getLocation=function(e){return l.smartSearch(e)},t.createUnit=function(){n.go("Unit.Create")},t.goHome=function(){n.go("LandingPage")},t.goAbout=function(){n.go("About")},t.goBlog=function(e){},t.goAccoutCreate=function(){var e=c.AccountAuthViewsURL,t=u(e+"AccountTypeModal.html","AccountTypeModalCtrl"),n=u(e+"AuthCreateAcctForm.html","AuthCreateAcctModalCtrl","Tenant"),o=u(e+"AuthCreateAcctForm.html","AuthCreateAcctModalCtrl","Landlord"),a=u(e+"Login.html","AuthLoginModalCtrl");s.showModal(t,{}).then(function(e){"tenantSignup"===e?s.showModal(n,{}).then(function(e){"login"===e&&s.showModal(a,{}).then(function(e){})}):"landlordSignup"===e&&s.showModal(o,{}).then(function(e){"login"===e&&s.showModal(a,{}).then(function(e){})})})},t.goAccountDashboard=function(){n.go("Account.Dashboard.Main")}}]),angular.module("SharedFactoryApp").factory("GeocoderFct",["$q",function(e){var t=function(t){var n=e.defer(),o=new google.maps.Geocoder;return o.geocode({address:t},function(e,t){t===google.maps.GeocoderStatus.OK&&n.resolve(e[0].geometry.location)}),n.promise};return{getLatLong:t}}]).factory("MapFct",["ApartmentGetSetSvc","$sessionStorage","$stateParams","$state","WizioConfig",function(e,t,n,o,a){var r=function(){var t={scrollwheel:!1,zoom:12,center:new google.maps.LatLng(42.3601,-71.0589),mapTypeId:google.maps.MapTypeId.ROADMAP},n=function(e){if(e.constructor!==Array&&(e=[e]),0===e.length)return t;var n=null,o=null;for(i=0;i<e.length;i++)n+=e[i].latitude,o+=e[i].longitude;return n/=e.length,o/=e.length,t={scrollwheel:!1,zoom:12,center:new google.maps.LatLng(n,o),mapTypeId:google.maps.MapTypeId.ROADMAP}},a=null;return"Unit.Details"===o.current.name?a=e.get("apartmentSelected"):"Unit.Display"===o.current.name&&(a=e.get("apartmentSearch")),n(a)},l=function(t){function n(e){var n=Math.floor(e.concatAddr.charCodeAt(5)/19+4),o=Math.floor(e.concatAddr.charCodeAt(3)/19+4),i=parseInt(e.concatAddr.replace(/(^\d+)(.+$)/i,"$1")),l=i-n;15>i&&(l=1);var s=i+o,c=l.toString()+"-"+s.toString();e.hiddenAddress=c+e.concatAddr.replace(/^\d+/,"");var u=new google.maps.Marker({map:t,position:new google.maps.LatLng(e.latitude,e.longitude),title:e.hiddenAddress});u.content='<div class="infoWindowContent"> <a href="'+a.frontEndURL+"#/unit/details/"+e.id+'"> <img class="pull-left "src =http://img.youtube.com/vi/'+e.Assignments[0].youtubeId+'/0.jpg  style="width:160px;height:120px;"</img></div>';var p=new google.maps.InfoWindow;google.maps.event.addListener(u,"click",function(){p.setContent('<p><a href="'+a.frontEndURL+"#/unit/details/"+e.id+'">'+u.title+"</p>"+u.content),p.open(t,u)}),r.push(u)}var r=[],l=null;"Unit.Details"===o.current.name?l=e.get("apartmentSelected"):"Unit.Display"===o.current.name&&(l=e.get("apartmentSearch"));var s=function(e){for(Array.isArray(e)||(e=[e]),i=0;i<e.length;i++)n(e[i]);return r};return s(l)};return{makeMap:r,makeMarkers:l}}]),angular.module("SharedFactoryApp").factory("SearchResource",["$resource","WizioConfig",function(e,t){return e(t.baseAPIURL+"search/",{},{save:{method:"POST",isArray:!0}})}]),angular.module("SharedServiceApp").service("ApartmentSearchSvc",["$rootScope","$sessionStorage","$state","ApartmentGetSetSvc","SearchResource","UnitCreateSvc",function(e,t,n,o,a,r){function l(o,l,s,c){r.parseGeocodeData(o,{unitNum:l},function(o,r){"AdminPanel.Main"===n.current.name&&(r.adminSearch=!0),r.filters=s,a.save(r,function(o,a){if("AdminPanel.Main"!==n.current.name)for(i=0;i<o.length;i++){var r=Math.floor(o[i].concatAddr.charCodeAt(5)/19+4),l=Math.floor(o[i].concatAddr.charCodeAt(3)/19+4),s=parseInt(o[i].concatAddr.replace(/(^\d+)(.+$)/i,"$1")),u=s-r;15>s&&(u=1);var p=s+l,d=u.toString()+"-"+p.toString();o[i].hiddenAddress=d+o[i].concatAddr.replace(/^\d+/,"")}return t.apartmentSearch=o,e.$broadcast("searchFinished",o),c(null,o)})})}return{searchApartment:l}}]).service("UserRegistrationSvc",["$state","AuthRegistrationResource",function(e,t){function n(e,n){t.save(e,function(e){n(e)})}return{saveUser:n}}]).service("TokenSvc",["$rootScope","$localStorage","jwtHelper",function(e,t,n){var o=function(){return t.token&&!n.isTokenExpired(t.token)?n.decodeToken(t.token):"No Token"},a=function(){return t.token?n.isTokenExpired(t.token)?(delete t.token,!0):!1:!0},r=function(n){return n?(e.isLoggedIn=!0,t.token=n,!0):!1},i=function(){return t.token?n.isTokenExpired(t.token)?(delete t.token,"No Token"):t.token:"No Token"},l=function(){return t.token?(delete t.token,!0):!1};return{decode:o,checkExp:a,storeToken:r,getToken:i,deleteToken:l}}]).service("SmartSearchSvc",["$http","$state","FlexGetSetSvc",function(e,t,n){var o=function(o){return e.get("//maps.googleapis.com/maps/api/geocode/json",{headers:{searchCheck:!0},params:{address:o,sensor:!1,components:"country:US|administrative_area:MA"}}).then(function(e){return"Unit.Claim"===t.current.name?ApartmentClaimGetSetSvc.set(e.data,"ApartmentClaims"):n.set(e),e.data.results.map(function(e){return e.formatted_address})})};return{smartSearch:o}}]).service("ModalSvc",["$modal",function(e){var t={backdrop:!0,keyboard:!0,modalFade:!0,templateUrl:"/public/app/modules/shared/viewtemplates/defaultmodal.html"},n={closeButtonText:"Close",actionButtonText:"OK",headerText:"Proceed?",bodyText:"perform this action"};this.showModal=function(e,t){return e||(e={}),e.backdrop="static",this.show(e,t)},this.show=function(o,a){var r={},i={};return angular.extend(r,t,o),angular.extend(i,n,a),r.controller||(r.controller=function(e,t){e.modalOptions=i,e.modalOptions.ok=function(e){t.close(e)},e.modalOptions.close=function(e){t.dismiss("cancel")}}),e.open(r).result}}]),angular.module("UnitApp").controller("UnitClaimFormCtrl",["$scope","SmartSearchSvc","UnitObjectSvc","FlexGetSetSvc","ApartmentClaimGetSetSvc",function(e,t,n,o,a){var r=function(e,t,n,o,a,r,i,l,s,c,u){this.localID=e,this.address=t,this.unitNum=n,this.beds=o,this.baths=a,this.livingSpaces=r,this.maxResidency=i,this.costPerMonth=l,this.renovated=s,this.pets=c,this.youtubeVRID=u};e.apartmentArray=[],a.get("ApartmentClaims")?e.apartmentArray=a.get("ApartmentClaims"):e.apartmentArray=[],e.getLocation=function(e){return t.smartSearch(e)},e.addTenantSlot=function(e){},e.copyApartment=function(e){},
e.newApartment=function(t){var n=e.apartmentArray.length+1,o=new r(n);e.apartmentArray.push(o)},e.submitApartments=function(){}}]),angular.module("UnitApp").controller("UnitClaimSearchCtrl",["$scope","$modalInstance","SmartSearchSvc","modalData",function(e,t,n,o){e.modalOptions=o;var a=function(e,t,n){this.trackingID=e,this.address=t,this.unitNumArray=[]};e.apartmentObjArray=[],e.apartmentObjArray[0]=new a(null,null),e.getLocation=function(e){return n.smartSearch(e)},e.addUnit=function(t){e.apartmentObjArray[t].unitNumArray.push(null)},e.addRange=function(t){for(var n=0;n<e.highNum;n++)e.apartmentObjArray[t].unitNumArray.push(null)},e.addAddress=function(){var t=new a(null,null);e.apartmentObjArray.push(t)},e.search=function(){}}]),angular.module("UnitApp").controller("UnitCreateCtrl",["$scope","$sessionStorage","$rootScope","$state","lodash","UnitResource","SmartSearchSvc","UnitCreateSvc","FlexGetSetSvc",function(e,t,n,o,a,r,i,l,s){e.$storage=t,e.numBeds=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],e.getLocation=function(e){return i.smartSearch(e)},e.addUnit=function(){var t=e.apartmentAddress,n={unitNum:e.unitNum,beds:e.beds,baths:e.baths,livingSpaces:e.livingRooms,maxResidency:e.maxResidency,costPerMonth:e.costPerMonth,renovated:e.renovated,pets:e.petPolicy,youtubeVRID:e.youtubeVRID};l.parseGeocodeData(t,n,function(e,t){r.save(t,function(e,t){o.go("Account.Dashboard.Main")})})}}]),angular.module("UnitApp").controller("UnitDetailCtrl",["$scope","$state","$modal","$location","$sessionStorage","lodash","ApartmentGetSetSvc","UnitResource","MapFct","TokenSvc","ProfileResource","FlexGetSetSvc","RerouteGetSetSvc","WizioConfig",function(e,t,n,o,a,r,i,l,s,c,u,p,d,m){e.available=!1;var f=function(e,t,o){var a=n.open({templateUrl:e,controller:t,size:o});return a};i.checkApartment(function(t){t=r.mapValues(t,function(e){return null===e?"Unknown":e}),e.apartment=t;var n=Math.floor(e.apartment.concatAddr.charCodeAt(5)/19+4),o=Math.floor(e.apartment.concatAddr.charCodeAt(3)/19+4),i=parseInt(e.apartment.concatAddr.replace(/(^\d+)(.+$)/i,"$1")),l=i-n;15>i&&(l=1);var u=i+o,p=l.toString()+"-"+u.toString();e.apartment.hiddenAddress=p+e.apartment.concatAddr.replace(/^\d+/,"");var d=c.decode();if(d&&"No Token"!==d&&"undefined"!==d&&(d=c.decode(),d.waitlists.length>0)){r.find(d.waitlists.ApartmentId,e.apartment)}a.apartmentSelected=e.apartment,e.apartment.youtubeLink="http://www.youtube.com/embed/"+e.apartment.Assignments[0].youtubeId+"?autoplay=0";var m=s.makeMap();e.map=new google.maps.Map(document.getElementById("map"),m);s.makeMarkers(e.map)}),e.waitlist=function(){if(c.checkExp()){c.deleteToken(),d.set(o.path());var n=f(m.AccountAuthViewsURL+"Login.html","AuthLoginModalCtrl","md");n.result.then(function(n){if("ok"===n){p.set(e.apartment,"ApartmentWaitlistingTo");var o=f(m.ApplicationWaitlistViewsURL+"WaitlistCreateModal.html","WaitlistCreateModalCtrl","md");o.result.then(function(e){t.go("Account.Dashboard.Main")})}})}else{p.set(e.apartment,"ApartmentWaitlistingTo");var a=f(m.ApplicationWaitlistViewsURL+"WaitlistCreateModal.html","WaitlistCreateModalCtrl","md");a.result.then(function(e){t.go("Account.Dashboard.Main")})}},e.setupTour=function(){}}]),angular.module("UnitApp").controller("UnitDisplayCtrl",["$scope","$sessionStorage","$state","lodash","ApartmentGetSetSvc","MapFct",function(e,t,n,o,a,r){function l(){var t=r.makeMap();e.map=new google.maps.Map(document.getElementById("map"),t);r.makeMarkers(e.map);e.openInfoWindow=function(e,t){e.preventDefault(),google.maps.event.trigger(t,"click")}}e.sessionStorage=t,e.apartmentSearch=t.apartmentSearch,0===e.apartmentSearch.length,e.mapshow=!0,e.maphidden=!1,l(),e.tabToggle=function(){e.mapshow=!e.mapshow,e.maphidden=!e.maphidden},e.$on("searchFinished",function(t,n){for(i=0;i<n.length;i++){var o=Math.floor(n[i].concatAddr.charCodeAt(5)/19+4),a=Math.floor(n[i].concatAddr.charCodeAt(3)/19+4),r=parseInt(n[i].concatAddr.replace(/(^\d+)(.+$)/i,"$1")),s=r-o;15>r&&(s=1);var c=r+a,u=s.toString()+"-"+c.toString();n[i].hiddenAddress=u+n[i].concatAddr.replace(/^\d+/,"")}e.apartmentSearch=n,l()}),e.apartmentSelected=function(t){var r=o.find(e.apartmentSearch,{id:t});void 0!==r&&(a.set(r,"apartmentSelected"),n.go("Unit.Details",{id:t}))}}]),angular.module("UnitApp").controller("UnitMainCtrl",["$scope",function(e){}]),angular.module("AccountApp").controller("AccountTypeModalCtrl",["$scope","$modalInstance",function(e,t){e.tenantSignup=function(){t.close("tenantSignup")},e.landlordSignup=function(){t.close("landlordSignup")}}]),angular.module("AccountApp").controller("AuthCreateAcctModalCtrl",["$scope","$state","$modal","$modalInstance","data","WizioConfig","UserRegistrationSvc",function(e,t,n,o,a,r,i){e.user={},e.setUserObj=function(){e.user.password===e.user.passwordConfirm&&(e.user.accountType="local","Tenant"===a?e.user.userType=1:e.user.userType=2,i.saveUser(e.user,function(e){return"ERR"!==e.status?o.close("ok"):void 0}))},e.login=function(){return o.close("login")},e.cancel=function(){"Campaign.VideoUpload.Main"===t.current.name?o.dismiss():t.go("Home")}}]),angular.module("AccountApp").controller("AuthLoginModalCtrl",["$rootScope","$scope","$state","$localStorage","$stateParams","$facebook","$location","$modalInstance","ModalSvc","AuthFct","AuthResetPasswordResource","AuthUpdatePasswordResource","TokenSvc","RerouteGetSetSvc","WizioConfig",function(e,t,n,o,a,r,i,l,s,c,u,p,d,m,f){var g=function(e,t,n){return{backdrop:!0,keyboard:!0,modalFade:!0,templateUrl:e,controller:t,resolve:{data:function(){return n}}}},h=f.AccountAuthViewsURL;t.sendResetEmail=function(){var e={};e.email=t.email,u.save(e,function(e){"ERR"===e.status?s.showModal(A,{}).then(function(e){}):s.showModal(A,{}).then(function(e){})})};var A=g(h+"Login.html","AuthLoginModalCtrl");t.resetPassword=function(){if(t.password===t.passwordConfirm){var e={};e.password=t.password,e.token=a.token,p.save(e,function(e){"ERR"!==e.status?s.showModal(A,{}).then(function(e){}):s.showModal(A,{}).then(function(e){})})}else t.password="",t.passwordConfirm=""},t.requestLogin=function(){var n={email:t.email,password:t.password};c.signin(n,function(t){return e.isLoggedIn=!0,l.close("ok")},function(){e.error="Failed to sign in!",s.showModal(A,{}).then(function(e){})})}}]),angular.module("AuthApp").factory("AuthFct",["$state","$localStorage","$http","$rootScope","AuthRegistrationResource","AuthLoginResource","TokenSvc",function(e,t,n,o,a,r,i){var l=function(){var e=!0,t=i.getToken();return"No Token"!==t&&(e=i.checkExp(t)),"No Token"===t&&e?!1:!0};return{signup:function(e,t,n){a.save(null,e,function(e,n){t(n)})},signin:function(e,t,n){r.save(e,function(e,n){t(e,n)})},logout:function(n){tokenClaims={},delete t.token,o.isLoggedIn=!1,e.go("LandingPage")},isLoggedin:l}}]),angular.module("AuthApp").factory("AuthLoginResource",["$resource","WizioConfig",function(e,t){return e(t.baseAPIURL+"user/authenticate")}]).factory("AuthResetPasswordResource",["$resource","WizioConfig",function(e,t){return e(t.baseAPIURL+"user/forgotpassword")}]).factory("AuthUpdatePasswordResource",["$resource","WizioConfig",function(e,t){return e(t.baseAPIURL+"user/updatepassword")}]).factory("AuthRegistrationResource",["$resource","WizioConfig",function(e,t){return e(t.baseAPIURL+"user/registration")}]),angular.module("AccountApp").service("AuthCreateUserSvc",[function(){var e=function(e,t){return e={firstName:e.firstName,lastName:e.lastName,email:e.email,password:e.password},"tenant"===t.usertype?e.userType=1:"realtor"===t.usertype?e.userType=2:"broker"===t.usertype&&(e.userType=3),e};return{CreateUser:e}}]),angular.module("AccountApp").controller("DashboardLLUnitListCtrl",["$scope","$state",function(e,t){e.editApartments=function(){},e.claimApartments=function(){t.go("Unit.Claim")},e.emailNow=function(e){},e.viewApplicants=function(e){}}]),angular.module("AccountApp").controller("DashboardMainCtrl",["$scope","$timeout","TokenSvc","WizioConfig",function(e,t,n,o){var a=n.decode();t(function(){e.$broadcast("AccountInfoBroadcast",a)})}]),angular.module("AccountApp").controller("DashboardUserInfoCtrl",["$scope",function(e){e.$on("AccountInfoBroadcast",function(t,n){e.accountInfo=n})}]),angular.module("AccountApp").controller("DashboardWaitlistCtrl",["$scope","ApplicationResource","TokenSvc","lodash",function(e,t,n,o){var a=n.decode(),r=o.pluck(a.waitlists,"ApplicationId");applicationIdObject={ApplicationId:r},t.save({item:"findbyuser"},applicationIdObject,function(t,n){var a=o.groupBy(t,"ApplicationId");e.waitlists=o.values(a),e.waitlists.length>0&&(e.waitlistsExist=!0)}),e.removeFromWaitlist=function(n){var o={ApplicationId:e.waitlists[n][0].ApplicationId,UserId:a.id};t.save({item:"user",action:"remove"},o,function(t,o){e.waitlists.splice(n)})}}]),angular.module("AccountApp").factory("AssignmentResource",["$resource","WizioConfig",function(e,t){return e(t.baseAPIURL+"assignment")}]),angular.module("AccountApp").controller("ProfileCreateModalCtrl",["$scope","$modalInstance","$state",function(e,t,n){e.ok=function(){t.close("ok")},e.cancel=function(){t.dismiss("cancel")}}]),angular.module("SellerApp").controller("ProfileExistsModalCtrl",["$scope","$modalInstance","$state","ProfileResource","AuthFct","FlexGetSetSvc",function(e,t,n,o,a,r){e.ok=function(){t.close("ok")},e.edit=function(){t.close("edit")},e.cancel=function(){t.dismiss("cancel")}}]),angular.module("AccountApp").controller("ProfileFormCtrl",["$scope","$modal","$state","ApartmentGetSetSvc","AuthFct","ProfileResource","ApplicationResource","TokenSvc","FlexGetSetSvc",function(e,t,n,o,a,r,i,l,s){e.apartment=o.get("apartmentApplyingTo");var c=e.apartment;e.profile=s.get();var u=l.decode();e.apply=function(){var o=n.current.name,a={UserID:u.id,annualIncome:e.annualIncome,currentEmployer1:e.currentEmployer1,currentEmployerLOE1:e.currentEmployerLOE1,currentEmployerPosition1:e.currentEmployerPosition1,currentEmployer2:e.currentEmployer2,currentEmployerLOE2:e.currentEmployerLOE2,currentEmployerPosition2:e.currentEmployerPosition2,previousEmployer1:e.previousEmployer1,previousEmployerLOE1:e.previousEmployerLOE1,previousEmployerPosition1:e.previousEmployerPosition1,previousEmployer2:e.previousEmployer2,previousEmployerLOE2:e.previousEmployerLOE2,previousEmployerPosition2:e.previousEmployerPosition2,creditScore:e.creditScore,pets:e.pets,petType:e.petType,age:e.age,maritalStatus:e.maritalStatus,emergencyContact:e.emergencyContact,phoneNumber:e.phoneNumber,socialSecurityNumber:e.socialSecurityNumber,currentBank:e.currentBank,currentTenancyAddress:e.currentTenancyAddress,currentPM:e.currentPM,currentPMContact:e.currentPMContact,previousTenancyAddress:e.previousTenancyAddress,previousPM:e.previousPM,previousPMContact:e.previousPMContact,employmentStatus:e.employmentStatus,desiredMoveInDate:e.desiredMoveInDate};if("Profile.Edit"===o)e.profile=s.get();else if("Profile.Create"===o){e.appicationEmails=[];var i=t.open({templateUrl:"public/app/modules/AccountApp/profileapp/viewtemplates/profilesavemodal.html",controller:"ProfileSaveModalCtrl",size:"md",resolve:{apartment:function(){return c}}});i.result.then(function(e){"saveAndApply"===e?r.save(a,function(e,t){n.go("Application.New")}):"save"===e&&r.save(a,function(e,t){})},function(){})}}}]),angular.module("AccountApp").controller("ProfileSaveModalCtrl",["$scope","$modalInstance","$state","apartment",function(e,t,n,o){e.apartment=o,e.ok=function(){t.close("saveAndApply")},e.save=function(){t.close("save")},e.cancel=function(){t.dismiss("cancel")}}]),angular.module("SellerApp").factory("ProfileResource",["$resource","WizioConfig",function(e,t){return e(t.baseAPIURL+"profile/:id",{id:"@id"})}]),angular.module("ApplicationApp").controller("ApplicationFormCtrl",["$scope",function(e){}]),angular.module("ApplicationApp").controller("WaitlistCreateModalCtrl",["$scope","$modalInstance","FlexGetSetSvc","TokenSvc","ApplicationResource",function(e,t,n,o,a){e.apartment=n.get("ApartmentWaitlistingTo"),e.apartmentSlotsModal=[];var r={apartmentInfo:null,users:null,owner:null};e.waitlistArray=[],e.trial=[];for(var i=1;i<=e.apartment.maxResidency-1;i++){var l={id:i};e.apartmentSlotsModal.push(l)}e.waitlistSignup=function(){var n={apartmentId:e.apartment.id,apartmentMaxResidency:e.apartment.maxResidency};r.apartmentInfo=n,r.users=e.waitlistArray,r.owner=o.decode().id,r.ownerEmail=o.decode().email,a.save(r,function(e,n){t.close("ok")})},e.cancel=function(){t.dismiss("cancel")}}]),angular.module("CampaignApp").controller("VideoUploadMainCtrl",["$scope",function(e){e.$on("ViewTemplatesSelector",function(t,n){e.viewtemplates=n})}]),angular.module("CampaignApp").controller("VideoUploadModalCtrl",["$scope","$modalInstance","SmartSearchSvc","UnitResource","UnitCreateSvc","TokenSvc","DescriptionModel","ApartmentModel","AssignmentResource",function(e,t,n,o,a,r,i,l,s){e.getLocation=function(e){return n.smartSearch(e)},e.sizeLimit=5368709120,e.uploadProgress=0,e.creds={},e.landlord={},e.apartment={},e.upload=function(){var n=r.decode(),c=l.build(e.apartment);c.description=new i(n.id,null,e.apartment.description.DescriptionText),a.parseGeocodeData(e.apartmentAddress,c,function(a,r){o.save(r,function(o,a){var r=o;AWS.config.update({accessKeyId:"AKIAIPGWV5OFR73P3VLQ",secretAccessKey:"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"}),AWS.config.region="us-east-1";var i=new AWS.S3({params:{Bucket:"wiziouservideos"},httpOptions:{timeout:1e12}});if(e.file){var l=Math.round(parseInt(e.file.size));if(l>e.sizeLimit)return toastr.error("Sorry, your attachment is too big. <br/> Maximum "+e.fileSizeLabel()+" file attachment allowed","File Too Large"),!1;var c=e.apartmentAddress;c=c.replace(/[^0-9a-zA-Z]/g,"");var u=n.email+"-"+c+"unitNum:"+c.unitNum+"___"+Math.floor(80*Math.random()+10),p={Key:u,ContentType:e.file.type,Body:e.file,ServerSideEncryption:"AES256"};i.putObject(p,function(e,o){if(e)return toastr.error(e.message,e.code),t.dismiss(),!1;toastr.success("File Uploaded Successfully","Done");var a={UserId:n.id,ApartmentId:r.id,S3VideoId:u};s.save(a,function(e,t){}),t.close("ok")}).on("httpUploadProgress",function(t){e.uploadProgress=Math.round(t.loaded/t.total*100),e.$digest()})}else toastr.error("Please select a file to upload")})})},e.fileSizeLabel=function(){return Math.round(e.sizeLimit/1073741824)+"GB"},e.uniqueString=function(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;8>n;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}}]),angular.module("CampaignApp").controller("VideoUploadSplashCtrl",["$scope","$state","$modal","WizioConfig","AuthFct","ModalSvc",function(e,t,n,o,a,r){var i={topHorizontal1:!0,topHorizontal2:!0,mainContent1:!1,mainContent2:!0,bottomHorizontal:!0};e.$emit("ViewTemplatesSelector",i);var l=function(e,t,n,o){return{backdrop:!0,keyboard:!0,modalFade:!0,size:e,templateUrl:t,controller:n,resolve:{data:function(){return o}}}},s=function(){var e=o.CampaignVideoUploadViewsURL,t=l("lg",e+"VideoUploadModal.html","VideoUploadModalCtrl");r.showModal(t,{}).then(function(e){switch(e){case"ok":break;default:return}})},c=function(e){var t=o.AccountAuthViewsURL,n=l("md",t+"AuthCreateAcctForm.html","AuthCreateAcctModalCtrl");r.showModal(n,{}).then(function(t){e("ok"===t?"ok":"login")})},u=function(e){var t=o.AccountAuthViewsURL,n=l("md",t+"Login.html","AuthLoginModalCtrl");r.showModal(n,{}).then(function(t){e(t)})};e.uploadVideo=function(){a.isLoggedin()?s():c(function(e){switch(e){case"ok":s();break;case"login":u(function(e){switch(e){case"ok":s();break;default:return}})}})}}]),angular.module("CampaignApp").service("AWSS3UploadSvc",[function(){}]),angular.module("SellerApp").controller("dashAptPostedCtrl",["$scope",function(e){}]),angular.module("SellerApp").controller("dashAccountAppliedCtrl",["$scope",function(e){}]),angular.module("SellerApp").controller("dashSellerInfoCtrl.js",["$scope",function(e){e.$on("AccountInfoBroadcast",function(t,n){e.accountInfo=n})}]),angular.module("SharedServiceApp").service("ApartmentClaimGetSetSvc",["$sessionStorage",function(e){var t=[],n=function(n,o){return o?(e[o]=n,void t.push(n)):void t.push(n)},o=function(n){return n?e[n]:0===t.length?[]:t[0]},a=function(n){return n?(delete e[n],void(t=[])):void(t=[])};return{set:n,get:o,reset:a}}]),angular.module("SharedServiceApp").service("ApartmentGetSetSvc",["$sessionStorage","$stateParams","UnitResource","lodash",function(e,t,n,o){var a=null,r=function(t,n){n&&(e[n]=t),a=t},i=function(o){return o?a=e[o]:null!==a&&a.id===t.id?a:void n.get({id:apartmentURLID},function(t){a=t,e[o]=t,callback(a)})},l=function(){a=null},s=function(o){var r=t.id,i=e.apartmentSelected;if(i){if(r==i.id)return o(i);n.get({id:r},function(e){a=e,o(a)})}else n.get({id:r},function(e){a=e,o(a)})};return{set:r,get:i,reset:l,checkApartment:s}}]),angular.module("SharedServiceApp").service("FlexGetSetSvc",["$sessionStorage","$sessionStorage",function(e,t){var n=[],o=function(t,o,a){return o?(e[o]=t,a||(n=[]),void n.push(t)):(a||(n=[]),void n.push(t))},a=function(t){return t?e[t]:0===n.length?[]:n[0]},r=function(t){return t?(delete e[t],void(n=[])):void(n=[])};return{set:o,get:a,reset:r}}]),angular.module("SharedServiceApp").service("RerouteGetSetSvc",["$sessionStorage",function(e){var t=[],n=function(n,o){return o?(e[o]=n,t=[],void t.push(n)):(t=[],void t.push(n))},o=function(n){if(n)return e[n];if(0===t.length)return[];var o=t[0];return t=[],o},a=function(n){return n?(delete e[n],void(t=[])):void(t=[])};return{set:n,get:o,reset:a}}]);
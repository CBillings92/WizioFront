!function(){angular.module("AboutUsApp",[]),angular.module("AdminPanelApp",[]),angular.module("AccountApp",[]),angular.module("AmazonS3UploadApp",[]),angular.module("ApplicationApp",[]),angular.module("AuthApp",[]),angular.module("FooterApp",[]),angular.module("InfoApp",[]),angular.module("LandingPageApp",[]),angular.module("LeaseApp",[]),angular.module("NavbarApp",[]),angular.module("SharedFactoryApp",[]),angular.module("SharedServiceApp",[]),angular.module("UnitApp",[]),angular.module("FooterApp",[]),angular.module("Models",[]),angular.module("Directives",[]),angular.module("UploadPageApp",[]),angular.module("PhotographerApp",[]),angular.module("SearchApp",[]),angular.module("MainApp",["AdminPanelApp","AccountApp","ApplicationApp","AuthApp","AboutUsApp","Directives","FooterApp","InfoApp","LandingPageApp","UploadPageApp","LeaseApp","NavbarApp","SharedFactoryApp","SharedServiceApp","PhotographerApp","SearchApp","UnitApp","Models","ui.router","ngStorage","ngResource","ngLodash","ui.bootstrap","angular-jwt","angularMoment","angulartics","angulartics.google.analytics"]).config(["$sceDelegateProvider",function(e){e.resourceUrlWhitelist(["self","cdn.wizio.co/**","https://cdn.wizio.co/**","https://cdn.wizio.co/**","https://youtu.be/**","https://www.youtube.com/watch?v=**","https://www.youtube.com/watch?v=*&feature=youtu.be","http://www.youtube.com/embed/**"])}]).run(["$rootScope","$state","$stateParams","$localStorage","$window","jwtHelper","AuthFct","TokenSvc","LoadingSpinnerFct",function(e,t,a,n,o,r,i,s,l){l.show("siteLoader"),e.state=t,e.stateParams=a;var c=s.getToken(),u=null;c&&(u=s.checkExp()),"No Token"===c||(u?s.deleteToken():(console.dir(1),e.userType=s.decode().userType,e.isLoggedIn=!0))}])}(),angular.module("MainApp").constant("WizioConfig",function(){function e(){switch(window.location.origin){case"http://172.16.0.2:3000":return"dev";case"http://alphafront.rc9igeipqw.us-east-1.elasticbeanstalk.com":return"test";case"http://beta.wizio.co":return"prod";case"http://wizio.co":return"prod";case"http://www.wizio.co":return"prod";case"https://wizio.co":return"prod";case"https://www.wizio.co":return"prod";default:return"dev"}}var t=e();return{baseAPIURL:function(){switch(t){case"dev":return"http://172.16.0.3:4000/api/";case"test":return"http://alphaserver.iv9c3ngbv7.us-east-1.elasticbeanstalk.com/api/";case"prod":return"https://api.wizio.co/api/";default:return"http://172.16.0.3:4000/api/"}}(),frontEndURL:window.location.origin,LandingPage:{activeListingId:function(){var e="test"===t?"a55f59b2-d99d-11e6-903a-12e04a9cd045":"b19e3352-d9fd-11e6-85e0-0a8adbb20c4d";return e}},DemoPage:{activeListingId:function(){var e="test"===t?"":"0a68e5a9-da00-11e6-85e0-0a8adbb20c4d";return e}},modulesURL:"public/app/modules",AdminPanelAppMainViewsURL:"public/app/modules/adminpanelapp/main/",AdminPanelAppViewsURL:"public/app/modules/adminpanelapp/viewtemplates/",AuthViewsURL:"public/app/modules/authapp/viewtemplates/",ApplicationViewsURL:"public/app/modules/applicationapp/main/",ApplicationFormViewsURL:"public/app/modules/applicationapp/applicationformapp/viewtemplates/",BuyerDashboardViewsURL:"public/app/modules/accountapp/dashboard/viewtemplates/",FooterViewsURL:"public/app/modules/footerapp/viewtemplates/",landingPageAppViewsURL:"public/app/modules/landingpageapp/viewtemplates/",infoAppViews:"public/app/modules/infoapp/",leaseMainViewsURL:"public/app/modules/leaseapp/main/",leaseViewsURL:"public/app/modules/leaseapp/viewtemplates/",NavbarViewsURL:"public/app/modules/navbarapp/viewtemplates/",AccountViewsURL:"public/app/modules/accountapp/main/",AccountDashboardViewsURL:"public/app/modules/accountapp/dashboard2app/main/",AccountAuthViewsURL:"public/app/modules/accountapp/authapp/viewtemplates/",UnitMainViewsURL:"public/app/modules/unitapp/main/",UnitViewsURL:"public/app/modules/unitapp/viewtemplates/",extProfileMainViewsURL:"public/app/modules/accountapp/extendedprofileapp/main/",extProfileViewsURL:"public/app/modules/accountapp/extendedprofileapp/viewtemplates/",stripe_test_key:"pk_test_mngZell36UYuy8GfSSox4CZ9",static_vr:function(){var e={landingpage:{apartmentpubid:null},demo:{apartmentpubid:null},demoOneBackBay:{apartmentpubid:null},demoGreenStreet:{apartmentpubid:null},demoWellington2Bed:{apartmentpubid:null},demoWaterMarkOneBed:{apartmentpubid:null},demoGreenWay0404:{apartmentpubid:null},demoGreenWay0503:{apartmentpubid:null},demoGreenWay0512:{apartmentpubid:null},demoGreenWay1209:{apartmentpubid:null},demoGreenWay1401:{apartmentpubid:null},demoGreenWay1707:{apartmentpubid:null},demoMetroMark04:{apartmentpubid:null},demoMetroMark06:{apartmentpubid:null},demoMetroMark12:{apartmentpubid:null},demoMetroMark13:{apartmentpubid:null},demoRiversEdgeB1:{apartmentpubid:null},demoRiversEdgeA2:{apartmentpubid:null},demoRiversEdgeA9:{apartmentpubid:null},demoStationLanding1:{apartmentpubid:null},demoStationLanding1C:{apartmentpubid:null},demoStationLanding2:{apartmentpubid:null},demoStationLanding24W:{apartmentpubid:null},demoStationLanding26E:{apartmentpubid:null},demoStationLandingStudioB:{apartmentpubid:null},demoEddyD:{apartmentpubid:null},demoEddyBB:{apartmentpubid:null},demoEddyCC:{apartmentpubid:null},demoEddyK:{apartmentpubid:null},apikey:null};switch(t){case"dev":return e.apikey="b04fa14a-3486-11e6-85e0-0a8adbb20c4d",e.demo.apartmentpubid="cdd02606-bfc7-4aec-90c9-ed78c1462661",e.landingpage.apartmentpubid="b4a4b637-b585-4f21-8f5d-32a382a2ee15",e.demoOneBackBay.apartmentpubid="b170e44b-e859-4c53-b126-614fbf8e1c86",e.demoGreenStreet.apartmentpubid="2b48a77d-cf3d-45ed-a8fe-f752d55e027e",e.demoWellington2Bed.apartmentpubid="5d65b2a1-5067-44d4-ae75-5ff7bf8127ac",e;case"test":return e.apikey="b04fa14a-3486-11e6-85e0-0a8adbb20c4d",e.demo.apartmentpubid="cdd02606-bfc7-4aec-90c9-ed78c1462661",e.landingpage.apartmentpubid="b4a4b637-b585-4f21-8f5d-32a382a2ee15",e.demoOneBackBay.apartmentpubid="b170e44b-e859-4c53-b126-614fbf8e1c86",e.demoGreenStreet.apartmentpubid="2b48a77d-cf3d-45ed-a8fe-f752d55e027e",e.demoWellington2Bed.apartmentpubid="5d65b2a1-5067-44d4-ae75-5ff7bf8127ac",e;case"prod":return e.apikey="a2d53f52-7979-11e6-85e0-0a8adbb20c4d",e.demo.apartmentpubid="cdd02606-bfc7-4aec-90c9-ed78c1462661",e.landingpage.apartmentpubid="b4a4b637-b585-4f21-8f5d-32a382a2ee15",e.demoOneBackBay.apartmentpubid="b170e44b-e859-4c53-b126-614fbf8e1c86",e.demoGreenStreet.apartmentpubid="2b48a77d-cf3d-45ed-a8fe-f752d55e027e",e.demoWaterMarkOneBed.apartmentpubid="ccf9ac72-601e-427b-8898-7ca367cc86e1",e.demoWellington2Bed.apartmentpubid="53508b28-caed-4958-99a9-ef1b89b3c70d",e.demoGreenWay0404.apartmentpubid="f78a349b-96b8-4b83-b470-7df789bebf32",e.demoGreenWay0503.apartmentpubid="c87a0162-27f1-4862-ae4e-32c4f74f1c0d",e.demoGreenWay0512.apartmentpubid="07c5e21f-d7c9-4ae6-83b8-a8b0d88492c7",e.demoGreenWay1209.apartmentpubid="f341d89a-5574-4dbc-a786-cf931ee89620",e.demoGreenWay1401.apartmentpubid="ae6fa9b3-34b5-4010-9de3-8f006eea9ca2",e.demoGreenWay1707.apartmentpubid="dae5df4c-6149-4bec-82f3-a12c4dd5c067",e.demoMetroMark04.apartmentpubid="40391eab-8c85-4e12-ac58-296bff64cc98",e.demoMetroMark06.apartmentpubid="4a8f7cf5-21cf-4665-b472-72faf83fb583",e.demoMetroMark12.apartmentpubid="89beaef2-8864-4488-8ecb-be81ccf6b7e7",e.demoMetroMark13.apartmentpubid="38b4b736-f7dc-4da0-ad9c-94899d516db9",e.demoRiversEdgeB1.apartmentpubid="4384fc6d-967f-429c-8894-2e38fde18e54",e.demoRiversEdgeA2.apartmentpubid="987f8160-8229-4a79-b51d-d17975f01804",e.demoRiversEdgeA9.apartmentpubid="b6aae3d0-2ada-40ca-91c1-54ab87dde49e",e.demoStationLanding1.apartmentpubid="e3cc5db2-ebf8-473c-8696-0c21d9caa3d2",e.demoStationLanding1C.apartmentpubid="57934872-c858-43a3-b69f-60b33985963a",e.demoStationLanding2.apartmentpubid="1878da61-1334-43f1-9c99-68cd45783bde",e.demoStationLanding24W.apartmentpubid="29ed2132-0a02-4205-91d8-e30d23378f0d",e.demoStationLanding26E.apartmentpubid="adaea09c-69ae-4aed-a11b-33a697f32304",e.demoStationLandingStudioB.apartmentpubid="af7b3c43-44d7-4ee5-8183-ce5b7ee3677f",e.demoEddyD.apartmentpubid="c08f0dbc-6910-4c7e-9084-af5351696653",e.demoEddyBB.apartmentpubid="a0dde313-fe71-4988-adc1-a187b943625f",e.demoEddyCC.apartmentpubid="110a0962-172d-4c81-b85a-3276070053c2",e.demoEddyK.apartmentpubid="6e9049a5-a823-4ccb-b625-8fe7616afdcc",e;default:return e.apikey="bb4b58d2-4e8b-4155-a736-b5d233ca03aa",e.demo.apartmentpubid="d5ee04bb-6d52-11e6-8edc-0800274a1eca",e.landingpage.apartmentpubid="d5ee04bb-6d52-11e6-8edc-0800274a1eca",e}}()}}()),angular.module("MainApp").config(["$stateProvider","$urlRouterProvider","$locationProvider","$httpProvider","WizioConfig",function(e,t,a,n,o){var r={templateUrl:o.NavbarViewsURL+"navbar.html",controller:"NavbarCtrl"},i={templateUrl:o.FooterViewsURL+"footer.html",controller:"FooterCtrl"},s={requireLogin:!0},l={requireLogin:!0,userType:2},c={requireLogin:!1};e.state("LandingPage",{url:"/",views:{navbar:r,footer:i,maincontent:{templateUrl:o.landingPageAppViewsURL+"landingpage.view.html",controller:"LandingPageCtrl"},"vr-player":{templateUrl:o.UnitViewsURL+"transition_vrplayercontainer.view.html"}},data:c}).state("InfoDashboard",{url:"/info/dashboard",views:{footer:i,maincontent:{templateUrl:o.infoAppViews+"infoapp.dshbrd.view.html",controller:"InfoAppDashboardCtrl"}},data:c}).state("Upload",{url:"/upload",views:{navbar:r,footer:i,maincontent:{templateUrl:"public/app/modules/photographerapp/upload/upload.view.html",controller:"UploadPageCtrl"}}}).state("Tour",{url:"/tour/:activelistingid",views:{maincontent:{templateUrl:o.UnitViewsURL+"transition_vrplayercontainer.view.html"}}}).state("Search",{url:"/search",params:{apartments:null},views:{navbar:r,footer:i,maincontent:{templateUrl:"public/app/modules/searchapp/view.html",controller:"SearchAppCtrl"}}}).state("Signup",{url:"/signup",views:{footer:i,maincontent:{templateUrl:"public/app/modules/subscriptionapp/main/subscription.main.view.html",controller:"SubscriptionMainCtrl"}}}).state("Signup.Invite",{url:"/invite/:invitePubId",views:{footer:i,maincontent:{templateUrl:"public/app/modules/subscriptionapp/main/subscription.main.view.html",controller:"SubscriptionMainCtrl"}}}).state("Demo",{url:"/demo",views:{maincontent:{templateUrl:o.UnitViewsURL+"transition_vrplayercontainer.view.html"}}}).state("DemoOneBackBay",{url:"/demo/backbay",views:{maincontent:{templateUrl:o.UnitViewsURL+"democontainer.view.html"}}}).state("DemoGreenStreet",{url:"/demo/greenstreet",views:{maincontent:{templateUrl:o.UnitViewsURL+"democontainer.view.html"}}}).state("DemoWellington2Bed",{url:"/demo/wellington",views:{maincontent:{templateUrl:o.UnitViewsURL+"democontainer.view.html"}}}).state("DemoWaterMarkOneBed",{url:"/demo/watermark/onebed",views:{maincontent:{templateUrl:o.UnitViewsURL+"democontainer.view.html"}}}).state("DemoGreenWay0404",{url:"/demo/greenway/0404",views:{maincontent:{templateUrl:o.UnitViewsURL+"democontainer.view.html"}}}).state("DemoGreenWay0512",{url:"/demo/greenway/0512",views:{maincontent:{templateUrl:o.UnitViewsURL+"democontainer.view.html"}}}).state("DemoGreenWay0503",{url:"/demo/greenway/0503",views:{maincontent:{templateUrl:o.UnitViewsURL+"democontainer.view.html"}}}).state("DemoGreenWay1209",{url:"/demo/greenway/1209",views:{maincontent:{templateUrl:o.UnitViewsURL+"democontainer.view.html"}}}).state("DemoGreenWay1401",{url:"/demo/greenway/1401",views:{maincontent:{templateUrl:o.UnitViewsURL+"democontainer.view.html"}}}).state("DemoGreenWay1707",{url:"/demo/greenway/1707",views:{maincontent:{templateUrl:o.UnitViewsURL+"democontainer.view.html"}}}).state("DemoMetroMark04",{url:"/demo/metromark/04",views:{maincontent:{templateUrl:o.UnitViewsURL+"democontainer.view.html"}}}).state("DemoMetroMark06",{url:"/demo/metromark/06",views:{maincontent:{templateUrl:o.UnitViewsURL+"democontainer.view.html"}}}).state("DemoMetroMark12",{url:"/demo/metromark/12",views:{maincontent:{templateUrl:o.UnitViewsURL+"democontainer.view.html"}}}).state("DemoMetroMark13",{url:"/demo/metromark/13",views:{maincontent:{templateUrl:o.UnitViewsURL+"democontainer.view.html"}}}).state("DemoRiversEdgeB1",{url:"/demo/riversedge/b1",views:{maincontent:{templateUrl:o.UnitViewsURL+"democontainer.view.html"}}}).state("DemoRiversEdgeA2",{url:"/demo/riversedge/a2",views:{maincontent:{templateUrl:o.UnitViewsURL+"democontainer.view.html"}}}).state("DemoRiversEdgeA9",{url:"/demo/riversedge/a9",views:{maincontent:{templateUrl:o.UnitViewsURL+"democontainer.view.html"}}}).state("DemoStationLanding1",{url:"/demo/stationlanding/1",views:{maincontent:{templateUrl:o.UnitViewsURL+"democontainer.view.html"}}}).state("DemoStationLanding1C",{url:"/demo/stationlanding/1c",views:{maincontent:{templateUrl:o.UnitViewsURL+"democontainer.view.html"}}}).state("DemoStationLanding2",{url:"/demo/stationlanding/2",views:{maincontent:{templateUrl:o.UnitViewsURL+"democontainer.view.html"}}}).state("DemoStationLanding24W",{url:"/demo/stationlanding/24w",views:{maincontent:{templateUrl:o.UnitViewsURL+"democontainer.view.html"}}}).state("DemoStationLanding26E",{url:"/demo/stationlanding/26e",views:{maincontent:{templateUrl:o.UnitViewsURL+"democontainer.view.html"}}}).state("DemoStationLandingStudioB",{url:"/demo/stationlanding/studiob",views:{maincontent:{templateUrl:o.UnitViewsURL+"democontainer.view.html"}}}).state("DemoEddyD",{url:"/demo/theeddy/d",views:{maincontent:{templateUrl:o.UnitViewsURL+"democontainer.view.html"}}}).state("DemoEddyBB",{url:"/demo/theeddy/bb",views:{maincontent:{templateUrl:o.UnitViewsURL+"democontainer.view.html"}}}).state("DemoEddyCC",{url:"/demo/theeddy/cc",views:{maincontent:{templateUrl:o.UnitViewsURL+"democontainer.view.html"}}}).state("DemoEddyK",{url:"/demo/theeddy/k",views:{maincontent:{templateUrl:o.UnitViewsURL+"democontainer.view.html"}}}).state("NewExternalApi",{url:"/listing/vr/:apitoken/:apartmentpubid",views:{maincontent:{templateUrl:o.UnitViewsURL+"transition_vrplayercontainer.view.html"}},data:c}).state("Externalapi",{url:"/listing/vr/:apitoken/:apartmentpubid",views:{maincontent:{templateUrl:o.UnitViewsURL+"democontainer.view.html"}},data:c}).state("Externalapiv2",{url:"/listing/vr/:apitoken/:apartmentpubid",views:{maincontent:{templateUrl:o.UnitViewsURL+"unitmedia.views.html",controller:"UnitMediaCtrl"}},data:c}).state("About",{url:"/about",views:{footer:i,navbar:r,maincontent:{templateUrl:"public/app/modules/aboutusapp/viewtemplates/aboutus.html",controller:"AboutListCtrl"}},data:c}).state("Photographer",{url:"/photographer",views:{navbar:r,footer:i,maincontent:{templateUrl:"public/app/modules/photographerapp/main/photographer-main.view.html"}}}).state("Photographer.Track",{url:"/track",views:{test:{templateUrl:"public/app/modules/photographerapp/tracker/photographer-track.view.html",controller:"PhotographerTrackCtrl"}}}).state("Photographer.UploadFloorPlan",{url:"/upload/floorplan",views:{test:{templateUrl:"public/app/modules/photographerapp/floorplanupload/floorplanupload.view.html",controller:"FloorPlanUploadCtrl"}}}).state("AdminPanel",{"abstract":!0,views:{footer:i,navbar:r,maincontent:{templateUrl:o.AdminPanelAppMainViewsURL+"AdminPanelMain.html",controller:"AdminPanelMainCtrl"}}}).state("AdminPanel.Main",{url:"/wizioadminpanel",views:{AdminTop:{templateUrl:o.AdminPanelAppViewsURL+"AdminSearchUnit.html",controller:"AdminSearchUnitCtrl"},AdminLeft:{templateUrl:o.AdminPanelAppViewsURL+"AdminUpdateUnit.html",controller:"AdminUpdateUnitCtrl"},AdminRight:{templateUrl:o.AdminPanelAppViewsURL+"AdminUpdateAssignment.html",controller:"AdminUpdateAssignmentCtrl"},AdminBottom:{templateUrl:o.AdminPanelAppViewsURL+"admincreateunit.html",controller:"AdminCreateUnitCtrl"},AdminSecondBottom:{templateUrl:o.AdminPanelAppViewsURL+"admincreateassignment.html",controller:"AdminCreateAssignmentCtrl"}}}).state("AdminPanel.AddVR",{url:"/wizioadminpanel/addvr",views:{AdminTop:{templateUrl:o.AdminPanelAppViewsURL+"addVRlist.html",controller:"AdminAddVrListCtrl"}}}).state("AdminPanel.ApiAccessTool",{url:"/wizioadminpanel/apiaccesstool",views:{AdminTop:{templateUrl:o.AdminPanelAppViewsURL+"adminapiaccesstool.view.html",controller:"AdminPanelApiAccessCtrl"}}}).state("Styleguide",{url:"/about/styleguide",views:{navbar:r,footer:i,maincontent:{templateUrl:"public/viewtemplates/public/styleguide.html"}},data:c}).state("Apiguide",{url:"/about/api",views:{navbar:r,footer:i,maincontent:{templateUrl:"public/app/modules/aboutusapp/viewtemplates/apiguide.view.html",controller:"ApiGuideCtrl"}},data:c}).state("SendResetEmail",{url:"/sendresetpassemail",views:{navbar:r,footer:i,maincontent:{templateUrl:o.AccountAuthViewsURL+"sendResetEmail.html",controller:"AuthResetPassCtrl"}},data:c}).state("UpdatePassword",{url:"/resetpassword/:token",views:{navbar:r,footer:i,maincontent:{templateUrl:o.AccountAuthViewsURL+"resetPassword.html",controller:"AuthResetPassCtrl"}},data:c}).state("Account",{url:"/account","abstract":!0,views:{navbar:r,footer:i,maincontent:{templateUrl:o.AccountViewsURL+"AccountMain.html",controller:"AccountMainCtrl"}},data:s}).state("Account.Create",{url:"/create",views:{AccountMain:{templateUrl:o.AccountAuthViewsURL+"/AuthCreateAcctForm.html",controller:"AuthCreateAcctCtrl"}},data:c}).state("Account.Dashboard",{url:"/dashboard",views:{AccountMain:{templateUrl:o.AccountDashboardViewsURL+"dashboard.view.html",controller:"DashboardCtrl"}}}).state("Account.Dashboard.Main",{"abstract":!0,views:{topHorizontal:{templateUrl:o.AccountDashboardViewsURL+"DashboardUserInfo.html",controller:"DashboardUserInfoCtrl"}}}).state("Account.Dashboard.Broker",{views:{topHorizontal:{templateUrl:o.AccountDashboardViewsURL+"DashboardUserInfo.html",controller:"DashboardUserInfoCtrl"},controlPanel:{templateUrl:o.AccountDashboardViewsURL+"DashboardControls.html",controller:"DashboardControlsCtrl"},midHorizontal:{templateUrl:o.AccountDashboardViewsURL+"DashboardLLUnitList.html",controller:"DashboardLLUnitListCtrl"}},data:s}).state("Account.Dashboard.PropertyManager",{views:{topHorizontal:{templateUrl:o.AccountDashboardViewsURL+"DashboardUserInfo.html",controller:"DashboardUserInfoCtrl"},controlPanel:{templateUrl:o.AccountDashboardViewsURL+"DashboardControls.html",controller:"DashboardControlsCtrl"},midHorizontal:{templateUrl:o.AccountDashboardViewsURL+"DashboardLLUnitList.html",controller:"DashboardLLUnitListCtrl"}},data:s}).state("Account.Dashboard.Tenant",{views:{topHorizontal:{templateUrl:o.AccountDashboardViewsURL+"DashboardUserInfo.html",controller:"DashboardUserInfoCtrl"},controlPanel:{templateUrl:o.AccountDashboardViewsURL+"DashboardControls.html",controller:"DashboardControlsCtrl"},favorites:{templateUrl:o.AccountDashboardViewsURL+"DashboardFavorites.html",controller:"DashboardFavoriteCtrl"},application:{templateUrl:o.AccountDashboardViewsURL+"DashboardApplications.html",controller:"DashboardApplicationCtrl"}},data:s}).state("Account.Pay",{url:"/pay",views:{AccountMain:{templateUrl:o.AccountDashboardViewsURL+"payment.html",controller:"PaymentCtrl"}}}).state("Account.Dashboard.Application",{url:"/application",views:{midHorizontal:{templateUrl:o.ApplicationFormViewsURL+"ApplicationDetails.html",controller:"ApplicationDetailCtrl"}},data:s}).state("Account.Profile",{url:"/profile",views:{AccountMain:{templateUrl:o.extProfileMainViewsURL+"extprofilemain.html",controller:"ExtProfileMainCtrl"}}}).state("Account.Profile.Create",{url:"/create",views:{ProfileMain:{templateUrl:o.extProfileViewsURL+"extprofileform.html",controller:"ExtProfileFormCtrl"}},data:s}).state("Account.Profile.Edit",{url:"/edit",views:{ProfileMain:{templateUrl:o.extProfileViewsURL+"extprofileform.html",controller:"ExtProfileFormCtrl"}},data:s}).state("sellerDashboard",{url:"/brokerInfo",views:{navbar:r,footer:i,maincontent:{templateUrl:"public/viewtemplates/public/brokerAddInfo.html",controller:"brokerAddInfoCtrl"}},data:s}).state("Application",{url:"/application",views:{navbar:r,footer:i,maincontent:{templateUrl:o.ApplicationViewsURL+"applicationmain.html"}},"abstract":!0,data:s}).state("Application.New",{url:"/new",views:{ApplicationPage:{templateUrl:o.ApplicationFormViewsURL+"applicationform.html",controller:"ApplicationFormCtrl"}}}).state("Application.Edit",{url:"/edit",views:{ApplicationPage:{templateUrl:o.ApplicationFormViewsURL+"applicationform.html",controller:"ApplicationFormCtrl"}}}).state("Unit",{url:"/unit",views:{navbar:r,footer:i,maincontent:{templateUrl:o.UnitMainViewsURL+"UnitMain.html",controller:"UnitMainCtrl"}},"abstract":!0}).state("Unit.Create",{url:"/create",views:{UnitMain:{templateUrl:o.UnitViewsURL+"UnitCreate.html",controller:"UnitCreateCtrl"}},data:s}).state("Unit.Details",{url:"/details/:id",views:{UnitMain:{templateUrl:o.UnitViewsURL+"unitDetailsPage.html",controller:"UnitDetailCtrl"}},data:c}).state("Listing",{url:"/listing",views:{navbar:r,footer:i,maincontent:{templateUrl:o.UnitMainViewsURL+"UnitMain.html",controller:"UnitMainCtrl"}},"abstract":!0}).state("Listing.Group",{url:"/:businessName/:id",views:{UnitMain:{templateUrl:o.UnitViewsURL+"unitDetailsPage.html",controller:"UnitDetailCtrl"}},data:c}).state("Listing.National",{url:"/national",views:{UnitMain:{templateUrl:o.UnitViewsURL+"NationalUnits.html",controller:"NationalCtrl"}},data:c}).state("Privacy",{url:"/privacy",onEnter:function(){window.open("http://www.google.com","_self")}}).state("Terms",{url:"/terms",onEnter:function(){window.open("http://www.google.com","_self")}}).state("AcceptableUse",{url:"/use",onEnter:function(){window.open("http://www.google.com","_self")}}).state("Unit.Display",{url:"/display",views:{UnitMain:{templateUrl:o.UnitViewsURL+"unitDisplay.html",controller:"UnitDisplayCtrl"}},data:c}).state("Unit.Claimlist",{url:"/claim/list",views:{UnitMain:{templateUrl:o.UnitViewsURL+"unitclaimlist.html",controller:"UnitClaimListCtrl"}},data:s}).state("Unit.Claim",{url:"/claim",views:{UnitMain:{templateUrl:o.UnitViewsURL+"UnitClaimForm.html",controller:"UnitClaimFormCtrl"}},data:l}).state("Unit.Edit",{url:"/edit",views:{UnitMain:{templateUrl:o.UnitViewsURL+"UnitClaimForm.html",controller:"UnitClaimFormCtrl"}},data:l}),t.otherwise("/"),n.interceptors.push(["$q","$location","$localStorage","$rootScope","$injector","TokenSvc",function(e,t,a,n,o,r){var i=0;return{request:function(e){return i++,e.headers=e.headers||{},e.headers.searchCheck?(delete e.headers.searchCheck,e):(r.getToken()&&(e.headers.Authorization=r.getToken()),e)},response:function(e){return i--,0===i&&n.$emit("siteLoadDone",{}),"undefined"!=typeof e.data.token&&null!==e.data.token&&e.data.token?(r.storeToken(e.data.token),o.get("$state").reload(),e):e},responseError:function(e){return 401!==e.status&&403!==e.status||(r.deleteToken(),alert("Authentication Failed")),e}}}]),a.html5Mode(!0)}]),angular.module("Directives").directive("closeModalDirv",[function(e){return{restrict:"AE",scope:!1,template:'<button type="button" class="close" data-dismiss="modal" data-toggle="modal" ng-click="closeModal()" aria-label="Close"><span aria-hidden="true">&times;</span></button>',link:function(e,t,a){}}}]).directive("currency",["$filter",function(e){return{require:"ngModel",scope:!1,link:function(t,a,n,o){o.$formatters.push(function(t){return e("currency")(t)}),o.$parsers.push(function(e){return e.replace(/[\$,]/,"")})}}}]),angular.module("Directives").directive("mapsDirv",["MapFct",function(e){return{restrict:"E",template:"<div></div>",replace:!0,link:function(t,a,n){var o,r;o=e.makeMap();var i=new google.maps.Map(document.getElementById(n.id),o);r=e.makeMarkers(i),t.openInfoWindow=function(e,t){e.preventDefault(),google.maps.event.trigger(t,"click")}}}}]),angular.module("Directives").directive("transitionVrPlayerDirv",["$state","LoadingSpinnerFct",function(e,t){return{restrict:"E",controller:"TransitionUnitMediaCtrl",templateUrl:"public/app/modules/unitapp/viewtemplates/transition.view.html",link:function(a,n,o){function r(e){return p=new THREE.PerspectiveCamera(100,v.parentElement.clientWidth/v.parentElement.clientHeight),p.position.x=.1,p.position.y=0,m=new THREE.OrbitControls(p),m.noPan=!0,m.noZoom=!0,m.autoRotate=!0,m.autoRotateSpeed=.5,m.addEventListener("change",i),g=new THREE.Scene,h=b?new THREE.WebGLRenderer:new THREE.CanvasRenderer,h.setSize(v.parentElement.clientWidth,v.parentElement.clientHeight),v.appendChild(h.domElement),v.addEventListener("mousewheel",u,!1),v.addEventListener("DOMMouseScroll",u,!1),window.addEventListener("resize",s,!1),c(),{resize:s}}function i(){h.render(g,p)}function s(){p.aspect=v.parentElement.clientWidth/v.parentElement.clientHeight,p.updateProjectionMatrix(),webGLRenderer.setSize(v.parentElement.clientWidth,v.parentElement.clientHeight)}function l(){THREE.ImageUtils.crossOrigin="";var e=new THREE.TextureLoader;e.crossOrigin="",e.load(a.photoUrl,function(e){e.minFilter=THREE.LinearFilter,f?(d(f),f=new THREE.Mesh(new THREE.SphereGeometry(100,60,40),new THREE.MeshBasicMaterial({map:e})),f.scale.x=-1,g.add(f),t.hide("vrPlayerLoader")):(f=new THREE.Mesh(new THREE.SphereGeometry(100,60,40),new THREE.MeshBasicMaterial({map:e})),f.scale.x=-1,g.add(f),t.hide("vrPlayerLoader"))})}function c(){requestAnimationFrame(c),i(),m.update()}function u(e){e.preventDefault(),e.wheelDeltaY?p.fov-=e.wheelDeltaY+.05:e.wheelDelta?p.fov-=.05*e.wheelDelta:e.detail&&(p.fov+=1*e.detail),p.fov=Math.max(20,Math.min(100,p.fov)),p.updateProjectionMatrix()}function s(){p.aspect=v.parentElement.clientWidth/v.parentElement.clientHeight,p.updateProjectionMatrix(),h.setSize(v.parentElement.clientWidth,v.parentElement.clientHeight),i()}function d(e){g.remove(e)}t.show("vrPlayerLoader"),a.noPan=!0;var p,m,g,h,f,v=document.getElementById("sphere"),b=function(){try{var e=document.createElement("canvas");return!(!window.WebGLRenderingContext||!e.getContext("webgl")&&!e.getContext("experimental-webgl"))}catch(t){return!1}}();e.current.name;a.$on("IMGLOAD",function(e){l()}),r(n),i(),a.$on("CHANGE",function(){l()})}}}]),angular.module("Directives").directive("newVrPhotoPlayerDirv",["$state",function(e){return{restrict:"E",controller:"UnitMediaCtrl",templateUrl:"LandingPage"===e.current.name?"public/app/modules/unitapp/viewtemplates/landingpagedemo.view.html":"Demo"===e.current.name?"public/app/modules/unitapp/viewtemplates/demo.views.html":"DemoOneBackBay"===e.current.name?"public/app/modules/unitapp/viewtemplates/demoOneBackBay.views.html":"DemoGreenStreet"===e.current.name?"public/app/modules/unitapp/viewtemplates/demoGreenStreet.views.html":"DemoWellington2Bed"===e.current.name?"public/app/modules/unitapp/viewtemplates/demoWellington2bed.view.html":"DemoWaterMarkOneBed"===e.current.name?"public/app/modules/unitapp/viewtemplates/demoWaterMarkOneBed.view.html":"DemoGreenWay0404"===e.current.name?"public/app/modules/unitapp/viewtemplates/demoGreenWay0404.view.html":"DemoGreenWay0503"===e.current.name?"public/app/modules/unitapp/viewtemplates/demoGreenWay0503.view.html":"DemoGreenWay0512"===e.current.name?"public/app/modules/unitapp/viewtemplates/demoGreenWay0512.view.html":"DemoGreenWay1401"===e.current.name?"public/app/modules/unitapp/viewtemplates/demoGreenWay1401.view.html":"DemoGreenWay1209"===e.current.name?"public/app/modules/unitapp/viewtemplates/demoGreenWay1209.view.html":"DemoGreenWay1707"===e.current.name?"public/app/modules/unitapp/viewtemplates/demoGreenWay1707.view.html":"DemoMetroMark04"===e.current.name?"public/app/modules/unitapp/viewtemplates/demoMetroMark04.view.html":"DemoMetroMark06"===e.current.name?"public/app/modules/unitapp/viewtemplates/demoMetroMark06.view.html":"DemoMetroMark12"===e.current.name?"public/app/modules/unitapp/viewtemplates/demoMetroMark12.view.html":"DemoMetroMark13"===e.current.name?"public/app/modules/unitapp/viewtemplates/demoMetroMark13.view.html":"DemoRiversEdgeB1"===e.current.name?"public/app/modules/unitapp/viewtemplates/demoRiversEdgeB1.view.html":"DemoRiversEdgeA2"===e.current.name?"public/app/modules/unitapp/viewtemplates/demoRiversEdgeA2.view.html":"DemoRiversEdgeA9"===e.current.name?"public/app/modules/unitapp/viewtemplates/demoRiversEdgeA9.view.html":"DemoStationLanding1"===e.current.name?"public/app/modules/unitapp/viewtemplates/demoStationLanding1.view.html":"DemoStationLanding1C"===e.current.name?"public/app/modules/unitapp/viewtemplates/demoStationLanding1C.view.html":"DemoStationLanding2"===e.current.name?"public/app/modules/unitapp/viewtemplates/demoStationLanding2.view.html":"DemoStationLanding24W"===e.current.name?"public/app/modules/unitapp/viewtemplates/demoStationLanding24W.view.html":"DemoStationLanding26E"===e.current.name?"public/app/modules/unitapp/viewtemplates/demoStationLanding26E.view.html":"DemoStationLandingStudioB"===e.current.name?"public/app/modules/unitapp/viewtemplates/demoStationLandingStudioB.view.html":"DemoEddyD"===e.current.name?"public/app/modules/unitapp/viewtemplates/demoEddyD.view.html":"DemoEddyBB"===e.current.name?"public/app/modules/unitapp/viewtemplates/demoEddyBB.view.html":"DemoEddyCC"===e.current.name?"public/app/modules/unitapp/viewtemplates/demoEddyCC.view.html":"DemoEddyK"===e.current.name?"public/app/modules/unitapp/viewtemplates/demoEddyK.view.html":"Externalapi"===e.current.name?"public/app/modules/unitapp/viewtemplates/transition.view.html":null,link:function(t,a,n){function o(e){return u=new THREE.PerspectiveCamera(100,h.parentElement.clientWidth/h.parentElement.clientHeight),u.position.x=.1,u.position.y=0,d=new THREE.OrbitControls(u),d.noPan=!0,d.noZoom=!0,d.autoRotate=!0,d.autoRotateSpeed=.5,d.addEventListener("change",r),p=new THREE.Scene,m=f?new THREE.WebGLRenderer:new THREE.CanvasRenderer,m.setSize(h.parentElement.clientWidth,h.parentElement.clientHeight),h.appendChild(m.domElement),h.addEventListener("mousewheel",c,!1),h.addEventListener("DOMMouseScroll",c,!1),window.addEventListener("resize",i,!1),l(),{resize:i}}function r(){m.render(p,u)}function i(){u.aspect=h.parentElement.clientWidth/h.parentElement.clientHeight,u.updateProjectionMatrix(),webGLRenderer.setSize(h.parentElement.clientWidth,h.parentElement.clientHeight)}function s(){THREE.ImageUtils.crossOrigin="";var e=new THREE.TextureLoader;e.crossOrigin="",e.load(t.photoUrl,function(e){e.minFilter=THREE.LinearFilter,g=new THREE.Mesh(new THREE.SphereGeometry(100,20,20),new THREE.MeshBasicMaterial({map:e})),g.scale.x=-1,p.add(g)})}function l(){requestAnimationFrame(l),r(),d.update()}function c(e){e.preventDefault(),e.wheelDeltaY?u.fov-=e.wheelDeltaY+.05:e.wheelDelta?u.fov-=.05*e.wheelDelta:e.detail&&(u.fov+=1*e.detail),u.fov=Math.max(20,Math.min(100,u.fov)),u.updateProjectionMatrix()}function i(){u.aspect=h.parentElement.clientWidth/h.parentElement.clientHeight,u.updateProjectionMatrix(),m.setSize(h.parentElement.clientWidth,h.parentElement.clientHeight),r()}t.noPan=!0;var u,d,p,m,g,h=document.getElementById("sphere"),f=function(){try{var e=document.createElement("canvas");return!(!window.WebGLRenderingContext||!e.getContext("webgl")&&!e.getContext("experimental-webgl"))}catch(t){return!1}}();e.current.name;t.$on("IMGLOAD",function(e){s()}),o(a),r(),t.$on("CHANGE",function(){s()})}}}]),angular.module("Models").factory("ApartmentModel",["$sessionStorage","$resource","$q","lodash","WizioConfig","UnitCreateSvc",function(e,t,a,n,o,r){function i(e,t,a,n,o,r,i,s,l,c,u,d,p,m,g,h,f,v,b,A,w,y,U,S,P,M,L,C,k,D,I,R,T,$,E,x,F,B,V){this.apartmentData={id:e||null,street:t||null,unitNum:a||null,neighborhood:n||null,locality:o||null,administrative_area_level_3:r||null,state:i||null,zip:s||null,beds:l||null,baths:c||null,livingSpaces:u||null,maxResidency:d||null,costPerMonth:p||null,renovated:m||null,ApartmentType:h||null,latitude:f||null,longitude:v||null,concatAddr:b||null,PropertyManagerId:U||null,route:S||null,laundry:P||null,elevator:M,gym:L,pool:C,parking:k,concierge:D,airconditioning:I,roofDeck:R,superIntendent:T,balcony:$,garage:E,CreatedById:x||null,UpdatedById:F||null,pubid:B,ActiveListings:V}}return i.prototype.api=function(){var e=this;return{create:function(e){t(o.baseAPIURL+"apartment").save(this.data,function(t){return e(t)})},update:function(e){t(o.baseAPIURL+"apartment/:id",{id:"@id"}).save({id:this.id},this.data,function(t){return e(t)})},getById:function(e){t(o.baseAPIURL+"apartment/:id",{
id:"@id"}).get({id:this.id},function(t){return e(t)})},findOrCreate:function(a,n){t(o.baseAPIURL+"apartment/claim/:action",{action:"@action"}).save(a,e,function(e){return n(e)})}}},i.prototype.getGeocodeData=function(e){var t=this.apartmentData;return a(function(e,a){r.parseGeocodeData(t.concatAddr,null,function(a,n){for(var o in n)"Longitude"===n[o]?apartment.Longitude=parseFloat(n[o]).toFixed(6):"Latitude"===n[o]?apartment.Latitude=parseFloat(n[o]).toFixed(6):t[o]=n[o];e("done")})})},i.prototype.duplicate=function(){var e={};for(var t in this.apartmentData)if(this.apartmentData.hasOwnProperty(t)){"id"!==t&&(e[t]=this.apartmentData[t])}return e},i.setDescription=function(){arguments.length>0&&(this.apartmentData.Descriptions=null,this.apartmentData.Descriptions.description=arguments.description)},i.prototype.concealAddress=function(){var e=Math.floor(this.apartmentData.concatAddr.charCodeAt(5)/19+4),t=Math.floor(this.apartmentData.concatAddr.charCodeAt(3)/19+4),a=parseInt(this.apartmentData.concatAddr.replace(/(^\d+)(.+$)/i,"$1")),n=a-e;a<15&&(n=1);var o=a+t,r=n.toString()+"-"+o.toString();this.apartmentData.concatAddr=r+this.apartmentData.concatAddr.replace(/^\d+/,"")},i.api=function(){return t(o.baseAPIURL+"apartment/:id",{id:"@id"})},i.claimApi=function(e,a){return t(o.baseAPIURL+"apartment/claim/finalize").save(e,function(e){return a(e)})},i.copyGeocodedData=function(e){var t=e.apartmentData;return new i(t.id,t.street,null,t.neighborhood,t.locality,t.administrative_area_level_3,t.state,t.zip,null,null,null,null,null,null,null,null,t.latitude,t.longitude,t.concatAddr,null,null,null,null,null)},i.build=function(e){return new i(e.id,e.street,e.unitNum,e.neighborhood,e.locality,e.administrative_area_level_3,e.state,e.zip,e.beds,e.baths,e.livingSpaces,e.maxResidency,e.costPerMonth,e.renovated,e.pets,e.ApartmentType,e.latitude,e.longitude,e.concatAddr,e.leaseType,e.leaseExpectedEnd,e.leaseActualEnd,e.PropertyManagerId,e.route,e.laundry,e.elevator,e.gym,e.pool,e.parking,e.concierge,e.airconditioning,e.roofDeck,e.superIntendent,e.balcony,e.garage,e.CreatedById,e.UpdatedById,e.pubid,e.ActiveListings)},i}]),angular.module("Models").factory("ApplicantModel",["$resource","WizioConfig",function(e,t){function a(e,t,n,o,r){return this instanceof a?(this.UserId=e,this.ApplicationId=t,this.owner=n,this.applicationStatus=o,void(this.applicantStatus=r)):new a(e,t,n,o,r)}return a.prototype.setStatus=function(e){var t=this.status;switch(e){case 1:t="Confirmed";break;case 2:t="Rejected";break;case 3:t="Pending"}},a.prototype.setStatus=function(e){switch(e){case 1:this.status="Approved";break;case 2:this.status="Rejected";break;case 1:this.status="Pending"}},a.prototype.setOwner=function(a){var n=this;return e(t.baseAPIURL+"application/applicant/setowner").save(n,function(e){return a(e)})},a.prototype["delete"]=function(a){var n=this;return e(t.baseAPIURL+"/application/applicant").remove(n,function(e){return a(e)})},a.build=function(e){return new a(e.UserId,e.ApplicationId,e.ApplicationOwner,e.applicationStatus,e.applicantStatus)},a}]),angular.module("Models").factory("ApplicationModel",["$resource","WizioConfig",function(e,t){function a(){for(var e=0;e<arguments.length;e++)this[e]=arguments[e]}a.prototype.api={base:function(){e(t.baseAPIURL+"application",{save:{method:"POST",isArray:!1}})},flex:function(){e(t.baseAPIURL+"application/:item/:action",{item:"@item",action:"@action"})},findByAppIds:function(){e(t.baseAPIURL+"application/ApplicationIds",{},{save:{method:"POST",isArray:!0}})},oneParam:function(){e(t.baseAPIURL+"/application/:param1",{param1:"@param1"},{save:{method:"POST",isArray:!0}})}};var n={base:e(t.baseAPIURL+"application",{save:{method:"POST",isArray:!1}}),flex:e(t.baseAPIURL+"application/:item/:action",{item:"@item",action:"@action"}),findByAppIds:e(t.baseAPIURL+"application/ApplicationIds",{},{save:{method:"POST",isArray:!0}}),oneParam:e(t.baseAPIURL+"/application/:param1",{param1:"@param1"},{save:{method:"POST",isArray:!0}})};return a.api=n,a}]),angular.module("Models").factory("AssignmentModel",["$resource","WizioConfig",function(e,t){function a(e,t){this.UserId=e,this.ApartmentId=t}return a.api=function(){return{base:e(t.baseAPIURL+"/assignment"),oneParam:e(t.baseAPIURL+"/assignment/:param1",{param1:"@param1"}),twoParam:e(t.baseAPIURL+"/assignment/:param1/:param2",{param1:"@param1",param2:"@param2"},{},{get:{method:"GET",isArray:!0}})}},a.build=function(e){return new Apartment(e.UserId,e.ApartmentId)},a}]),angular.module("Models").factory("BrokerageModel",["$q","$resource","WizioConfig",function(e,t,a){function n(e,t,a,n,o,r,i,s,l){this.id=e,this.businessName=t,this.licenseID=a,this.address=n,this.UserBrokers=o,this.ApartmentBrokerages=r,this.Listings=i,this.Leads=s,this.PropertyManagers=PropertyManager}return n.getAllBrokerages=function(){return e(function(e,n){t(a.baseAPIURL+"brokerage").query(null,function(t){return e(t)})})},n.savePartners=function(e){return new Promise(function(n,o){t(a.baseAPIURL+"brokerage/partners").save(e,function(e){return n(e)})})},n.getSharedApartments=function(e){return new Promise(function(n,o){t(a.baseAPIURL+"/brokerage/partners/:id",{id:"@id"}).query({id:e},function(e){return e})})},n}]),angular.module("Models").factory("BusinessModel",["$q",function(e){function t(e){this.businessName=e.businessName,this.siteURL=e.siteURL,this.stripe_cus_id=e.stripe_cus_id,this.purchaser_id=e.purchaser_id}var a={init:t};return a}]),angular.module("Models").factory("DescriptionModel",["$sessionStorage","$resource","lodash","TokenSvc","WizioConfig",function(e,t,a,n,o){function r(e,t,a){this.UserId=e||null,this.ApartmentId=t||null,this.description=a,this.upvotes=0,this.downvotes=0}return r.prototype.api=function(){return t(o.baseAPIURL+"description")},r.prototype.getAssociatonData=function(e){this.UserId=n.decode().id,e&&(this.ApartmentId=e)},r.prototype.duplicate=function(){var e={};for(var t in this.apartmentData)this.descriptionData.hasOwnProperty(t)&&(e[t]=this.descriptionData[t]);return e},r.build=function(e){return new r(e.UserId,e.ApartmentId,e.description)},r}]),angular.module("Models").factory("FavoriteModel",["$sessionStorage","$resource","lodash","WizioConfig",function(e,t,a,n){function o(e,t){this.UserId=e,this.ApartmentId=t}return o.api=function(){return t(n.baseAPIURL+"favorite")},o.findByUser=function(){return t(n.baseAPIURL+"favorite/findbyuser",{},{save:{method:"POST",isArray:!0}})},o.build=function(e){return new o(e.UserId,e.ApartmentId)},o}]),angular.module("Models").factory("FloorPlanModel",["$resource",function(e){}]),angular.module("Models").factory("LeaseModel",["$resource","$q","TokenSvc","FlexGetSetSvc","WizioConfig",function(e,t,a,n,o){function r(e,t,a,n,o,r,i,s,l,c,u,d,p,m,g,h,f,v,b,A,w,y,U,S,P,M){this.leaseData={id:e,dateStart:t,dateEnd:a,snowRemoval:n,smoking:o,pets:r,electricIncluded:i,heatIncluded:s,hotWaterIncluded:l,waterSewerIncluded:c,gasIncluded:u,cableIncluded:d,internetIncluded:p,trashRemoval:m,monthsRentFree:g,lastMonthsRentNeeded:h,firstMonthsRentNeeded:f,brokerFeeNeeded:v,newKeyFeeNeeded:b,securityDeposit:A,secDepositNeeded:w,monthlyRent:y,brokerFeeAmount:U,newKeyFeeAmount:S,Description:P,wifiIncluded:M}}function i(){for(var a="",n={},r={},s=1;s<i.arguments.length;s++)a+="/:param"+s.toString(),n["param"+s.toString()]="@param"+s.toString(),r["param"+s.toString()]=i.arguments[s];return t(function(t,n){var s=e(o.baseAPIURL+"lease"+a,r);s[i.arguments[0]](r,function(e){t(e)})})}function s(){for(var a="",n={},r={},l=s.Arguments.length-1,c=1;c<i.Arguments.length;c++)a+="/:param"+c.toString(),n["param"+c.toString()]="@param"+c.toString(),r["param"+c.toString()]=i.Arguments[c];return t(function(t,n){e(o.baseAPIURL+"lease"+a,r)[i.Arguments[0]](r,l,function(e){t(e)})})}function l(e){return t(function(t,a){1===l.arguments.length||("get"===e?i.apply(this,l.arguments).then(function(e){t(e)}):"post"===e?s.apply(this,l.arguments).then(function(e){t(e)}):console.error("improper request type made at lease"))})}return r.prototype.setAssociationData=function(){this.leaseData.UserId=a.decode().id,this.leaseData.PropertyManagerId=a.decode().PropertyManagerId,this.leaseData.ApartmentId=n.get("NewLeaseApartmentId")},r.prototype.create=function(t){var a=this;e(o.baseAPIURL+"lease").save(a,function(e){t(e)})},r.prototype.update=function(t){e(o.baseAPIURL+"lease/:id",{id:"@id"}).save({id:this.leaseData.id},this.leaseData,function(e){t(e)})},r.build=function(e){return new r(e.id,e.dateStart,e.dateEnd,e.snowRemoval,e.smoking,e.pets,e.electricIncluded,e.heatIncluded,e.hotWaterIncluded,e.waterSewerIncluded,e.gasIncluded,e.cableIncluded,e.internetIncluded,e.trashRemoval,e.monthsRentFree,e.lastMonthsRentNeeded,e.firstMonthsRentNeeded,e.brokerFeeNeeded,e.newKeyFeeNeeded,e.securityDeposit,e.secDepositNeeded,e.monthlyRent,e.brokerFeeAmount,e.newKeyFeeAmount,e.Description,e.wifiIncluded)},r.api=l,r}]),angular.module("Models").factory("MediaModel",["$resource","$stateParams","TokenSvc","WizioConfig",function(e,t,a,n){function o(e,t,a,n,o){this.link=e,this.type=t||null,this.title=a||null,this.UserId=n,this.ApartmentId=o}return o.prototype.saveMedia=function(t){var a=this;return e(n.baseAPIURL+"/media").save(a,function(e){return t(e)})},o.prototype.getAssociationData=function(){this.UserId=a.decode().id,this.ApartmentId=t.id},o.build=function(e){return new o(e.link,e.type,e.title,e.UserId,e.ApartmentId)},o}]),angular.module("Models").factory("ProfileModel",["$sessionStorage","$resource","lodash","WizioConfig",function(e,t,a,n){function o(e,t,a,n,o,r,i,s,l,c,u,d,p,m,g,h,f,v,b,A,w,y,U){this.UserId=e,this.currentEmployer1=t,this.currentEmployerLOE1=a,this.currentEmployerPosition1=n,this.currentEmployer2=o,this.currentEmployerLOE2=r,this.currentEmployerPosition2=i,this.creditScore=s,this.pets=l,this.dateOfBirth=c,this.maritalStatus=u,this.emergencyContactName=d,this.emergencyContactPhone=p,this.emergencyContactRelationship=m,this.phoneNumber=g,this.currentAddress=h,this.currentPMName=f,this.currentPMContact=v,this.employmentStatus=b,this.studentStatus=A,this.studentSchool=w,this.studentType=y,this.studentMajor=U}o.prototype.api=function(){return t(n.baseAPIURL+"profile/:id",{id:"@id"})};var r={base:t(n.baseAPIURL+"profile"),oneParam:t(n.baseAPIURL+"profile/:id",{id:"@id"})};return o.api=r,o.build=function(e){return new o(e.UserId,e.currentEmployer1,e.currentEmployerLOE1,e.currentEmployerPosition1,e.currentEmployer2,e.currentEmployerLOE2,e.currentEmployerPosition2,e.creditScore,e.pets,e.dateOfBirth,e.maritalStatus,e.emergencyContactName,e.emergencyContactPhone,e.emergencyContactRelationship,e.phoneNumber,e.currentAddress,e.currentPMName,e.currentPMContact,e.employmentStatus,e.studentStatus,e.studentSchool,e.studentType,e.studentMajor)},o}]),angular.module("Models").factory("SearchModel",["$resource","WizioConfig",function(e,t){function a(e,t,a,n){this.unitInstance=e,this.topLevelType=t||null,this.filters=a||null,this.User=n||null}return a.prototype.send=function(a){return e(t.baseAPIURL+"search/new",{},{save:{method:"POST",isArray:!0}}).save(this,function(e){return a(e)})},a.build=function(e){return new a(e.UnitInstance,e.filters,e.User)},a}]),angular.module("Models").factory("UserModel",[function(){function e(e){this.firstName=e.firstName,this.lastName=e.lastName,this.email=e.email,this.password=e.password,this.accountType=e.accountType}var t={init:e};return t}]),angular.module("AccountApp").controller("AccountCreationFormCtrl",["$scope","$state","SubscriptionFct",function(e,t,a){e.signupInvite="Signup.Invite"===t.current.name,e.submit=function(){if(e.user.password!=e.user.passwordConfirm)return void alert("Passwords do not match!");var n=e.user;if(console.dir(t.params),e.invitationSignup)n.invitePubId=t.params.invitePubId;else var o=e.chosenSubscription;a.post.saveNewUser(n,o).then(function(e){t.go("Account.Dashboard")})}}]),angular.module("AccountApp").directive("accountCreationFormDir",function(){return{templateUrl:"public/app/modules/accountcreationapp/accountcreation.form.html",controller:"AccountCreationFormCtrl",scope:{user:"=user"},restrict:"E"}}),angular.module("AccountApp").factory("AccountCreationFormFct",["$scope",function(e){}]),angular.module("AmazonS3UploadApp").controller("AmazonS3UploadCtrl",["$scope","$http","$state",function(e,t,a){e.sizeLimit=5368709120,e.uploadProgress=0,e.creds={},e.upload=function(){AWS.config.update({accessKeyId:"AKIAIPGWV5OFR73P3VLQ",secretAccessKey:"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"}),AWS.config.region="us-east-1";var t=new AWS.S3({params:{Bucket:"wiziouservideos"}});if(e.file){var a=Math.round(parseInt(e.file.size));if(a>e.sizeLimit)return toastr.error("Sorry, your attachment is too big. <br/> Maximum "+e.fileSizeLabel()+" file attachment allowed","File Too Large"),!1;var n=e.uniqueString()+"-"+e.file.name,o={Key:n,ContentType:e.file.type,Body:e.file,ServerSideEncryption:"AES256"};t.putObject(o,function(t,a){return t?(toastr.error(t.message,t.code),!1):(toastr.success("File Uploaded Successfully","Done"),void setTimeout(function(){e.uploadProgress=0,e.$digest()},1e4))}).on("httpUploadProgress",function(t){e.uploadProgress=Math.round(t.loaded/t.total*100),e.$digest()})}else toastr.error("Please select a file to upload")},e.fileSizeLabel=function(){return Math.round(e.sizeLimit/1073741824)+"GB"},e.uniqueString=function(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=0;a<8;a++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}}]),angular.module("AmazonS3UploadApp").directive("file",function(){return{restrict:"AE",scope:{file:"@"},link:function(e,t,a){t.bind("change",function(t){var a=t.target.files,n=a[0];e.file=n,e.$parent.file=n,e.$apply()})}}}),angular.module("AdminPanelApp").factory("AdminPanelResource",["$resource","WizioConfig",function(e,t){return e(t.baseAPIURL+"admin/:item/:action",{item:"@item",action:"@action"})}]),angular.module("InfoApp").controller("InfoAppDashboardCtrl",["$scope","$resource","WizioConfig","lodash",function(e,t,a,n){t(a.baseAPIURL+"info").get(function(t){var a={};n.forEach(t.byNeighborhood,function(e,t){a.amount=e.length,a.neighborhood=t,a[t]={amount:e.length,neighborhood:t}}),e.sortedNeighborhoods=n.sortBy(a,"amount"),e.data=t})}]),angular.module("AccountApp").controller("LoadingSpinnerCtrl",["$scope",function(e){}]),angular.module("AccountApp").directive("loadingSpinnerDir",function(){return{templateUrl:"public/app/modules/loading-spinner-app/loading-spinner.view.html",controller:"LoadingSpinnerCtrl",scope:{},restrict:"EA"}}),angular.module("AccountApp").factory("LoadingSpinnerFct",[function(){function e(e){document.getElementById(e).style.visibility="visible"}function t(e){setTimeout(function(){document.getElementById(e).style.visibility="hidden"},100)}function a(e){return"visible"===document.getElementById(e).style.visibility}return{show:e,hide:t,isSpinning:a}}]),angular.module("SearchApp").controller("SearchAppCtrl",["$stateParams","$sessionStorage","$scope",function(e,t,a){a.apartments=e.apartments,t.apartmentSearch=e.apartments}]),angular.module("UnitApp").factory("UnitResource",["$resource","WizioConfig",function(e,t){return e(t.baseAPIURL+"apartment/:id",{id:"@id"})}]),angular.module("UnitApp").service("UnitCreateSvc",["lodash","FlexGetSetSvc","ApartmentClaimGetSetSvc",function(e,t,a){function n(t,a){var n=e.filter(a.data.results,function(e){return e.formatted_address===t});return 0===n.length&&(n=e.filter(a.data.results,function(e){return e["formatted address"]===t})),0!==n.length&&n}function o(e){return"undefined"!=typeof e[0].long_name?e[0].long_name:"undefined"!=typeof e[0].short_name?e[0].short_name:"na"}function r(t,a){function n(t){return e.filter(l,function(e){return e.types[0]===t})}function r(e,t){e&&e.length>0&&(i[t]=o(e))}var i={};if(i.topLevelType=t[0].types[0],a)for(var s in a)i[s]=a[s];var l=t[0].address_components;i.concatAddr=t[0].formatted_address;var c=n("street_number"),u=n("route"),d=n("locality"),p=n("administrative_area_level_3"),m=n("administrative_area_level_1"),g=n("neighborhood"),h=n("postal_code");return c&&c.length>0&&u.length>0&&(i.street=o(c)+" "+o(u)),r(u,"route"),r(g,"neighborhood"),r(d,"locality"),r(p,"administrative_area_level_3"),r(m,"state"),r(h,"zip"),isNaN(t[0].geometry.location.lat)&&(i.latitude=t[0].geometry.location.lat().toFixed(6),i.longitude=t[0].geometry.location.lng().toFixed(6)),i}var i=function(e,t){var a=new google.maps.Geocoder;a.geocode({address:e},function(e,a){return a==google.maps.GeocoderStatus.OK?t(null,e):t({message:"No Google API Address found"},null)})},s=function(n,o){var r,i=null,s=$state.current.name;"Unit.Claim"==s&&(r=a.get()),"Unit.Claim"===s&&0===r.length&&a.get("Staging-ApartmentClaims"),gooogleAPIDataRaw=t.get();var l=e.values(r.data.results.types);return 1===l.length?(i=l[0],o(i)):o(i)},l=function(e,a,o){var s=t.get(),l=!1;if(0!==s.length&&(l=n(e,s)),l!==!1){var c=r(l,a);return o(null,c)}i(e,function(e,t){if(e)return o("no address info found",null);var n=r(t,a);return o(null,n)})};return{getGeocodeData:i,addressSearchType:s,parseGeocodeData:l,lodashParseAPIData:r}}]),angular.module("AboutUsApp").controller("AboutListCtrl",["$scope",function(e){e.members=[{name:"Cameron Billings",title:"CTO",picture:"cameronbillings.png",twitter:"CamBillings_",linkedin:"cameronbillings",email:"cameron@wizio.co"},{name:"Devon Grodkiewicz",title:"CEO",picture:"devongrodkiewicz.jpg",twitter:"dsgrod",linkedin:"dsgrod",email:"devon@wizio.co"},{name:"Trent Duffy",title:"Co-Founder and Web Developer",picture:"trentduffy.png",twitter:"trentolol",linkedin:"trentduffy",email:"trent@wizio.co"}]}]),angular.module("AboutUsApp").controller("ApiGuideCtrl",["$scope","ModalBuilderFct",function(e,t){e.triggerModal=function(){var a="public/app/modules/aboutusapp/viewtemplates/apirequest.modal.view.html";t.buildComplexModal("md",a,"ApiRequestModalCtrl",e.apirequest).then(function(e){})}}]),angular.module("AboutUsApp").controller("ApiRequestModalCtrl",["$scope","$uibModalInstance","$resource","WizioConfig",function(e,t,a,n){e.submit=function(){a(n.baseAPIURL+"vr/requestmoreinfo").save({apirequest:e.apirequest},function(e){alert("Thanks for contacting us! We'll get back to you as soon as we can."),t.close()})},e.closeModal=function(){t.close()}}]),angular.module("AccountApp").controller("AccountMainCtrl",["$scope",function(e){}]),angular.module("AccountApp").controller("TermsAndServicesCtrl",["$scope","$uibModalInstance",function(e,t){e.pass=!1,e.allChecked=!1,e.showContinue=function(){var t=document.getElementById("terms").checked,a=document.getElementById("next").checked,n=document.getElementById("last").checked;document.getElementById("contbutton");t&&a&&n?e.allChecked=!0:e.allChecked=!1},e.ok=function(){t.close("success")}}]),angular.module("AccountApp").controller("UserInfoCtrl",["$scope","TokenSvc",function(e,t){e.accountInfo=t.decode()}]),angular.module("AccountApp").directive("userInfoDir",function(){return{templateUrl:"public/app/modules/accountapp/user-info-app/user-info.view.html",controller:"UserInfoCtrl",scope:{test:"@"},restrict:"E"}}),angular.module("AccountApp").factory("UserInfoFct",["$q","WizioConfig",function(e,t){}]),angular.module("AccountApp").controller("ActiveListingListCtrl",["$scope",function(e){new Clipboard(".clipboard"),e.windowLocationOrigin=window.location.origin,e.openInNewPage=function(t){window.open(e.windowLocationOrigin+"/tour/"+t,"_blank")}}]),angular.module("AccountApp").directive("activeListingListDir",function(){return{templateUrl:"public/app/modules/activelistingsapp/list/activelisting.list.view.html",controller:"ActiveListingListCtrl",scope:{activelistings:"=activelistings"},restrict:"EA"}}),angular.module("AdminPanelApp").controller("AdminAddVrListCtrl",["$scope","$resource","ModalSvc","WizioConfig",function(e,t,a,n){function o(e,t,a){return{backdrop:!0,keyboard:!0,modalFade:!0,size:"lg",templateUrl:e,controller:t,resolve:{modalData:function(){return a}}}}t(n.baseAPIURL+"admin/units").query(null,function(t){e.apartments=t}),e.selectUnit=function(t){e.apartments[t].selected=!0,setTimeout(function(){e.apartments[t].selected=!1},400);var r=o(n.AdminPanelAppViewsURL+"createmedia.form.html","CreateMediaFormCtrl",{apartment:e.apartments[t]});a.showModal(r,{}).then(function(e){$uibModalInstance.close()})}}]),angular.module("AdminPanelApp").controller("AdminPanelApiAccessCtrl",["$scope","$resource","WizioConfig","TokenSvc",function(e,t,a,n){function o(t,a,n){null!==t.Apiaccess?i.update(t.Apiaccess,function(e){}):r.save(t,function(t){"number"==typeof t.BrokerageId?e.brokerages[a].Apiaccess=t:e.PropertyManagers[a].Apiaccess=t})}var r=t(a.baseAPIURL+"vrapi"),i=t(a.baseAPIURL+"vrapi",null,{update:{method:"PUT"}}),s=Math.floor(10*Math.random()),l=["Devon is the man!","Devon, you are the key to my heart","Keep killing it Devon!","Devon, you are... a star!","Devon moving us along!","Is that an owl behind you?","Hi Devon. You are stellar","Devon, Wizio loves you!","DEVVVVVVOOOOOONNNNNNNNNNN","GET IT DEVON GET IT!"];e.devonRocks=l[s],r.query(function(t){null!==t[0].BrokerageId?(e.brokerages=t[0],e.PropertyManagers=t[1]):(e.brokerages=t[1],e.PropertyManagers=t[0])}),e.updateApiAccess=o}]),angular.module("AdminPanelApp").controller("AdminCreateAssignmentCtrl",["$scope","SmartSearchSvc","UnitResource","UnitCreateSvc","TokenSvc","AssignmentResource",function(e,t,a,n,o,r){e.getLocation=function(e){return t.smartSearch(e)},e.toggleMin=function(){e.minDate=e.minDate?null:new Date},e.toggleMin(),e.maxDate=new Date(2020,5,22),e.open=function(t){e.status.opened=!0},e.setDate=function(t,a,n){e.dt=new Date(t,a,n)},e.dateOptions={formatYear:"yy",startingDay:1},e.status={opened:!1},e.sizeLimit=5368709120,e.uploadProgress=0,e.creds={},e.propertymanager={},e.apartment={},e.upload=function(){n.parseGeocodeData(e.apartmentAddress,e.apartment,function(t,n){n.propertyManagerInfo=e.propertymanager,a.save(n,function(t,a){var n=t;AWS.config.update({accessKeyId:"AKIAIPGWV5OFR73P3VLQ",secretAccessKey:"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"}),AWS.config.region="us-east-1";var i=new AWS.S3({params:{Bucket:"wiziouservideos"}});if(e.file){var s=Math.round(parseInt(e.file.size));if(s>e.sizeLimit)return toastr.error("Sorry, your attachment is too big. <br/> Maximum "+e.fileSizeLabel()+" file attachment allowed","File Too Large"),!1;var l=o.decode(),c=e.apartmentAddress;c=c.replace(/[^0-9a-zA-Z]/g,"");var u=l.email+"-"+c+Math.floor(80*Math.random()+10),d={Key:u,ContentType:e.file.type,Body:e.file,ServerSideEncryption:"AES256"};i.putObject(d,function(t,a){if(t)return toastr.error(t.message,t.code),$uibModalInstance.dismiss(),!1;toastr.success("File Uploaded Successfully","Done");var o={UserId:l.id,ApartmentId:n.id,S3VideoId:u,youtubeId:e.assignment.youtubeId};r.save(o,function(e,t){}),setTimeout(function(){e.uploadProgress=0,e.$digest()},1e4),$uibModalInstance.close("ok")}).on("httpUploadProgress",function(t){e.uploadProgress=Math.round(t.loaded/t.total*100),e.$digest()})}else toastr.error("Please select a file to upload")})})},e.fileSizeLabel=function(){return Math.round(e.sizeLimit/1073741824)+"GB"},e.uniqueString=function(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=0;a<8;a++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}}]),angular.module("AdminPanelApp").controller("AdminCreateUnitCtrl",["$scope","$sessionStorage","$rootScope","$state","lodash","UnitResource","SmartSearchSvc","UnitCreateSvc","FlexGetSetSvc",function(e,t,a,n,o,r,i,s,l){e.$storage=t,e.numBeds=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],e.getLocation=function(e){return i.smartSearch(e)},e.addUnit=function(){var t=e.apartmentAddress,a={unitNum:e.unitNum,beds:e.beds,baths:e.baths,livingSpaces:e.livingRooms,maxResidency:e.maxResidency,costPerMonth:e.costPerMonth,renovated:e.renovated,pets:e.petPolicy,youtubeVRID:e.youtubeVRID};s.parseGeocodeData(t,a,function(e,t){r.save(t,function(e,t){n.go("Account.Dashboard.Main")})})}}]),angular.module("AdminPanelApp").controller("AdminSearchUnitCtrl",["$scope","SmartSearchSvc",function(e,t){e.filters={beds:null,baths:null,minPrice:null,maxPrice:null},e.search=function(){},e.getLocation=function(e){return t.smartSearch(e)}}]),angular.module("AdminPanelApp").controller("AdminUpdateAssignmentCtrl",["$scope","AdminPanelResource",function(e,t){e.data={},e.submitEdits=function(){t.save({item:"assignment",action:"update"},e.data,function(e,t){})}}]),angular.module("AdminPanelApp").controller("AdminUpdateUnitCtrl",["$scope","lodash","AdminPanelResource",function(e,t,a){e.apartment=null,e.numBeds=[0,1,2,3,4,5,6],e.numBaths=[0,1,2,3,4],e.numLivingrooms=[0,1,2,3],e.maxResidency=[0,1,2,3,4,5,6,7,8,9,10],e.renovatedSelect=["No","Yes","Unsure"],e.petPolicy=["Dogs Only","Cats Only","Dogs & Cats","Small Animals","None"],e.$on("updateUnitData",function(t,a){e.apartment=a[0]}),e.editUnit=function(){e.apartmentAddress,{unitNum:e.apartment.unitNum,beds:e.apartment.beds,baths:e.apartment.baths,livingSpaces:e.apartment.livingSpaces,maxResidency:e.apartment.maxResidency,costPerMonth:e.apartment.costPerMonth,renovated:e.apartment.renovated,pets:e.apartment.petPolicy,youtubeVRID:e.apartment.youtubeID};a.save({item:"unit",action:"update"},e.apartment,function(e,t){$state.go("Account.Dashboard.Main")})}}]),angular.module("AdminPanelApp").controller("CreateMediaFormCtrl",["$scope","$uibModalInstance","$resource","modalData","WizioConfig",function(e,t,a,n,o){function r(){e.mediaArray.push({UserId:1,ApartmentId:e.apartment.id})}function i(t){e.mediaArray.splice(t,1)}function s(){a(o.baseAPIURL+"admin/media").save(e.mediaArray,function(e){t.close(e)})}e.apartment=n.apartment,e.mediaArray=[],e.closeModal=function(){t.dismiss()},e.fun={createMediaObj:r,deleteMediaObj:i,sendMedia:s}}]),angular.module("AdminPanelApp").controller("AdminPanelMainCtrl",["$scope",function(e){e.$on("passToSiblingAdminApp",function(t,a){e.$broadcast(a.name,a.data)})}]),angular.module("ApplicationApp").factory("ApplicationResource",["$resource","WizioConfig",function(e,t){return{base:e(t.baseAPIURL+"application",{},{save:{method:"POST",isArray:!1}}),flex:e(t.baseAPIURL+"application/:item/:action",{item:"@item",action:"@action"}),findByAppIds:e(t.baseAPIURL+"application/ApplicationIds",{},{save:{method:"POST",isArray:!0}})}}]),angular.module("AccountApp").controller("ChangePasswordCtrl",["$scope","ChangePasswordFct",function(e,t){e.changePassword=function(){t.api.update.password().then(function(e){})["catch"](function(e){})}}]),angular.module("AccountApp").directive("changePassword",function(){return{templateUrl:"public/app/modules/change-password-app/change-password-button/change-password.view.html",controller:"ChangePasswordCtrl",scope:{changePassword:"=changePassword"},restrict:"EA"}}),angular.module("AccountApp").controller("ChangePasswordEmailFormCtrl",["$scope","ChangePasswordFct",function(e,t){e.forgotPassword=function(){t.api.get.email(e.passwordResetEmail).then(function(e){})["catch"](function(e){})}}]),angular.module("AccountApp").directive("changePasswordEmailFormDir",function(){return{templateUrl:"public/app/modules/change-password-app/change-password-email-form/change-password-email-form.view.html",controller:"ChangePasswordEmailFormCtrl",scope:{},restrict:"EA"}}),angular.module("AccountApp").controller("ChangePasswordFormCtrl",["$scope",function(e){}]),angular.module("AccountApp").directive("changePasswordFormDir",function(){return{templateUrl:"public/app/modules/change-password-app/change-password-form/change-password.form.view.html",controller:"ChangePasswordCtrl",scope:{},restrict:"EA"}}),angular.module("AccountApp").factory("ChangePasswordFct",[function(){var e={get:{},post:{},update:{},"delete":{}};return{api:e}}]),angular.module("AccountApp").factory("ChangePasswordFct",["WizioConfig","$q","$resource",function(e,t,a){function n(n){return t(function(t,o){a(e.baseAPIURL+"user/password/:email").get({email:n}).$promise.then(function(e){return t(e)})})}function o(n){return t(function(t,o){a(e.baseAPIURL+"user/password",{update:{method:"PUT"}}).update(n).$promise.then(function(e){t(e)})["catch"](function(e){})})}var r={get:{email:n},post:{},update:{password:o},"delete":{}};return{api:r}}]),angular.module("FooterApp").controller("FooterCtrl",["$rootScope","$scope","$state","$http","$uibModal","AuthFct","SmartSearchSvc","WizioConfig","ModalBuilderFct",function(e,t,a,n,o,r,i,s,l){t.goToLogin=function(){a.go("Login")},t.getLocation=function(e){return i.smartSearch(e)},t.logout=function(e){r.logout()},t.getLocation=function(e){return i.smartSearch(e)},t.createUnit=function(){a.go("Unit.Create")},t.goHome=function(){a.go("LandingPage")},t.goAbout=function(){a.go("About")},t.goAccountCreate=function(){l.buildComplexModal("md","/public/app/modules/accountapp/termsandservices/termsandservices.view.html","TermsAndServicesCtrl",null).then(function(e){"success"===e&&l.buildComplexModal("md","public/app/modules/accountapp/auth2app/views/signupmodal.view.html","SignupFormCtrl",null).then(function(e){})})},t.goAccountDashboard=function(){a.go("Account.Dashboard.Main")}}]),angular.module("LandingPageApp").controller("LandingPageCtrl",["$scope","$state","$resource","LandingPageFct","SmartSearchSvc","SearchFct","WizioConfig","ModalSvc","ModalBuilderFct","UnitMapFct","AuthFct",function(e,t,a,n,o,r,i,s,l,c,u){e.data={},e.mapViewSelected=!1,e.filters={beds:null,baths:null,minPrice:null,maxPrice:null};var d=null;e.userIsLoggedIn=u.isLoggedin(),e.goToAccountPage=function(){t.go("Account.Dashboard")},e.toggleMapView=function(){d?e.mapViewSelected=!e.mapViewSelected:n.getUnitsForLandingPageMap().then(function(t){var a=c.createMap("mapLP");c.addMapPinsToMap(t,a),e.mapViewSelected=!e.mapViewSelected,d=t})["catch"](function(e){alert(e)})},e.openTermsOfServicesModal=function(){l.buildComplexModal("md","/public/app/modules/accountapp/termsandservices/termsandservices.view.html","TermsAndServicesCtrl",null).then(function(e){"success"===e&&l.buildComplexModal("md","public/app/modules/accountapp/auth2app/views/signupmodal.view.html","SignupFormCtrl",null).then(function(e){})})},e.goToLogin=function(){var e=i.AccountAuthViewsURL,t=p(e+"Login.html","AuthLoginModalCtrl");s.showModal(t,{}).then(function(e){})};var p=function(e,t,a){return{backdrop:!0,keyboard:!0,modalFade:!0,templateUrl:e,controller:t,animation:!1,resolve:{data:function(){return a}}}};e.getLocation=function(e){return o.smartSearch(e)},e.search=function(){r.search({concatAddr:e.data.searchString},e.filters,function(e){t.go("Unit.Display")})}}]),angular.module("LandingPageApp").factory("LandingPageFct",["$resource","$q","WizioConfig",function(e,t,a){function n(){return t(function(t,n){e(a.baseAPIURL+"apartment/landingpage/mapunits").query(function(e){e?t(e):n("error retrieving data")})})}return{getUnitsForLandingPageMap:n}}]),angular.module("NavbarApp").controller("NavbarCtrl",["$rootScope","$location","$scope","$state","$http","$uibModal","$sessionStorage","ApartmentModel","SearchModel","SearchFct","AuthFct","SmartSearchSvc","ModalSvc","WizioConfig","DashboardFactory",function(e,t,a,n,o,r,i,s,l,c,u,d,p,m,g){a.isCollapsed=!1,a.onLandingPage="LandingPage"===n.current.name,a.filters={beds:null,baths:null,minPrice:null,maxPrice:null};var h=function(e,t,a){return{backdrop:!0,keyboard:!0,modalFade:!0,templateUrl:e,controller:t,animation:!1,resolve:{data:function(){return a}}}};a.isActive=function(e){return e===t.path()},"LandingPage"===n.current.name?a.landingPageStyle={position:"absolute"}:a.landingPageStyle={},a.goToLogin=function(){var e=m.AccountAuthViewsURL,t=h(e+"Login.html","AuthLoginModalCtrl");p.showModal(t,{}).then(function(e){})},a.search=function(){var e={concatAddr:a.searchString};c.search(e,a.filters,function(e){n.go("Unit.Display")})},a.getLocation=function(e){return d.smartSearch(e)},a.logout=function(e){u.logout()},a.createUnit=function(){n.go("Unit.Create")},a.goHome=function(){n.go("LandingPage")},a.goAbout=function(){n.go("About")},a.goBlog=function(e){},a.signup=function(){
var e=h("public/app/modules/accountapp/auth2app/views/signupmodal.view.html","SignupFormCtrl");p.showModal(e,{}).then(function(e){})},a.goAccoutCreate=function(){var e=m.AccountAuthViewsURL,t=h(e+"AccountTypeModal.html","AccountTypeModalCtrl"),n=h(e+"AuthCreateAcctForm.html","AuthCreateAcctModalCtrl","Tenant"),o=h(e+"AuthCreateAcctForm.html","AuthCreateAcctModalCtrl","PropertyManager"),r=h(e+"Login.html","AuthLoginModalCtrl");p.showModal(t,{}).then(function(e){"tenantSignup"===e?p.showModal(n,{}).then(function(e){if("login"===e)p.showModal(r,{}).then(function(e){});else{if("backStep"!=e)return;a.goAccoutCreate()}}):"propertyManagerSignup"===e&&p.showModal(o,{}).then(function(e){"login"===e&&p.showModal(r,{}).then(function(e){})})})},a.goAccountDashboard=function(){g.routeToAccount()}}]),angular.module("PhotographerApp").controller("FloorPlanUploadCtrl",["$scope","$resource","WizioConfig","$q","LoadingSpinnerFct","SmartSearchSvc","$uibModalInstance","TokenSvc",function(e,t,a,n,o,r,i,s){function l(e){return new n(function(t,a){var n=document.getElementById("file-chooser"),o=n.files[0];if(o){var r={Bucket:"equirect-photos",Key:e,ContentType:o.type,Body:o};d.putObject(r,function(e,a){results.innerHTML=e?"ERROR!":"UPLOADED.",t(a)})}else a("Could not reach S3 - Please yell at Cameron")})}function c(){o.show("floorplanUpload"),e.formSubmitted=!0;var a=document.getElementById("file-chooser"),n=!1;a.files[0]||(n=!0),t(u+"unit").save({apartmentAddress:e.apartment.address,floorPlanModel:e.apartment.floorPlanModel,user:s.decode(),noFloorPlan:n},function(t){if(t.message)return alert("Apartment already created! Search for this apartment in your account's search bar, or search for it after selecting Modify Existing Tours on your account page"),void o.hide("floorplanUpload");var a=t.SubscriptionApartment.pubid+"/floorplan.png";return e.noFloorPlanChkBox?(o.hide("floorplanUpload"),e.formSubmitted=!1,alert("Unit created without a floorplan. Please click ok to continue."),void i.close("finished")):void l(a).then(function(t){o.hide("floorplanUpload"),e.formSubmitted=!1,alert("finished"),i.close("finished")})["catch"](function(t){alert(t),e.formSubmitted=!1})})}var u=a.baseAPIURL;e.noFloorPlanChkBox=!1,e.formSubmitted=!1,console.dir(s.decode()),e.apartment={address:null,floorPlanModel:null},e.getLocation=function(e){return r.smartSearch(e)},AWS.config.update({accessKeyId:"AKIAJ3OKI45M7I25XVNQ",secretAccessKey:"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"});var d=new AWS.S3({endpoint:"https://cdn.wizio.co",s3BucketEndpoint:!0,region:"us-east-1"});e.closeModal=function(){i.close("skip")},e.functions={saveForm:c}}]),angular.module("AccountApp").directive("floorPlanUploadFormDir",function(){return{templateUrl:"public/app/modules/photographerapp/floorplanupload/floorplanupload.view.html",controller:"FloorPlanUploadCtrl",scope:{},restrict:"EA"}}),angular.module("PhotographerApp").controller("PhotographerMainCtrl",["$scope",function(e){}]),angular.module("PhotographerApp").controller("PhotographerTrackCtrl",["$scope",function(e){function t(){var t=Object.create(a);e.media.push(t)}var a={title:"",apartmentNumber:"",floorPlan:"",photoType:"",recordedTime:""};e.media=[a],e.buttons={addMedia:t}}]),angular.module("Directives").directive("uploadPinDirv",["$resource","WizioConfig",function(e,t){return{restrict:"E",scope:{pin:"="},replace:!0,templateUrl:"public/app/modules/photographerapp/upload/pin.directive.view.html",link:function(e,t,a){var n;n=e.pin,console.dir(t)}}}]),angular.module("PhotographerApp").controller("RemovePinModalCtrl",["$scope","modalData","$uibModalInstance",function(e,t,a){e.buttonClick=function(e){return a.close(e)}}]),angular.module("UploadPageApp").controller("UploadPageCtrl",["$scope","$resource","WizioConfig","ModalBuilderFct","lodash","$uibModalInstance","TokenSvc",function(e,t,a,n,o,r,i){function s(n){console.dir(n),e.selectedFloorplan="https://cdn.wizio.co/"+n.unit.SubscriptionApartmentPubId+"/floorplan.png",e.selectedSubscriptionApartmentPubId=n.unit.SubscriptionApartmentPubId,e.displayNoFloorplanMessage=!e.selectedFloorplan,e.selectedUnit=n.unit,e.showAmenityButton=!0;var o=i.decode().Subscriptions[0].pubid,r=n.unit.SubscriptionApartmentPubId;t(a.baseAPIURL+"subscriptionapartment/:SubscriptionPubId/:SubscriptionApartmentPubId",{SubscriptionPubId:"@SubscriptionPubId",SubscriptionApartmentPubId:"@SubscriptionApartmentPubId"}).query({SubscriptionPubId:o,SubscriptionApartmentPubId:r},function(e){var t=e;l(t)})}function l(t){var a;return 0===Object.keys(t).length?(e.amenities=[],void(e.pins=[])):(a=o.groupBy(t,"isUnit"),a["false"]?e.amenities=a["false"]:e.amenities=[],e.amenities.concat(a["null"]),a["true"]?void(e.pins=a["true"]):void(e.pins=[]))}function c(e,t,a){if(a===!1){var n=/\d+/g;f=Number(e.target.id.match(n)[0])}a===!0&&A===!1?g(e):a===!0&&A===!0?d(e):m()}function u(e){var t=((e.offsetX-17)/e.target.clientWidth*100).toFixed(2),a=((e.offsetY-35)/e.target.clientHeight*100).toFixed(2);return{x:t,y:a}}function d(t){var a=u(t),n=e.pins[f];n.x=a.x,n.y=a.y,A=!1,b.save(n,function(e){alert("saved")})}function p(e,n){t(a.baseAPIURL+"unit/delete/pin").save({pin:e},function(e){n(e)})}function m(){w("md","public/app/modules/photographerapp/upload/remove-pin.modal.view.html","RemovePinModalCtrl",e.pins).then(function(t){switch(t){case"removePin":p(e.pins[f],function(t){f=e.pins.splice(f,1)});break;case"movePin":A=!0;break;case"cancel":}})}function g(t){var a=((t.offsetX-17)/t.target.clientWidth*100).toFixed(2),n=((t.offsetY-35)/t.target.clientHeight*100).toFixed(2),o={x:a,y:n,apartmentpubid:e.selectedUnit.pubid,isUnit:1,type:"vrphoto",title:null,awsurl:"https://cdn.wizio.co/"+e.selectedUnit.pubid+"/",ApartmentId:e.selectedUnit.id,SubscriptionApartmentPubId:e.selectedUnit.SubscriptionApartmentPubId};e.pins.push(o),w("md","public/app/modules/photographerapp/upload/uploadphoto.modal.view.html","UploadPhotoModalCtrl",o).then(function(t){return console.dir(t.result),"cancel"===t.result&&e.pins.pop(),e.uploaded=!0,t.photoTitle})}var h,f,v,b,A=!1,w=n.buildComplexModal;e.displayNoFloorplanMessage=!1,e.selectedUnit=!1,e.pins=[],e.uploaded=!1,e.showAmenityButton=!1,console.dir(e.selectedUnit),e.closeModal=function(){r.close()},v=t(a.baseAPIURL+"apartment/chooseparams/:param1/:param2/:param3/:param4/:param5/:param6",{param1:"@id",param2:"@pubid",param3:"@concatAddr",param4:"@unitNum",param5:"@Floor_Plan",param6:"@subscriptionPubId"}),b=t(a.baseAPIURL+"media"),v.query({param1:"id",param2:"pubid",param3:"concatAddr",param4:"unitNum",param5:"Floor_Plan",param6:i.decode().Subscriptions[0].id},function(t){h=[];for(var a=0;a<t.length;a++)t[a].Apartment.SubscriptionApartmentPubId="",console.dir(t[a].Apartment),t[a].Apartment.SubscriptionApartmentPubId=t[a].pubid,h.push(t[a].Apartment);e.units=h}),e.loadFloorplan=s,e.makePinAction=c,e.selectedSubscriptionApartmentPubId=null,e.addAmenity=function(){var t={x:null,y:null,apartmentpubid:e.selectedUnit.pubid,isUnit:0,type:"vrphoto",title:null,awsurl:"https://cdn.wizio.co/"+e.selectedUnit.pubid+"/",ApartmentId:e.selectedUnit.id,SubscriptionApartmentPubId:e.selectedUnit.SubscriptionApartmentPubId};w("md","public/app/modules/photographerapp/upload/uploadphoto.modal.view.html","UploadPhotoModalCtrl",t).then(function(a){if(e.uploaded=!0,"cancel"!==a.message)return"success"===a.message?(t.title=a.photoTitle,void e.amenities.push(t)):void 0})}}]),angular.module("Directives").directive("uploadPhotoDirv",["$resource","WizioConfig","LoadingSpinnerFct",function(e,t,a){return{restrict:"E",templateUrl:"public/app/modules/photographerapp/upload/uploadphoto.directive.view.html",link:function(n,o,r){AWS.config.update({accessKeyId:"AKIAIPGWV5OFR73P3VLQ",secretAccessKey:"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"});var i=new AWS.S3({endpoint:"https://cdn.wizio.co",s3BucketEndpoint:!0,region:"us-east-1"}),s=document.getElementById("file-chooser"),l=document.getElementById("upload-button"),c=document.getElementById("results");console.dir(n.pin),l.addEventListener("click",function(){if(""==document.getElementById("file-chooser").value)return void alert("Please select a photo before uploading it.");a.show("upload-photo-loader");var o=s.files[0];if(null===n.photoTitle)return void(c.innerHTML="Please enter a title for the photo");if(n.pin.title=n.photoTitle,n.pin.awsurl+=n.photoTitle,!o)return alert("Please upload a photo before continuing"),void(c.innerHTML="Nothing to upload.");c.innerHTML="";var r={Bucket:"equirect-photos",Key:n.pin.SubscriptionApartmentPubId+"/"+n.photoTitle+".JPG",ContentType:o.type,Body:o};i.putObject(r,function(o,r){o?c.innerHTML="ERROR":e(t.baseAPIURL+"media").save(n.pin,function(e){a.hide("upload-photo-loader"),c.innerHTML="UPLOADED",console.dir(n),n.uploaded=!0,n.$emit("Upload-Finished",{photoTitle:n.photoTitle})}),c.innerHTML=o?"ERROR!":"UPLOADED."})},!1)}}}]),angular.module("PhotographerApp").controller("UploadPhotoModalCtrl",["$scope","ModalSvc","$uibModalInstance","modalData",function(e,t,a,n){e.disabled=!1,e.photoTitle=null,e.pin=n,e.previewPhotoImage=!1,e.photo="",e.uploaded=!1,e.previewPhoto=function(e){var t=document.getElementById("imgPreview"),a=document.querySelector("input[type=file]").files[0],n=new FileReader;n.addEventListener("load",function(){t.src=n.result},!1),a&&n.readAsDataURL(a)},e.ok=function(e){return data={message:"cancel"},a.close(data)},e.$on("Upload-Finished",function(t,n){return n={photoTitle:e.photoTitle,message:"success"},a.close(n)})}]),angular.module("SearchApp").controller("SearchCtrl",["$scope","$state","$sessionStorage","SmartSearchSvc","SearchFct","LoadingSpinnerFct","TokenSvc",function(e,t,a,n,o,r,i){e.getLocation=function(e){return n.smartSearch(e)},e.submitSearch=function(){e.$emit("searchInitiated",{});var n={concatAddr:e.searchString};"Account.Dashboard"===t.current.name&&(r.show("account-dashboard-search-loader"),n.SubscriptionId=i.decode().Subscriptions[0].id),o.search(n,e.filters,function(n){console.dir(n),a.apartmentSearch=n,e.$emit("searchReturned",n),"LandingPage"===t.current.name&&t.go("Search",{apartments:n})})}}]),angular.module("SearchApp").directive("searchDirv",function(){return{templateUrl:"public/app/modules/searchapp/main/search.view.html",controller:"SearchCtrl",scope:{},restrict:"EA"}}),angular.module("SearchApp").controller("SearchResultsTileCtrl",["$scope","WizioConfig","TokenSvc","$resource","$state",function(e,t,a,n,o){new Clipboard(".clipboard"),e.newlyActive=!1,e.userIsLoggedIn=a.isLoggedIn(),e.windowLocationOrigin=window.location.origin,e.activateListing=function(e){var r=a.decode(),i=r.Subscriptions[0];console.dir(e);var s={Apartment:{pubid:e.pubid},User:{id:r.id,email:r.email},Subscription:{pubid:i.pubid},UserSubscriptions:{pubid:r.Subscriptions[0].UserSubscriptions.pubid}};n(t.baseAPIURL+"activelisting").save(s,function(t){e.newlyActive=!0}),o.reload()}}]),angular.module("SearchApp").directive("searchResultsTileDir",function(){return{templateUrl:"public/app/modules/searchapp/results-tile/search-results.tile.html",controller:"SearchResultsTileCtrl",scope:{apartment:"=apartment"},restrict:"EA"}}),angular.module("SearchApp").controller("SearchResultsListCtrl",["$scope","$sessionStorage",function(e,t){e.apartments=t.apartmentSearch}]),angular.module("SearchApp").directive("searchResultsListDir",function(){return{templateUrl:"public/app/modules/searchapp/results-view/search-results.view.html",controller:"SearchResultsListCtrl",scope:{apartments:"=apartments"},restrict:"EA"}}),angular.module("SharedFactoryApp").factory("GeocoderFct",["$q",function(e){var t=function(t){var a=e.defer(),n=new google.maps.Geocoder;return n.geocode({address:t},function(e,t){t===google.maps.GeocoderStatus.OK&&a.resolve(e[0].geometry.location)}),a.promise};return{getLatLong:t}}]).factory("MapFct",["ApartmentGetSetSvc","$sessionStorage","$stateParams","$state","WizioConfig",function(e,t,a,n,o){var r=function(){var t={scrollwheel:!1,zoom:12,center:new google.maps.LatLng(42.3601,(-71.0589)),mapTypeId:google.maps.MapTypeId.ROADMAP},a=null;if("Unit.Details"===n.current.name||"Listing.Group"===n.current.name?a=e.get("apartmentSelected"):"Unit.Display"===n.current.name&&(a=e.get("apartmentSearch")),a.constructor!==Array&&(a=[a]),0===a.length)return t;var o=null,r=null;if(a[0].apartmentData)for(i=0;i<a.length;i++)o+=a[i].apartmentData.latitude,r+=a[i].apartmentData.longitude;else o+=a.latitude,r+=a.longitude;return o/=a.length,r/=a.length,t={scrollwheel:!1,zoom:12,center:new google.maps.LatLng(o,r),mapTypeId:google.maps.MapTypeId.ROADMAP}},s=function(t){function a(e){e.apartmentData?position=new google.maps.LatLng(e.apartmentData.latitude,e.apartmentData.longitude):position=new google.maps.LatLng(e.latitude,e.longitude);var a=new google.maps.Marker({map:t,position:position,title:e.apartmentData.concatAddr||e.concatAddr,icon:"/public/viewtemplates/images/brand_assets/map_pin.png"});a.content='<div class="infoWindowContent"><div style="width: 40%; display:inline-block; margin:auto;padding: 10px 15px;"><span class="apt-tile__favorite-btn"><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="20px" height="20px" viewBox="0 0 40 40" enable-background="new 0 0 40 40" xml:space="preserve"><path fill="none" stroke="#000000" stroke-linecap="round" stroke-miterlimit="10" d="M20.001,37.152 C6.783,24.287,3.066,19.554,2.262,14.704C1.278,8.769,5.694,2.848,12.578,2.848c2.949,0,5.63,1.133,7.423,3.026 c1.79-1.893,4.471-3.026,7.421-3.026c6.853,0,11.306,5.893,10.315,11.856C36.952,19.449,33.479,24.031,20.001,37.152z"/></svg></span><p style="display: inline-block; padding-left:10px; padding-top:10px;">$'+e.Lease.leaseData.monthlyRent+'</p><a href="'+o.frontEndURL+"#/unit/details/"+e.Lease.leaseData.id+'"><button class="btn btn-small" style="display: block; padding: 2px 22px; background-color:transparent; border:1px solid #7A9DD1; color:#7A9DD1;">View</button></a></div><div style="width: 60%; display:inline-block; margin: auto; padding: 10px 15px;"><div> <p> Beds: '+e.apartmentData.beds+"</p> <p> Baths: "+e.apartmentData.baths+"</p> <p> Living Spaces: "+e.apartmentData.livingSpaces+"</p> </div></div></div>";var n=new google.maps.InfoWindow;google.maps.event.addListener(a,"click",function(){n.setContent("<p>"+a.title+"</p>"+a.content),n.open(t,a)}),r.push(a)}var r=[],s=null;for("Unit.Details"===n.current.name?s=e.get("apartmentSelected"):"Unit.Display"===n.current.name&&(s=e.get("apartmentSearch")),Array.isArray(s)||(s=[s]),i=0;i<s.length;i++)a(s[i]);return r};return{makeMap:r,makeMarkers:s}}]),angular.module("SharedFactoryApp").factory("ModalBuilderFct",["ModalSvc","$q",function(e,t){function a(a,n,o,r){return new t(function(t,i){console.dir(r);var s={backdrop:!0,keyboard:!0,modalFade:!0,size:a,templateUrl:n,controller:o,resolve:{modalData:function(){return r}}};e.showModal(s,{}).then(function(e){t(e)})})}function n(a,n,o,r){return new t(function(t,i){e.showModal({},{closeButtonText:a,actionBtnText:n,headerText:o,bodyText:r}).then(function(e){t(e)})})}return{buildComplexModal:a,buildSimpleModal:n}}]),angular.module("SharedFactoryApp").factory("SearchResource",["$resource","WizioConfig",function(e,t){return e(t.baseAPIURL+"search/",{},{save:{method:"POST",isArray:!0}})}]),angular.module("SharedServiceApp").factory("SearchFct",["$sessionStorage","$rootScope","ApartmentModel","SearchModel","DescriptionModel","LeaseModel","lodash","TokenSvc","$state",function(e,t,a,n,o,r,s,l,c){var u=function(e){for(i=0;i<e.length;i++){var t=Math.floor(e[i].concatAddr.charCodeAt(5)/19+4),a=Math.floor(e[i].concatAddr.charCodeAt(3)/19+4),n=parseInt(e[i].concatAddr.replace(/(^\d+)(.+$)/i,"$1")),o=n-t;n<15&&(o=1);var r=n+a,s=o.toString()+"-"+r.toString();e[i].hiddenAddress=s+e[i].concatAddr.replace(/^\d+/,"")}return e},d=function(e){for(var t,n=[],i=0;i<e.length;i++){t=e[i],console.dir(t);var l=a.build(t);n.push(l),t.Descriptions&&0!==t.Descriptions.length&&(n[i].Description=o.build(t.Descriptions[0])),t.Leases&&0!==t.Leases.length&&(n[i].Lease=r.build(t.Leases[0])),t.Media&&0!==t.Media.length&&(n[i].Media=s.groupBy(t.Media,"type"))}return n},p=function(o,r,i){var s=a.build(o),u=null;s.getGeocodeData().then(function(a){var o=null;s.apartmentData.topLevelType&&(o=s.apartmentData.topLevelType),console.dir(l.isLoggedIn),l.isLoggedIn()&&(u=l.decode());var p=new n(s,o,r,u);p.send(function(a){var n=a;return"Account.Dashboard"===!c.current.name&&(n=d(a)),e.apartmentSearch=n,t.$broadcast("searchFinished",n),i(n)})})};return{search:p,concealAddress:u,formatSearchResults:d}}]),angular.module("SharedServiceApp").service("ApartmentSearchSvc",["$rootScope","$sessionStorage","$state","SearchResource","UnitCreateSvc",function(e,t,a,n,o){}]).service("UserRegistrationSvc",["$state","AuthRegistrationResource",function(e,t){function a(e,a){t.save(e,function(e){a(e)})}return{saveUser:a}}]).service("TokenSvc",["$rootScope","$localStorage","jwtHelper",function(e,t,a){var n=function(){return t.token&&!a.isTokenExpired(t.token)?a.decodeToken(t.token):"No Token"},o=function(){return!t.token||!!a.isTokenExpired(t.token)&&(delete t.token,!0)},r=function(a){return!!a&&(e.isLoggedIn=!0,t.token=a,!0)},i=function(){return t.token?a.isTokenExpired(t.token)?(t.token=void 0,delete t.token,"No Token"):t.token:"No Token"},s=function(){return!!t.token&&(t.token=void 0,delete t.token,!0)},l=function(){var e=i();return"No Token"!==e&&!o(e)};return{decode:n,checkExp:o,storeToken:r,getToken:i,deleteToken:s,isLoggedIn:l}}]).service("SmartSearchSvc",["$http","$state","FlexGetSetSvc","ApartmentClaimGetSetSvc",function(e,t,a,n){var o=function(t,o){return e.get("//maps.googleapis.com/maps/api/geocode/json",{headers:{searchCheck:!0},params:{address:t,sensor:!1,components:"country:US"}}).then(function(e){return"Staging-ApartmentClaims"===o?(n.reset("Staging-ApartmentClaims"),n.set(e.data,o)):a.set(e,o),e.data.results.map(function(e){return e.formatted_address})})};return{smartSearch:o}}]).service("ModalSvc",["$uibModal",function(e){var t={backdrop:!0,keyboard:!0,modalFade:!0,templateUrl:"/public/app/modules/shared/viewtemplates/defaultmodal.html"},a={closeButtonText:"Close",actionButtonText:"OK",headerText:"Proceed?",bodyText:"perform this action"};this.showModal=function(e,t){return e||(e={}),this.show(e,t)},this.show=function(n,o){var r={},i={};return angular.extend(r,t,n),angular.extend(i,a,o),r.controller||(r.controller=["$scope","$uibModalInstance",function(e,t){e.modalOptions=i,e.modalOptions.ok=function(e){t.close(e)},e.modalOptions.close=function(e){t.close("cancel")}}]),e.open(r).result}}]).service("TimeFormatterSvc",["moment",function(e){function t(t,a){var n=e(t).format(a);return n}return{formatTimeFlex:t}}]),angular.module("AccountApp").controller("SubscriptionListCtrl",["$scope","SubscriptionFct",function(e,t){t.get.subscriptions().then(function(t){e.subscriptions=t}),e.chooseSubscription=function(t){e.chosenSubscription=t},e.changeSelected=function(e){$(".selected-plan").removeClass("selected-plan");var t=document.getElementById(e),a=angular.element(t);a.addClass("selected-plan")}}]),angular.module("AccountApp").directive("subscriptionListDir",function(){return{templateUrl:"public/app/modules/subscriptionapp/list/subscription.list.html",controller:"SubscriptionListCtrl",scope:{chosenSubscription:"=chosenSubscription"},restrict:"EA"}}),angular.module("AccountApp").factory("SubscriptionFct",["$resource","$q","$state","WizioConfig",function(e,t,a,n){function o(){return t(function(t,a){e(n.baseAPIURL+"subscriptionbase").query(function(e){return e[0].features=["25 Active Tours","Free Tour Requests during Trial Period","Tour Creation Tool (Coming soon)"],e[1].features=["50 Active Tours","Free Tour Requests during Trial Period","Tour Creation Tool (Coming soon)"],e[2].features=["Unlimited Active Tours","Wizio API Access","Free Tour Requests during Trial Period","Tour Creation Tool (Coming soon)","Up to 25 Users ($5+ per month per additional user)"],t(e)})})}function r(n,o){var r={user:n,subscription:o};return t(function(t,n){"Signup.Invite"===a.current.name?e(i.user.invitedUser).save(r,function(e){return t(e)}):e(i.user.newUser).save(r,function(e){return t(e)})})}var i={user:{invitedUser:n.baseAPIURL+"user/registration",newUser:n.baseAPIURL+"user/register/newuser"}},s={subscriptions:o},l={saveNewUser:r};return{get:s,post:l}}]),angular.module("AccountApp").controller("SubscriptionMainCtrl",["$scope","$state","SubscriptionFct",function(e,t,a){e.invitationSignup="Signup.Invite"===t.current.name,e.submit=function(){var n,o=e.user;e.invitationSignup?o.invitePubId=t.params.invitePubId:o.subscription=e.chosenSubscription,a.post.saveNewUser(o,n).then(function(e){t.go("Account.Dashboard")})}}]),angular.module("UnitApp").controller("UnitClaimListCtrl",["$scope","$resource","WizioConfig","lodash",function(e,t,a,n){t(a.baseAPIURL+"apartment/claim/list").query(null,function(t){var a=(n.groupBy(t,"PropertyManagerId"),n.groupBy(t,"concatAddr"));for(var o in a)a[o]=n.groupBy(a[o],"PropertyManager.businessName");e.units=a})}]),angular.module("UnitApp").controller("NationalCtrl",["$scope","$state","$location","$sessionStorage","$sce","$resource",function(e,t,a,n,o,r){function i(){return 1==c?(l=[],l.push({title:"Gym 1",link:"https://www.bubl.io/experiences/68c7bc43-faae-4708-b581-075dca0b0733"}),l.push({title:"Gym 2",link:"https://www.bubl.io/experiences/156ea094-059c-401f-b9c7-a8fe5f5d5678"}),l.push({title:"Studio",link:"https://www.bubl.io/experiences/394c6433-d833-4189-819a-8b9251e48649"}),l.push({title:"Think Tank",link:"https://www.bubl.io/experiences/b3d067b3-9ad9-4e91-b0ab-52898d29484e"}),l.push({title:"Think Tank",link:"https://www.bubl.io/experiences/b3d067b3-9ad9-4e91-b0ab-52898d29484e"}),l.push({title:"Lobby",link:"https://www.bubl.io/experiences/a7759d17-1980-4362-9d19-7c7116c7270b"}),l.push({title:"Lobby 2",link:"https://www.bubl.io/experiences/653b9a56-f413-4d08-9d49-0946dc93d1bf"}),l.push({title:"Lobby 3",link:"https://www.bubl.io/experiences/3334f769-c67b-41c9-a6ee-4c07b8ee7ddc"}),void s()):2==c?(l=[],l.push({title:"Bed",link:"https://www.bubl.io/experiences/3f6199ec-df05-4140-8d2b-af4f8389743a"}),l.push({title:"Bathroom",link:"https://www.bubl.io/experiences/059c9654-18fd-42ea-a5d7-a141cb8ceca9"}),l.push({title:"Living",link:"https://www.bubl.io/experiences/319a6470-3658-40ae-a25f-c9d18d8f9a7e"}),l.push({title:"Kitchen",link:"https://www.bubl.io/experiences/f4a18d53-70b3-4591-8e65-9d53498fa2a9"}),void s()):3==c?(l=[],l.push({title:"Studio",link:"https://www.bubl.io/experiences/50dc5135-cd21-45f9-b7a8-1987b0b1ba13"}),l.push({title:"Living",link:"https://www.bubl.io/experiences/a688a6ff-f3fd-4941-a414-d41988c45e6c"}),l.push({title:"Kitchen",link:"https://www.bubl.io/experiences/51654448-d804-4103-a703-5d4281ea034f"}),l.push({title:"Bathroom",link:"https://www.bubl.io/experiences/006fbf82-79a8-41a6-8bd9-2969e5fdd4d5"}),l.push({title:"Amenity Room",link:"https://www.bubl.io/experiences/6b984b03-4da9-4649-be73-3f5ac2dc77c3"}),void s()):4==c?(l=[],l.push({title:"Entry",link:"https://www.bubl.io/experiences/f5d7806b-bb6d-48b1-b502-99cd87010745"}),l.push({title:"Bedroom 1",link:"http://bubl.io/experiences/aabc60c4-d199-4719-8fbf-14dc0e76dfbe"}),l.push({title:"Bedroom 2",link:"http://bubl.io/experiences/293bc0da-c7d6-41c6-ba03-05541de9b8d4"}),l.push({title:"Living",link:"https://www.bubl.io/experiences/f8412b57-5921-4253-b938-b408938afc75"}),l.push({title:"Kitchen",link:"https://www.bubl.io/experiences/7ba60833-749b-4574-8790-f61ea338c37c"}),l.push({title:"Bathroom",link:"http://bubl.io/experiences/8fb2a8c1-6167-4c52-897c-fd32431278c7"}),l.push({title:"Dining",link:"https://www.bubl.io/experiences/aa4083de-3d97-409e-84ab-fc57c319d69d"}),void s()):void 0}function s(){e.media.vrphotos=l;var t=0;e.photoUrl=e.media.vrphotos[t].link,e.changePhoto=function(t){e.photoUrl=e.media.vrphotos[t].link}}e.media={};var l=[],c=1;i(),s(),e.trust=o,e.mediaTab="unitPhotos",e.updateUnit1=function(){c=1,i()},e.updateUnit2=function(){c=2,i()},e.updateUnit3=function(){c=3,i()},e.updateUnit4=function(){c=4,i()}}]),angular.module("UnitApp").controller("ShareListingsCtrl",["$scope","$uibModalInstance","TokenSvc","modalData","lodash","BrokerageModel",function(e,t,a,n,o,r){e.brokerages=n,e.selectBrokerage=function(t){e.brokerages[t].selected=!e.brokerages[t].selected},e.submit=function(){var t=a.decode(),n=t.PropertyManager[0].id,i=[];o.forEach(e.brokerages,function(e){e.selected&&i.push({PropertyManagerId:n,BrokerageId:e.id})}),r.savePartners(i).then(function(e){})}}]),angular.module("UnitApp").controller("TransitionUnitMediaCtrl",["$scope","$rootScope","$state","$resource","WizioConfig","$sce","lodash","ModalSvc","LoadingSpinnerFct",function(e,t,a,n,o,r,i,s,l){l.show("vrPlayerLoader");var c,u=document.getElementsByTagName("BODY")[0],d=a.current.name,p=document.getElementById("height-container"),m=document.getElementById("floorplan"),g=.75*$(window).height();m.style["max-height"]=g+"px",p.style["padding-bottom"]="0",p.style.height=$(window).height()+"px","NewExternalApi"!==d&&"Demo"!==d&&"Tour"!==d||(u.style["margin-bottom"]="0",$(window).resize(function(){p.style["padding-bottom"]="0",p.style.height=$(window).height()+"px",m.style["max-height"]=.75*$(window).height()+"px"})),e.selectPhoto=!1,e.viewFloorPlan=!1,e.buttonAction=function(t){"toggleFloorplan"===t?(e.viewFloorPlan=!e.viewFloorPlan,e.selectPhoto&&e.viewFloorPlan&&(e.selectPhoto=!e.selectPhoto)):(e.selectPhoto=!e.selectPhoto,e.viewFloorPlan&&e.selectPhoto&&(e.viewFloorPlan=!e.viewFloorPlan))},e.style="margin: 0 auto; width:325px",e.trust=r;var h,f;switch(console.dir("state"),d){case"LandingPage":activelistingid=o.LandingPage.activeListingId(),e.style="margin: 0 auto;",h=n(o.baseAPIURL+"activelisting/:activelistingid",{activelistingid:"@activelistingid"}),f={activelistingid:activelistingid};break;case"Demo":activelistingid=o.DemoPage.activeListingId(),e.style="margin: 0 auto;",h=n(o.baseAPIURL+"activelisting/:activelistingid",{activelistingid:"@activelistingid"}),f={activelistingid:activelistingid};break;default:console.dir("default"),activelistingid=a.params.apitoken||a.params.activelistingid,c=a.params.apartmentpubid,h=n(o.baseAPIURL+"activelisting/:activelistingid",{activelistingid:"@activelistingid"}),f={activelistingid:activelistingid}}h.query(f,function(t){var a=t;t[0].Floor_Plan?e.floorplan="https://cdn.wizio.co/"+t[0].SubscriptionApartmentPubId+"/floorplan.png":e.floorplan=!1,e.media=i.groupBy(a,"type");var n;n="LandingPage"===d?3:"Demo"===d?0:"DemoOneBackBay"===d?9:0,e.$broadcast("CHANGE",{});var o="";e.media.vrphoto[0].awsurl?(e.photoIndex=n,o="LandingPage"===d||"Demo"===d?"https://cdn.wizio.co/"+e.media.vrphoto[n].SubscriptionApartmentPubId+"/"+e.media.vrphoto[n].title:"https://cdn.wizio.co/"+e.media.vrphoto[n].SubscriptionApartmentPubId+"/"+e.media.vrphoto[n].title+".JPG",e.photoUrl=o,e.$broadcast("IMGLOAD",{media:a}),e.changePhoto=function(t){var a="";a="LandingPage"===d||"Demo"===d?"https://cdn.wizio.co/"+e.media.vrphoto[t].SubscriptionApartmentPubId+"/"+e.media.vrphoto[t].title:"https://cdn.wizio.co/"+e.media.vrphoto[t].SubscriptionApartmentPubId+"/"+e.media.vrphoto[t].title+".JPG",l.show("vrPlayerLoader"),e.photoIndex=t,e.photoUrl=a,e.$broadcast("CHANGE",{})}):(console.dir(n+" in bubl"),e.photoUrl=e.media.vrphoto[n].link,e.changePhoto=function(t){e.photoUrl=e.media.vrphoto[t].link},e.trust=r),e.trust=r,e.mediaTab="unitPhotos"})}]),angular.module("UnitApp").controller("UnitClaimFormCtrl",["$scope","$state","$q","TokenSvc","ApartmentModel","DescriptionModel","SmartSearchSvc","UnitFct","FlexGetSetSvc","ModalSvc","WizioConfig","lodash",function(e,t,a,n,o,r,i,s,l,c,u,d){"ng-strict";function p(){var t={Address:e.apartmentAddress,unitNum:e.containingArray[0].apartmentData.unitNum,ApartmentId:e.containingArray[0].apartmentData.id};t.dataToChange="Address";var a={templateUrl:u.UnitViewsURL+"updateinfomodal.html",controller:"UpdateInfoModalCtrl",modalData:t};v(1,a).then(function(t){e.apartmentAddress=t.concatAddr;for(var a in t)t.hasOwnProperty(a)&&(e.containingArray[0].apartmentData[a]=t[a])})}function m(){var t={Address:e.apartmentAddress,unitNum:e.containingArray[0].apartmentData.unitNum,ApartmentId:e.containingArray[0].apartmentData.id};t.dataToChange="Unit Number";var a={templateUrl:u.UnitViewsURL+"updateinfomodal.html",controller:"UpdateInfoModalCtrl",modalData:t};v(1,a).then(function(t){e.containingArray[0].apartmentData.unitNum=t})}function g(t){var a=e.containingArray[0],n=o.copyGeocodedData(a);n.apartmentData.CreatedById=e.user.id,n.apartmentData.UpdatedById=e.user.id,n.apartmentData.PropertyManager=e.selectedPM,n.apartmentData.PropertyManagerId=e.selectedPM.id,delete n.apartmentData.id,e.containingArray.push(n)}function h(t){var a=e.containingArray[t],n=a.duplicate(),r=o.build(n);r.apartmentData.id=null,e.containingArray.push(r)}function f(t){return 1===e.containingArray.length?void 0:void e.containingArray.splice(t,1)}function v(e,t){return a(function(a,n){if(1===e){var o={backdrop:!0,keyboard:!0,modalFade:!0,templateUrl:t.templateUrl,controller:t.controller,resolve:{modalData:function(){return t.modalData}}};c.showModal(o,{}).then(function(e){return a(e)})}else{var r={closeButtonText:t.closeButtonText,actionButtonText:t.actionButtonText,headerText:t.headerText,bodyText:t.bodyText};c.showModal({},r).then(function(e){return a(e)})}})}function b(t){return a(function(a,n){var r=e.containingArray[t].apartmentData,i=o.build(r);M.unitIndex=t,i.getGeocodeData().then(function(e){return a(i)})})}function A(e){return a(function(t,a){var o=n.decode();e.apartmentData.Description={description:"",id:null,UserId:o.id},e.api().findOrCreate(null,function(a){var n={unitInstance:e,dbResponse:a};return t(n)})})}function w(e){return a(function(t,a){var n=e.dbResponse;e.unitInstance;n.created===!0?y(e).then(function(e){return t(e)}):U(e).then(function(e){return t(e)})})}function y(t){return a(function(a,n){var o=t.dbResponse,r=t.unitInstance;return r.newlyCreated=!0,r.apartmentData.id=o.apartment.id,r.apartmentData.CreatedById=e.user.id,r.apartmentData.UpdatedById=e.user.id,r.apartmentData.PropertyManager=e.selectedPM,r.apartmentData.PropertyManagerId=e.selectedPM.id,r.apartmentData.Description.ApartmentId=o.apartment.id,r.apartmentData.Description.id=o.apartment.Description.id,e.containingArray[M.unitIndex]=r,a(r)})}function U(t){return a(function(a,n){var o=t.dbResponse,r=t.unitInstance;r.newlyCreated=!1,r.apartmentData.UpdatedById=e.user.id,2===e.user.userType&&s.checkPropertyManagerOwnership(o)?(P={templateUrl:u.UnitViewsURL+"UnitVerifyModal.html",controller:"UnitVerifyModalCtrl",modalData:o},v(1,P).then(function(t){e.containingArray[M.unitIndex]={}})):3===e.userType&&e.user.id!==response.apartment.CreatedById&&(P={closeButtonText:"Close",actionButtonText:"OK",headerText:"This Apartment Already Exists",bodyText:"You are not permitted to edit this apartment. You can however make a public listing for this unit."},v(2,P).then(function(e){}))})}function S(t){e.containingArray[t].apartmentData.concatAddr=e.apartmentAddress,b(t).then(A).then(w)}var P={};e.getLocation=function(e){return i.smartSearch(e,"Staging-ApartmentClaims")},function(){e.singleUnit="Unit.Edit"===t.current.name,e.user=n.decode(),e.selectOptions=s.selectOptions;var a=s.ammenities;e.ammenitiesDropdown={},e.ammenitiesCheckbox={};for(var r in a)"Apartment"===a[r].dataParent&&("undefined"!=typeof a[r].selectArray?e.ammenitiesDropdown[r]=a[r]:e.ammenitiesCheckbox[r]=a[r]);if(e.multiplePMBusinesses=!1,2!==e.user.userType&&4!==e.user.userType||e.user.PropertyManager.length>0&&(e.multiplePMBusinesses=!0,e.selectOptions.pmBusinesses=e.user.PropertyManager,e.selectedPM=e.selectOptions.pmBusinesses[0]),e.containingArray=[],e.singleUnit){var i=o.build(l.get("UnitToEdit"));i.apartmentData.Description=l.get("UnitToEdit").Descriptions[0],i.apartmentData.PropertyManager=e.selectedPM,i.apartmentData.PropertyManagerId=e.selectedPM.id,i.apartmentData.UpdatedById=e.user.id,e.apartmentAddress=i.apartmentData.concatAddr,
e.containingArray.push(i)}else e.containingArray.push({})}();var M={addressIndex:null,unitIndex:null};e.functions={addUnit:g,onUnitBlur:S,copyUnit:h,removeUnit:f,updateAddress:p,updateUnitNumber:m},e.submit=function(){o.claimApi(e.containingArray,function(e){t.go("Account.Dashboard.PropertyManager")})}}]),angular.module("UnitApp").controller("UnitCreateCtrl",["$scope","$sessionStorage","$rootScope","$state","lodash","UnitResource","SmartSearchSvc","UnitCreateSvc","FlexGetSetSvc",function(e,t,a,n,o,r,i,s,l){e.$storage=t,e.numBeds=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],e.getLocation=function(e){return i.smartSearch(e)},e.addUnit=function(){var t=e.apartmentAddress,a={unitNum:e.unitNum,beds:e.beds,baths:e.baths,livingSpaces:e.livingRooms,maxResidency:e.maxResidency,costPerMonth:e.costPerMonth,renovated:e.renovated,pets:e.petPolicy,youtubeVRID:e.youtubeVRID};s.parseGeocodeData(t,a,function(e,t){r.save(t,function(e,t){n.go("Account.Dashboard.PropertyManager")})})}}]),angular.module("UnitApp").controller("UnitDetailCtrl",["$scope","$state","$uibModal","$sce","$q","lodash","ApartmentGetSetSvc","MapFct","TokenSvc","FlexGetSetSvc","MediaModel","ModalSvc","WizioConfig","SearchFct","moment","UnitFct","LeaseModel","ModalBuilderFct","UnitDetailsFct",function(e,t,a,n,o,r,i,s,l,c,u,d,p,m,g,h,f,v,b){function A(t){var a=b.setDataForPage(t);e.apartment=a.apartment,e.listing=a.listing,e.features=a.features}function w(t){var a=0,o=b.setPhotos(t),r=o.media;e.media=o.media,e.photoUrl=o.initialPhotoUrl,r.vrphoto[0].awsurl?(e.$broadcast("IMGLOAD",{media:r}),e.changePhoto=function(t){e.photoUrl=r.vrphoto[t].awsurl,e.$broadcast("CHANGE",{})}):(e.photoUrl=e.media.vrphoto[a].link,e.changePhoto=function(t){e.photoUrl=e.media.vrphoto[t].link},e.trust=n),e.trust=n,e.mediaTab="unitPhotos",e.selectMediaTab=function(t){if("unitVideos"===t)if(1!==vrvideos.length){var a={closeButtonText:"Close",actionButtonText:"OK",headerText:"No 360 Video",bodyText:"Sorry! This unit does not have a 360 video tour just yet."};d.showModal({},a).then(function(e){})}else e.mediaTab=t;else e.mediaTab=t}}l.decode();e.listing={},f.api("get",t.params.id).then(function(t){var a=t.Apartment.street,n=t.Apartment.unitNum;A(t),e.floorplan=b.setFloorPlan(a,n),w(t)}),setTimeout(function(){var t=s.makeMap();e.map=new google.maps.Map(document.getElementById("map"),t)},3e3);var y=function(e,t,a,n){return{backdrop:!0,keyboard:!0,modalFade:!0,templateUrl:e,controller:t,resolve:{modalData:function(){return n}}}},U=p.AccountAuthViewsURL;y(U+"Login.html","AuthLoginModalCtrl");e.applyToApartment=function(){var t=y(p.ApplicationFormViewsURL+"contactRepForm.html","ContactRepFormCtrl","md",e.listing);d.showModal(t,{}).then(function(e){})},e.submitVideo=function(){var t=new u(e.media.video.link,"vrvideo");t.getAssociationData(),t.saveMedia(function(e){})},e.submitPhoto=function(){var t=new u(e.media.photo.link,"vrphoto",e.media.photo.title);t.getAssociationData(),t.saveMedia(function(e){})}}]),angular.module("UnitApp").controller("UnitDisplayCtrl",["$scope","$sessionStorage","$state","lodash","ApartmentGetSetSvc","ApartmentModel","SearchModel","ModalSvc","SearchFct","SmartSearchSvc","MapFct","ModalBuilderFct",function(e,t,a,n,o,r,i,s,l,c,u,d){if(e.sessionStorage=t,e.apartmentSearch=t.apartmentSearch,0===e.apartmentSearch.length){var p={closeButtonText:"Close",actionButtonText:"OK",headerText:"No Listings Found",bodyText:"Unfortunatly, we could not find any listings that met your specified criteria. Pleasse try broadening your search parameters."};s.showModal({},p).then(function(e){})}e.mapshow=!0,e.maphidden=!1,e.filterToggle=!0,e.filters={beds:null,baths:null,minPrice:null,maxPrice:null},e.launchVRModal=function(e){alert("work"),d.buildModalWithController("lg",WizioConfig.UnitViewsURL+"unitmedia.mdl.view.html","UnitMediaModalCtrl",e).then(function(e){})},e.tabToggleMap=function(){e.mapshow||(e.mapshow=!e.mapshow,e.maphidden=!e.maphidden)},e.tabToggleGrid=function(){e.maphidden||(e.mapshow=!e.mapshow,e.maphidden=!e.maphidden)},e.tabToggleFilters=function(){e.filterToggle=!e.filterToggle},e.$on("searchFinished",function(t,a){e.apartmentSearch=a}),e.apartmentSelected=function(t){var r=n.find(e.apartmentSearch,function(e){return e.apartmentData.id===t});if(void 0!==r)o.set(r,"apartmentSelected"),a.go("Unit.Details",{id:t});else{var i={closeButtonText:"Close",actionButtonText:"OK",headerText:"Listing Load Error",bodyText:"There was an error loading the page you requested. Please try again, or start your search over."};s.showModal({},i).then(function(e){})}},e.search=function(){var t={concatAddr:e.searchString};l.search(t,e.filters,function(e){a.go("Unit.Display")})},e.getLocation=function(e){return c.smartSearch(e)}}]),angular.module("UnitApp").controller("UnitMediaCtrl",["$scope","$rootScope","$state","$resource","WizioConfig","$sce","lodash","ModalSvc",function(e,t,a,n,o,r,i,s){function l(){u=!u,u?(this.classList.add("open"),this.classList.remove("close")):(this.classList.add("close"),this.classList.remove("open"))}var c;e.selectPhoto=!1;var u=!1,d=a.current.name;"DemoGreenStreet"!==d&&(c=document.getElementById("panel-container"),c.addEventListener("click",l,!1)),e.vrPlayerStyle="LandingPage"===d?"padding-bottom: 0; height: 100%":"padding-bottom: 0; height: 100vh",console.dir(e.vrPlayerStyle),e.trust=r;var p,m;"Demo"===d?(m=o.static_vr.apikey,p=o.static_vr.demo.apartmentpubid):"LandingPage"===d?(m=o.static_vr.apikey,p=o.static_vr.landingpage.apartmentpubid):"DemoOneBackBay"===d?(p=o.static_vr.demoOneBackBay.apartmentpubid,m=o.static_vr.apikey):"DemoGreenStreet"===d?(p=o.static_vr.demoGreenStreet.apartmentpubid,m=o.static_vr.apikey):"DemoWellington2Bed"===d?(p=o.static_vr.demoWellington2Bed.apartmentpubid,m=o.static_vr.apikey):"DemoGreenWay0404"===d?(p=o.static_vr.demoGreenWay0404.apartmentpubid,m=o.static_vr.apikey):"DemoGreenWay0503"===d?(p=o.static_vr.demoGreenWay0503.apartmentpubid,m=o.static_vr.apikey):"DemoGreenWay0512"===d?(p=o.static_vr.demoGreenWay0512.apartmentpubid,m=o.static_vr.apikey):"DemoGreenWay1209"===d?(p=o.static_vr.demoGreenWay1209.apartmentpubid,m=o.static_vr.apikey):"DemoGreenWay1401"===d?(p=o.static_vr.demoGreenWay1401.apartmentpubid,m=o.static_vr.apikey):"DemoGreenWay1707"===d?(p=o.static_vr.demoGreenWay1707.apartmentpubid,m=o.static_vr.apikey):"DemoWaterMarkOneBed"===d?(p=o.static_vr.demoWaterMarkOneBed.apartmentpubid,m=o.static_vr.apikey):"DemoMetroMark04"===d?(p=o.static_vr.demoMetroMark04.apartmentpubid,m=o.static_vr.apikey):"DemoMetroMark06"===d?(p=o.static_vr.demoMetroMark06.apartmentpubid,m=o.static_vr.apikey):"DemoMetroMark12"===d?(p=o.static_vr.demoMetroMark12.apartmentpubid,m=o.static_vr.apikey):"DemoMetroMark13"===d?(p=o.static_vr.demoMetroMark13.apartmentpubid,m=o.static_vr.apikey):"DemoRiversEdgeB1"===d?(p=o.static_vr.demoRiversEdgeB1.apartmentpubid,m=o.static_vr.apikey):"DemoRiversEdgeA2"===d?(p=o.static_vr.demoRiversEdgeA2.apartmentpubid,m=o.static_vr.apikey):"DemoRiversEdgeA9"===d?(p=o.static_vr.demoRiversEdgeA9.apartmentpubid,m=o.static_vr.apikey):"DemoStationLanding1"===d?(p=o.static_vr.demoStationLanding1.apartmentpubid,m=o.static_vr.apikey):"DemoStationLanding1C"===d?(p=o.static_vr.demoStationLanding1C.apartmentpubid,m=o.static_vr.apikey):"DemoStationLanding2"===d?(p=o.static_vr.demoStationLanding2.apartmentpubid,m=o.static_vr.apikey):"DemoStationLanding24W"===d?(p=o.static_vr.demoStationLanding24W.apartmentpubid,m=o.static_vr.apikey):"DemoStationLanding26E"===d?(p=o.static_vr.demoStationLanding26E.apartmentpubid,m=o.static_vr.apikey):"DemoStationLandingStudioB"===d?(p=o.static_vr.demoStationLandingStudioB.apartmentpubid,m=o.static_vr.apikey):"DemoEddyD"===d?(p=o.static_vr.demoEddyD.apartmentpubid,m=o.static_vr.apikey):"DemoEddyBB"===d?(p=o.static_vr.demoEddyBB.apartmentpubid,m=o.static_vr.apikey):"DemoEddyCC"===d?(p=o.static_vr.demoEddyCC.apartmentpubid,m=o.static_vr.apikey):"DemoEddyK"===d?(p=o.static_vr.demoEddyK.apartmentpubid,m=o.static_vr.apikey):(m=a.params.apitoken,p=a.params.apartmentpubid),n(o.baseAPIURL+"vr/listing/:apitoken/:apartmentid",{apitoken:"@apitoken",apartmentid:"@apartmentid"}).query({apitoken:m,apartmentid:p},function(t){var a=i.groupBy(t[0],"type");e.media=a;var n;n="LandingPage"===d?3:"Demo"===d?0:"DemoOneBackBay"===d?9:0,a.vrphoto[0].awsurl?(e.photoIndex=n,e.photoUrl=a.vrphoto[n].awsurl,e.$broadcast("IMGLOAD",{media:a}),e.changePhoto=function(t){e.photoIndex=t,e.photoUrl=a.vrphoto[t].awsurl,e.$broadcast("CHANGE",{})}):(e.photoUrl=e.media.vrphoto[n].link,e.changePhoto=function(t){e.photoUrl=e.media.vrphoto[t].link},e.trust=r),e.trust=r,e.mediaTab="unitPhotos"})}]),angular.module("UnitApp").controller("UnitMediaModalCtrl",["$uibModalInstance","modalData",function(e,t){}]),angular.module("UnitApp").controller("UnitVerifyModalCtrl",["$scope","$uibModalInstance","modalData",function(e,t,a){e.apartment=a,e.closeModal=function(){t.dismiss()},e.dontUseData=function(){t.close("Do not use data")},e.useData=function(){t.close("Use data")}}]),angular.module("UnitApp").controller("UpdateInfoModalCtrl",["$scope","$resource","modalData","$uibModalInstance","WizioConfig","SmartSearchSvc","ApartmentModel","UnitCreateSvc",function(e,t,a,n,o,r,i,s){function l(){var r={};e.newData.ApartmentId=a.ApartmentId;var l=i.build(e.newData);s.getGeocodeData(l.apartmentData.concatAddr,function(a,i){r=s.lodashParseAPIData(i,null),r.ApartmentId=e.newData.ApartmentId,t(o.baseAPIURL+"apartment",null,{update:{method:"PUT"}}).update(r,function(e){return r.id=r.ApartmentId,n.close(r)})})}function c(){e.newData.ApartmentId=a.ApartmentId,t(o.baseAPIURL+"apartment",null,{update:{method:"PUT"}}).update(e.newData,function(t){return n.close(e.newData.unitNum)})}e.getLocation=function(e){return r.smartSearch(e,"Staging-ApartmentClaims")},e.modalData=a,e.newData={},e.submitAddressChanges=l,e.submitUnitNumChanges=c}]),angular.module("UnitApp").controller("UnitMainCtrl",["$scope",function(e){}]),angular.module("UnitApp").factory("UnitMapFct",["lodash",function(e){function t(e,t,a,n,o){var r=new google.maps.Map(document.getElementById(e),{scrollwheel:t||!1,zoom:a||12,center:n||new google.maps.LatLng(42.3601,(-71.0589)),mapTypeId:o||google.maps.MapTypeId.ROADMAP});return r}function a(e){if(i={scrollwheel:!1,zoom:12,center:s,mapTypeId:google.maps.MapTypeId.ROADMAP},e){var t=n(e);i.center=new google.maps.LatLng(t.latitude,t.longitude)}return i}function n(e){for(var t,a,n={},o=0;o<e;o++)t+=e[o].latitude,a+=e[o].longitude;return n.latitude=t/e.length,n.longitude=a/e.length,n}function o(t,a){for(var n=[],o=e.groupBy(t,"street"),i=0;i<t.length;i++)n.push(r(t[i],a,o))}function r(e,t,a){var n=new google.maps.Marker({map:t,position:new google.maps.LatLng(e.latitude,e.longitude),title:e.street+" Floorplans Filmed: "+a[e.street].length,icon:"../../../../viewtemplates/images/brand_assets/map_pin.png"});return n}var i,s=new google.maps.LatLng(42.3601,(-71.0589));return{createMap:t,setMapOptions:a,addMapPinsToMap:o}}]),angular.module("UnitApp").factory("UnitDetailsFct",["ApartmentGetSetSvc","UnitFct","lodash",function(e,t,a){function n(a){var n,o,r;n=a,n.dateStart=moment(n.dateStart).format("YYYY-MM-DD"),o=a.Apartment,o.monthlyRent=a.monthlyRent,r=t.features,e.set(o,"apartmentSelected");var i={dataFromAPI:a,listing:n,apartment:o,features:r};return i}function o(e,t){var a;if("1040 North Quincy Street"===e)switch(e){case"406":a="https://s3.amazonaws.com/wiziouservideos/LG-1b1d1s2b.png";break;case"209":}else if("1020 North Quincy Street"===e)switch(e){case"908":a="https://s3.amazonaws.com/wiziouservideos/1020-2b2b.png";break;case"1013":a="https://s3.amazonaws.com/wiziouservideos/1020-2b1b.png";break;case"616":a=!1;break;case"619":a=!1;break;default:a=!1}else a=!1;return a}function r(){}function i(e){var t=0,n=a.groupBy(e.Apartment.Media,"type"),o=n.vrphoto[t].awsurl;return{media:n,initialPhotoUrl:o}}return{setDataForPage:n,setFloorPlan:o,setMap:r,setPhotos:i}}]),angular.module("UnitApp").factory("UnitFct",["ApartmentModel","TokenSvc",function(e,t){function a(e){for(var a=t.decode(),n=0;n<a.PropertyManager.length;n++)if(a.PropertyManager[n].id===e.PropertyManagerId)return!0;return!1}var n={baths:[1,2,3],livingSpaces:[0,1,2,3],laundry:["In Unit","In Building","None"],makeCurrentListing:["Yes","No"],pmBusinessOrPerson:["Business","Person"]},o={beds:{svg:"public/assets/icons/bed.svg",data:"beds",label:"Beds",postText:"Beds",selectArray:[0,1,2,3,4,5,6,7,8],dataParent:"Apartment",st0:"svg-stroke-gray"},baths:{svg:"public/assets/icons/bath.svg",data:"baths",label:"Baths",postText:"Baths",selectArray:[1,2,3],dataParent:"Apartment",st0:"svg-stroke-gray"},laundry:{svg:"public/assets/icons/laundry.svg",data:"laundry",label:"Laundry",postText:"",selectArray:["In Unit","In Building","None"],st0:"svg-stroke-gray",dataParent:"Apartment"},pets:{svg:"public/assets/icons/pets.svg",data:"pets",label:"Pets",postText:"",selectArray:["Cats OK","Dogs OK","Cats and Dogs OK","No Pets"],st0:"svg-stroke-gray",dataParent:"Lease"},elevators:{svg:"public/assets/icons/elevator.svg",data:"elevator",label:"Elevator",postText:"",selectObject:{Yes:!0,No:!1},st0:"svg-stroke-gray",trueValue:1,falseValue:0,dataParent:"Apartment"},electric:{svg:"public/assets/icons/electric.svg",data:"electricIncluded",postText:"",dataParent:"Lease",label:"Electric",st0:"svg-stroke-gray-st0"},gas:{svg:"public/assets/icons/gas.svg",data:"gasIncluded",postText:"",dataParent:"Lease",label:"Gas",st0:"svg-stroke-gray-st0",st1:"svg-stroke-gray-st1",st2:"svg-stroke-gray-st2"},heat:{svg:"public/assets/icons/heat.svg",data:"heatIncluded",postText:"",dataParent:"Lease",label:"Heat",st0:"svg-stroke-gray-st0"},smoking:{svg:"public/assets/icons/smoking.svg",data:"smoking",postText:"",label:"Smoking",dataParent:"Lease",st0:"svg-stroke-gray-fill0",st1:"svg-stroke-gray-st1"},trash:{svg:"public/assets/icons/trash.svg",data:"trashRemoval",postText:"",label:"Trash Removal",selectObject:{Yes:!0,No:!1},st1:"svg-stroke-gray-st0",trueValue:1,falseValue:0,dataParent:"Lease"},water:{svg:"public/assets/icons/water.svg",data:"waterSewerIncluded",postText:"",dataParent:"Lease",label:"Water",st0:"svg-stroke-gray-st0",st1:"svg-stroke-gray-st1",trueValue:1,falseValue:0},wifi:{svg:"public/assets/icons/wifi.svg",data:"wifiIncluded",postText:"",dataParent:"Lease",label:"Wifi",st0:"svg-stroke-gray-st0",st1:"svg-stroke-gray-st1"},gym:{svg:"public/assets/icons/gym.svg",data:"gym",postText:"",label:"Gym",selectObject:{Yes:!0,No:!1},st0:"svg-stroke-gray-st0",st1:"svg-stroke-gray-st1",trueValue:1,falseValue:0,dataParent:"Apartment"},pool:{svg:"public/assets/icons/pool.svg",data:"pool",postText:"",label:"Pool",selectObject:{Yes:!0,No:!1},st0:"svg-stroke-gray-st0",st1:"svg-stroke-gray-st1",trueValue:1,falseValue:0,dataParent:"Apartment"},nosmoking:{svg:"public/assets/icons/nosmoking.svg",data:"nosmoking",postText:""},parking:{svg:"public/assets/icons/parking.svg",data:"parking",label:"Parking",selectObject:{Yes:!0,No:!1},trueValue:1,falseValue:0,postText:"",st2:"svg-stroke-gray-fill0",st0:"svg-stroke-gray-st0",st1:"svg-stroke-gray-st1",dataParent:"Apartment"},concierge:{svg:"public/assets/icons/concierge.svg",data:"concierge",postText:"",label:"Concierge",selectObject:{Yes:!0,No:!1},trueValue:1,falseValue:0,dataParent:"Apartment"},cats:{svg:"public/assets/icons/cats.svg",data:"cats",postText:""},cable:{svg:"public/assets/icons/cable.svg",data:"cableIncluded",postText:"",dataParent:"Lease",label:"Cable",st0:"svg-stroke-gray-st0",st1:"svg-stroke-gray-st1"},ac:{svg:"public/assets/icons/ac.svg",data:"airconditioning",postText:"",label:"Air Conditioning",selectObject:{Yes:!0,No:!1},dataParent:"Apartment",st0:"svg-stroke-gray-st0",st1:"svg-stroke-gray-st1",trueValue:1,falseValue:0},roofDeck:{svg:"public/assets/icons/roofdeck.svg",data:"roofDeck",postText:"",label:"Roof Deck",selectObject:{Yes:!0,No:!1},st0:"svg-stroke-gray-st0",st1:"svg-stroke-gray-st1",st2:"svg-stroke-gray-st2",trueValue:1,falseValue:0,dataParent:"Apartment"},supervisor:{svg:"public/assets/icons/supervisor.svg",data:"superIntendent",postText:"",label:"Super Intendent",selectObject:{Yes:!0,No:!1},st0:"svg-stroke-gray-st0",st1:"svg-stroke-gray-st1",trueValue:1,falseValue:0,dataParent:"Apartment"},balcony:{svg:"public/assets/icons/balcony.svg",data:"balcony",postText:"",label:"balcony",selectObject:{Yes:!0,No:!1},trueValue:1,falseValue:0,dataParent:"Apartment"}},r=function(e,a){var n=t.decode();return e.apartmentData.id=a.apartment.id,e.Assignment={UserId:n.id,ApartmentId:e.apartmentData.id},e.apartmentData.CreatedById=n.id,e.apartmentData.UpdatedById=n.id,e},i=function(){};return{selectOptions:n,createUnit:i,apartmentExisted:r,checkPropertyManagerOwnership:a,features:o,ammenities:o}}]),angular.module("AccountApp").controller("SignupFormCtrl",["$scope","$state","$uibModalInstance","$window","$resource","ModalSvc","TokenSvc","modalData","WizioConfig","UserRegistrationSvc","ModalBuilderFct","AuthFct",function(e,t,a,n,o,r,i,s,l,c,u,d){function p(){return a.close("backStep")}function m(){return a.close("ok")}function g(){var t=e.user.password,a=e.user.passwordConfirm,n=d.confirmPasswords(t,a);return n?(e.user=d.setUserType(e.user,s),void c.saveUser(e.user,function(t){"ERR"===t.status?u.buildSimpleModal("Close","OK","Email Not valid","That email is already in use by an account holder. Please try another email or reset your password if you forgot it.").then(function(e){}):e.hasRegistered=!0})):void u.buildSimpleModal("Close","OK","Password Error","Passwords do not match!").then(function(e){})}alert("no?"),e.waitlist=!1,e.user={},e.hasRegistered=!1,e.data=s;console.dir(r),e.backStep=p,e.closeModal=m,e.save=g,e.login=function(){return a.close("login")}}]),angular.module("AccountApp").directive("signUpButtonDir",["ModalSvc",function(e){return{template:'<button ng-click="signup()"></button>',scope:{},restrict:"E",link:function(t,a,n){var o=function(e,t,a){return{backdrop:!0,keyboard:!0,modalFade:!0,templateUrl:e,controller:t,animation:!1,resolve:{data:function(){return a}}}},r=o("public/app/modules/accountapp/auth2app/views/signupmodal.view.html","SignupFormCtrl");t.signup=function(){e.showModal(r,{}).then(function(e){})}}}}]),angular.module("AccountApp").directive("signupDir",function(){return{templateUrl:"public/app/modules/accountapp/auth2app/views/signup.view.html",controller:"SignupCtrl",scope:{},restrict:"E"}}),angular.module("AccountApp").factory("ManageAcctFct",["UserModel","BusinessModel","$q",function(e,t,a){function n(t){var a=Object.create(e);return a.init(t),a}function o(e){var a=Object.create(t);return a.init(e),a}function r(e,t){return e=createUser(e),t=o(t),new a(function(e,t){})}return{createAccount:n,createBusiness:o,setupNewBusiness:r}}]),angular.module("AccountApp").controller("SignupFormCtrl",["$scope","$state","$uibModalInstance","$window","$resource","ModalSvc","TokenSvc","modalData","WizioConfig","UserRegistrationSvc","ModalBuilderFct","AuthFct",function(e,t,a,n,o,r,i,s,l,c,u,d){function p(){return a.close("backStep")}function m(){return a.close("ok")}function g(){if(e.waitlist);else{var t,a=e.user.password,n=e.user.passwordConfirm;if(t=d.confirmPasswords(a,n),!t)return void u.buildSimpleModal("Close","OK","Password Error","The two passwords you typed do not match").then(function(e){});e.user=d.setUserType(e.user,s),c.saveUser(e.user,function(t){"ERR"===t.status?u.buildSimpleModal("Close","OK","Email Not valid","That email is already in use by an account holder. Please try another email or reset your password if you forgot it.").then(function(e){}):(e.hasRegistered=!0,f.open({name:"Wizio Inc.,",description:"Subscription:",zipCode:!0,email:e.user.email,amount:1e4}))})}}e.waitlist=!1,e.user={},e.hasRegistered=!1,e.data=s;var h,f=n.StripeCheckout.configure({key:l.stripe_test_key,image:"https://s3.amazonaws.com/stripe-uploads/acct_16XvxPDqEKTsTxvomerchant-icon-1471400059126-Untitled-1.png",locale:"auto",token:function(e){h=e,h.userid=i.decode().id,h.user=i.decode(),o(l.baseAPIURL+"user/subscribe").save(h,function(e){return e})}});e.backStep=p,e.closeModal=m,e.save=g,e.login=function(){return a.close("login")}}]),angular.module("AccountApp").directive("signUpButtonDir",["ModalSvc",function(e){return{template:'<button ng-click="signup()"></button>',scope:{},restrict:"E",link:function(t,a,n){var o=function(e,t,a){return{backdrop:!0,keyboard:!0,modalFade:!0,templateUrl:e,controller:t,animation:!1,resolve:{data:function(){return a}}}},r=o("public/app/modules/accountapp/auth2app/views/signupmodal.view.html","SignupFormCtrl");t.signup=function(){e.showModal(r,{}).then(function(e){})}}}}]),angular.module("AccountApp").directive("signupDir",function(){return{templateUrl:"public/app/modules/accountapp/auth2app/views/signup.view.html",controller:"SignupCtrl",scope:{},restrict:"E"}}),angular.module("AccountApp").factory("ManageAcctFct",["UserModel","BusinessModel","$q",function(e,t,a){function n(t){var a=Object.create(e);return a.init(t),a}function o(e){var a=Object.create(t);return a.init(e),a}function r(e,t){return e=createUser(e),t=o(t),new a(function(e,t){})}return{createAccount:n,createBusiness:o,setupNewBusiness:r}}]),angular.module("AccountApp").controller("AccountTypeModalCtrl",["$scope","$uibModalInstance",function(e,t){e.closeModal=function(){t.close()},e.nextStep=function(e){var a="tenant"==e?"tenantSignup":"propertyManagerSignup";t.close(a)}}]),angular.module("AccountApp").controller("AuthCreateAcctModalCtrl",["$scope","$state","$uibModal","$uibModalInstance","ModalSvc","data","WizioConfig","UserRegistrationSvc","ModalBuilderFct",function(e,t,a,n,o,r,i,s,l){function c(){return n.close("backStep")}function u(){return n.close("ok")}function d(){var t,a=e.user.password,n=e.user.passwordConfirm;return(t=AuthFct.confirmPasswords(a,n))?(e.user=AuthFct.setUserType(e.user,r),void s.saveUser(e.user,function(t){"ERR"===t.status?l.buildSimpleModal("Close","OK","Email Not valid","That email is already in use by an account holder. Please try another email or reset your password if you forgot it.").then(function(e){}):e.hasRegistered=!0})):void l.buildSimpleModal("Close","OK","Password Error","The two passwords you typed do not match").then(function(e){})}e.user={},e.hasRegistered=!1,e.data=r,e.dropdownvals=["Broker/Agent","Property Manager"],e.backStep=c,e.closeModal=u,e.save=d,e.login=function(){return n.close("login")}}]),angular.module("AccountApp").controller("AuthLoginModalCtrl",["$scope","$state","$uibModalInstance","$q","AuthFct","WizioConfig",function(e,t,a,n,o,r){e.changePassword=!1,e.closeModal=function(){a.close()},e.forgotPassword=function(){e.changePassword=!0},e.requestLogin=function(){var n={email:e.email,password:e.password};o.signin(n).then(function(e){return"failed"===e?a.close("ok"):(t.go("Account.Dashboard"),a.close("ok"))})["catch"](function(t){e.password=""})}}]),angular.module("AccountApp").controller("AuthResetPassCtrl",["$rootScope","$scope","$state","$localStorage","$stateParams","$location","ModalSvc","AuthFct","AuthResetPasswordResource","AuthUpdatePasswordResource","TokenSvc","RerouteGetSetSvc","WizioConfig","ModalBuilderFct",function(e,t,a,n,o,r,i,s,l,c,u,d,p,m){t.passwordObj={};var g=p.AccountAuthViewsURL;t.emailobj={},t.sendResetEmail=function(){l.save(t.emailobj,function(e){return s.resetEmailResponseHandler(e,t.emailobj.email)})},t.closeModal=function(){$uibModalInstance.close()},t.resetPassword=function(){var e;if(e=s.confirmPasswords(t.passwordObj.password,t.passwordObj.passwordConfirm)){var n={password:t.passwordObj.password,token:o.token};c.save(n,function(e){"ERR"!==e.status?m.buildSimpleModal("Close","OK","Password Updated","You have successful updated the password for your account!").then(function(e){return a.go("LandingPage")}):m.buildSimpleModal("Close","OK","Password Update Error","We could not update your password at this time. Please try again later").then(function(e){})})}else t.password="",t.passwordConfirm="",m.buildSimpleModal("Close","OK","Passwords do not match","The two passwords you have provided do not match. Please try again").then(function(e){})},t.requestLogin=function(){var e={email:t.email,password:t.password};s.signin(e).then(function(e){m.buildComplexModal("md",g+"Login.html","AuthLoginModalCtrl",null).then(function(e){})})["catch"](function(e){return $uibModalInstance.close("ok")})}}]),angular.module("AuthApp").factory("AuthFct",["$state","$localStorage","$rootScope","$q","AuthRegistrationResource","AuthLoginResource","TokenSvc",function(e,t,a,n,o,r,i){function s(e){return n(function(t,n){var o=r.save(e);o.$promise.then(function(e){"ERR"===e.status?(a.error="Failed to sign in!",t("failed")):(a.isLoggedin=!0,a.userType=i.decode().userType,t("success"))})["catch"](function(e){a.error="Failed to sign in!",n("failed")})})}function l(e,t){return e===t}function c(e,t){if(e.accountType="local",t)e.userType=1;else switch(e.type){case"Broker/Agent":e.userType=3;break;case"Property Manager":e.userType=2;break;default:e.userType=2}return e}function u(e){return n(function(t,a){var n=o.save(null,e);n.$promise.then(function(e){t(e)})["catch"](function(e){a(e)})})}var d=function(){var e=i.getToken();return"No Token"!==e&&!i.checkExp(e)};return{signup:u,signin:s,confirmPasswords:l,setUserType:c,logout:function(){if(t.token=null,delete t.token,a.isLoggedIn=!1,e.current.data.requireLogin)return void e.go("LandingPage")},isLoggedin:d}}]),angular.module("AuthApp").factory("AuthLoginResource",["$resource","WizioConfig",function(e,t){return e(t.baseAPIURL+"user/authenticate")}]).factory("AuthResetPasswordResource",["$resource","WizioConfig",function(e,t){return e(t.baseAPIURL+"user/forgotpassword")}]).factory("AuthUpdatePasswordResource",["$resource","WizioConfig",function(e,t){return e(t.baseAPIURL+"user/updatepassword")}]).factory("AuthRegistrationResource",["$resource","WizioConfig",function(e,t){return e(t.baseAPIURL+"user/registration")}]),angular.module("AccountApp").service("AuthCreateUserSvc",[function(){var e=function(e,t){return e={firstName:e.firstName,lastName:e.lastName,email:e.email,password:e.password},"tenant"===t.usertype?e.userType=1:"realtor"===t.usertype?e.userType=2:"broker"===t.usertype&&(e.userType=3),e};return{CreateUser:e}}]),angular.module("AccountApp").controller("DashboardMainCtrl",["$scope","TokenSvc",function(e,t){console.dir(t.decode())}]),angular.module("AccountApp").controller("PaymentManagerCtrl",["$scope",function(e){e.plan="Premium",e.costPerMonth=99}]),angular.module("AccountApp").directive("paymentManagerDirv",function(){return{templateUrl:"public/app/modules/accountapp/dashboard2app/views/paymentmanager.view.html",controller:"PaymentManagerCtrl",scope:{plan:"@",costPerMonth:"@"},restrict:"E"}}),angular.module("AccountApp").controller("DashboardCtrl",["$scope","$resource","TokenSvc","LoadingSpinnerFct","WizioConfig","ModalBuilderFct",function(e,t,a,n,o,r){e.emailToInvite=null,e.apartments=null,e.loading=!1;var i=a.decode();console.dir(i),e.inviteAccess=i.Subscriptions[0].UserSubscriptions.subscription_manager,e.activelistings=a.decode().ActiveListings,e.createTour=function(){r.buildComplexModal("lg","public/app/modules/photographerapp/floorplanupload/floorplanupload.view.html","FloorPlanUploadCtrl",{}).then(function(e){r.buildComplexModal("lg","public/app/modules/photographerapp/upload/upload.view.html","UploadPageCtrl",{}).then(function(e){})})},e.changeApartment=function(){r.buildComplexModal("lg","public/app/modules/photographerapp/upload/upload.view.html","UploadPageCtrl",{})},e.$on("searchReturned",function(t,a){n.hide("account-dashboard-search-loader");var o=[];console.dir(a);for(var r=0;r<a.length;r++)console.dir(a[r]),o.push(a[r].Apartment);e.apartments=o,e.loading=!1}),e.$on("Unit-Activated",function(t,a){e.activelistings.push({pubid:a.pubid,Apartment:{concatAddr:a.apartment.concatAddr,unitNum:a.apartment.unitNum}})}),e.$on("searchInitiated",function(t,a){e.loading=!0}),e.inviteUser=function(){var n=a.decode(),r=n.Subscriptions[0].UserSubscriptions,i={emailOfInvitee:e.emailOfInvitee,UserId:n.id,BusinessId:r.BusinessId||r.BusinessPubId,SubscriptionId:r.SubscriptionId||r.SubscriptionPubId,firstName:n.firstName,lastName:n.lastName};console.dir(i),t(o.baseAPIURL+"subscription/invite").save(i).$promise.then(function(e){alert("User Invited")})}}]),angular.module("AccountApp").controller("AddTenantsToLeaseCtrl",["$scope","$uibModalInstance","modalData","LeaseModel",function(e,t,a,n){e.inputNames=[{labelName:"First Name:",variable:"firstName"},{labelName:"Last Name:",variable:"lastName"},{labelName:"Email:",vairable:"email"}],e.lease=[];for(var o=0;o<a.Apartment.maxResidency;o++)e.lease.push({});e.addTenantsToLease=function(){}}]),angular.module("AccountApp").controller("DashboardAPIListCtrl",["$scope",function(e){}]),angular.module("AccountApp").controller("DashboardApplicationCtrl",["$scope","ApplicationResource","ApplicationModel","TokenSvc","lodash","ModalSvc","WizioConfig",function(e,t,a,n,o,r,i){var s=n.decode(),l=o.pluck(s.applications,"ApplicationId");t.findByAppIds.save(l,function(t,a){if(0!==t.length){var n=o.groupBy(t,"ApplicationId");e.applications=o.values(n),e.applications.length>0&&(e.applicationsExist=!0)}else e.applicationsExist=!1}),e.changeOwner=function(t){var a={backdrop:!0,keyboard:!0,modalFade:!0,size:"md",templateUrl:i.ApplicationFormViewsURL+"NewOwnerSelectModal.html",controller:"NewOwnerSelectModalCtrl",resolve:{modalData:function(){return e.applications[t]}}};r.showModal(a,{}).then(function(e){})},e.deleteApplication=function(t){var n={closeButtonText:"Cancel",actionButtonText:"Delete Application",headerText:"Deleting Application",bodyText:"This will delete the entire application and remove yourself and all other applicants from the apartment. Are you sure you want to proceed?"};r.showModal({},n).then(function(n){a.api.oneParam.remove({param1:e.applications[t][0].ApplicationId},function(a,n){e.applications.splice(t),alert("Removed from application")})})},e.removeFromApplication=function(a){var n={ApplicationId:e.applications[a][0].ApplicationId,concatAddr:e.applications[a][0].Apartment.concatAddr,UserId:s.id};if(s.id===e.applications[a][0].ApplicationOwner){var o={closeButtonText:"Delete Application",actionButtonText:"Select a New Owner",headerText:"Deleting Applicant",bodyText:"Would you like to delete the entire application or select a new application owner for the remaining applicants?"};e.applications[a].removeCurrentUser=!0;var l={backdrop:!0,keyboard:!0,modalFade:!0,size:"md",templateUrl:i.ApplicationFormViewsURL+"NewOwnerSelectModal.html",controller:"NewOwnerSelectModalCtrl",resolve:{modalData:function(){return e.applications[a]}}};r.showModal({},o).then(function(o){"ok"===o?r.showModal(l,{}).then(function(e){}):t.flex.save({item:"user",action:"remove"},n,function(t,n){e.applications.splice(a);var o={closeButtonText:"Close",actionButtonText:"OK",headerText:"User Removal",bodyText:"You have been removed from this application. Thanks for using Wizio!"};r.showModal({},o).then(function(e){})})})}else{var c={closeButtonText:"Delete Application",actionButtonText:"Select a New Owner",headerText:"Deleting Applicant",bodyText:"Would you like to delete the entire application or select a new application owner for the remaining applicants?"};r.showModal({},c).then(function(o){"ok"===o&&t.flex.save({item:"user",action:"remove"},n,function(t,n){e.applications.splice(a),alert("Removed from application")})})}}}]),angular.module("AccountApp").controller("DashboardControlsCtrl",["$scope","$state","TokenSvc","FlexGetSetSvc","ProfileModel",function(e,t,a,n,o){e.accountInfo=a.decode(),e.leaveFeedback=function(){},e.viewProfile=function(){e.accountInfo.ProfileId?o.api.oneParam.get({id:e.accountInfo.ProfileId},function(e){e?(n.set(e,null,"ExtendedProfile"),t.go("Account.Profile.Edit")):t.go("Account.Profile.Create")}):t.go("Account.Profile.Create")}}]),angular.module("AccountApp").controller("DashboardFavoriteCtrl",["$scope","FavoriteModel","TokenSvc","lodash",function(e,t,a,n){var o=a.decode(),r={ApartmentIdArray:o.favorites,
UserId:o.id};e.favoritesExist=!1,0!==o.favorites.length&&t.findByUser().save(r,function(t){0!==t.lenght&&(e.favorites=t,e.favoritesExist=!0)}),e.removeFromFavorite=function(a){var n=new t(o.id,e.favorites[a].ApartmentId);t.api()["delete"](n,function(t,n){e.favorites.splice(a),alert("DONE!")})}}]),angular.module("AccountApp").controller("DashboardLLUnitListCtrl",["$scope","$state","$resource","$q","TokenSvc","ModalSvc","lodash","AssignmentModel","WizioConfig","ApplicationModel","FlexGetSetSvc","BrokerageModel","ModalBuilderFct","DashboardFactory",function(e,t,a,n,o,r,i,s,l,c,u,d,p,m){function g(){var t={};3===S.userType?t.id=S.Brokerages[0].id:t.id=S.PropertyManager[0].id,a(l.baseAPIURL+"apartment/pm/:id",{id:"@id"}).query(t,function(t){e.units=t})}function h(){2===S.userType?(M=S.PropertyManager[0].businessName.replace(/\s/g,"")||"byowner",e.businessNameEncoded=S.PropertyManager[0].businessName.replace(/\s/g,"")||"byowner",e.apikey=S.PropertyManager[0].Apiaccess.apikey):(M=S.Brokerages[0].businessName.replace(/\s/g,""),e.businessNameEncoded=S.Brokerages[0].businessName.replace(/\s/g,""),e.apikey=S.Brokerages[0].Apiaccess.apikey)}function f(t){var a;"PropertyManager"===P?(a=S.PropertyManager[0].Apiaccess,null===a||0===a?(e.hasApiAccess=!1,b()):(e.hasApiAccess=!0,h(),v(),e.currentTab=t)):(a=S.Brokerage[0].Apiaccess,"Brokerage"===P&&(e.hasApiAccess=!1,null===a||0===a?b():(e.hasApiAccess=!0,h(),v(),e.currentTab=t)))}function v(){m.getApartmentsForApiShare().then(function(t){e.apartmentsForApi=t})["catch"](function(e){})}function b(){p.buildSimpleModal("Cancel","OK","No API Access Key Found","It appears you don't have access to our beta API. If you feel that this is in error, or would like access to the API, please contact Devon@wizio.co").then(function(e){return e})}function A(){var e=l.UnitViewsURL+"sharedapartments.modal.view.html",t="SharedApartmentsCtrl";p.buildComplexModal("lg",e,t);d.getSharedApartments(S.Brokerages[0].id).then(function(){})}function w(t){var a={closeButtonText:"Close",actionButtonText:"OK",headerText:"Share This Listing",bodyText:"Copy and paste this URL: "+window.location.origin+"/#/listing/"+M+"/"+e.units[t].Leases[0].id};r.showModal({},a).then(function(e){})}function y(){var e=l.UnitViewsURL+"sharelistings.modal.view.html",t="ShareListingsCtrl";d.getAllBrokerages().then(function(a){var n=a;a.PropertyManagerId=S.PropertyManager[0].id;var o=p.buildComplexModal("lg",e,t,n);r.showModal(o,{}).then(function(e){})})}function U(a){u.set(e.units[a],"UnitToEdit","UnitToEdit"),t.go("Unit.Edit")}var S=o.decode();e.user=S,e.user=S;var P="undefined"==typeof S.Brokerages?"PropertyManager":"Brokerage";e.typeOfUser=P,e.currentTab="UnitList","PropertyManager"===P?(apiaccess=S.PropertyManager[0].Apiaccess,null===apiaccess||0===apiaccess?e.hasApiAccess=!1:e.hasApiAccess=!0):(apiaccess=S.Brokerage[0].Apiaccess,"Brokerage"===P&&(null===apiaccess||0===apiaccess?e.hasApiAccess=!1:e.hasApiAccess=!0));var M;e.windowLocationOrigin=window.location.origin,new Clipboard(".clipboard"),g(),h(),e.funcs={editApartment:U,viewSharedApartments:A,changeTab:f,shareListing:w,shareAllListings:y},e.add_tenants=function(t){var a=p.buildComplexModal("md",l.AccountDashboardViewsURL+"AddTenantsToLeaseForm.html","AddTenantsToLeaseCtrl",e.assignments[t]);r.showModal(a,{}).then(function(e){})},e.editApartment=function(a){u.set(e.units[a],"ApartmentToEdit","ApartmentToEdit"),t.go("Unit.Edit")},e.claimApartments=function(){t.go("Unit.Claim")},e.emailNow=function(e){r.showModal(addTenantsModalDefaults,{}).then(function(e){})},e.createListing=function(a){var n=e.units[a].id;u.set(n,"NewLeaseApartmentId","NewLeaseApartmentId"),t.go("Account.Lease.Create")},e.editListing=function(a){u.set(e.units[a],"EditCurrentListing","EditCurrentListing"),t.go("Account.Lease.Edit")},e.viewApplicants=function(e){c.api.oneParam.save({param1:"ApplicationIdsWithProfiles"},applicationIds,function(e){var a=p.buildComplexModal("lg",l.ApplicationFormViewsURL+"ApplicationOverviewModal.html","ApplicationOverviewCtrl",e);r.showModal(a,{}).then(function(e){switch(e){case"VIEW-DETAILS":t.go("Account.Dashboard.Application")}})})},e.viewLeads=function(t){var a=[e.units[t].Leases[0].Leads,e.units[t].concatAddr,e.units[t].unitNum],n=p.buildComplexModal("lg",l.ApplicationFormViewsURL+"leadslist.html","LeadsListCtrl",a);r.showModal(n,{}).then(function(e){})}}]),angular.module("AccountApp").controller("DashboardMainCtrl",["$scope","TokenSvc","ModalSvc","WizioConfig","DashboardFactory",function(e,t,a,n,o){o.routeToAccount();var r=t.decode().userType;1==r?(e.applicationSelected=!0,e.favoritesSelected=!1,e.toggleapplication=function(){e.applicationSelected||(e.applicationSelected=!e.applicationSelected,e.favoritesSelected=!e.favoritesSelected)},e.toggleFavorites=function(){e.favoritesSelected||(e.applicationSelected=!e.applicationSelected,e.favoritesSelected=!e.favoritesSelected)},e.gridViewSelected=!0,e.listViewSelected=!1,e.toggleGridView=function(){e.gridViewSelected||(e.gridViewSelected=!e.gridViewSelected,e.listViewSelected=!e.listViewSelected)},e.toggleListView=function(){e.listViewSelected||(e.gridViewSelected=!e.gridViewSelected,e.listViewSelected=!e.listViewSelected)}):2==r&&(e.myApplicationsSelected=!1,e.myApartmentsSelected=!0,e.toggleMyApartments=function(){e.myApartmentsSelected||(e.myApartmentsSelected=!e.myApartmentsSelected,e.myApplicationsSelected=!e.myApplicationsSelected)},e.toggleMyApplications=function(){e.myApplicationsSelected||(e.myApplicationsSelected=!e.myApplicationsSelected,e.myApartmentsSelected=!e.myApartmentsSelected)})}]),angular.module("AccountApp").controller("PaymentCtrl",["$scope","$state","TokenSvc","ModalSvc","WizioConfig",function(e,t,a,n,o){}]),angular.module("AccountApp").controller("DashboardUserInfoCtrl",["$scope","$state","TokenSvc","ModalSvc","ModalBuilderFct","WizioConfig",function(e,t,a,n,o,r){e.accountInfo=a.decode(),console.dir(e.accountInfo);e.claimApartments=function(){t.go("Unit.Claim")},e.leaveFeedback=function(){o.buildComplexModal("md",r.AccountDashboardViewsURL+"feedback.modal.view,html","FeedbackModalCtrl",{}).then(function(e){})}}]),angular.module("AccountApp").controller("FeedbackModalCtrl",["$scope","$uibModalInstance","$resource","WizioConfig",function(e,t,a,n){e.submit=function(){a(n.baseAPIURL+"propertymanager/feedback").save({feedback:e.feedback},function(e){alert("success")})},e.closeModal=function(){t.close()}}]),angular.module("AccountApp").factory("DshBrdLandlordFct",["$q","TokenSvc",function(e,t){t.decode()}]),angular.module("AccountApp").factory("DashboardFactory",["$state","TokenSvc","DashboardResources","lodash","$q",function(e,t,a,n,o){function r(){var t=l.userType,a={},n={};switch(n="Account.Dashboard"===e.current.name?{location:!1}:{},t){case 0:e.go("Account.Dashboard.PropertyManager",a,n);break;case 1:e.go("Account.Dashboard.Tenant",a,n);break;case 2:e.go("Account.Dashboard.PropertyManager",a,n);break;case 3:e.go("Account.Dashboard.Broker",a,n);break;default:return null}}function i(){var e=s();return new o(function(t,o){var r="vrapi/",i=":apikey";a.vrapi(r,i).query({apikey:e}).$promise.then(function(e){t(n.uniqBy(e,"ApartmentId"))})["catch"](function(e){})})}function s(){var e="undefined"==typeof l.Brokerages?"PropertyManager":"Brokerage";return"Brokerage"===e?l.Brokerages[0].Apiaccess.apikey:l.PropertyManager[0].Apiaccess.apikey}var l=t.decode();return{getApartmentsForApiShare:i,routeToAccount:r,getAPIKey:s}}]),angular.module("AccountApp").factory("AssignmentResource",["$resource","WizioConfig",function(e,t){return e(t.baseAPIURL+"assignment")}]).factory("DashboardResources",["$resource","WizioConfig",function(e,t){function a(){for(var n="",o=0;o<a.arguments.length;o++)n+=a.arguments[o];return e(t.baseAPIURL+n)}return{vrapi:a}}]).factory("FavoriteResource",["$resource","WizioConfig",function(e,t){return e(t.baseAPIURL+"user/favorite")}]),angular.module("AccountApp").controller("ExtProfileFormCtrl",["$scope","$state","ProfileModel","FlexGetSetSvc","TokenSvc",function(e,t,a,n,o){e.profile={};var r=n.get(null,"ExtendedProfile");"undefined"!=typeof r&&r&&(e.editing=!0,e.profile=r),e.selectOptions={employmentStatus:["Full Time Employed","Part Time Employed","Not Employed"],studentStatus:["Full Time Student","Part Time Student","Not A Student"],yesno:["Yes","No"],studentTypes:["Undergraduate","Graduate"],maritalStatus:["Married","Not Married"]},e.yesNoContainer={},e.submitProfile=function(){var n=o.decode().id;if(e.profile.UserId=n,"Account.Profile.Edit"===t.current.name)a.api.oneParam.save({id:e.profile.id},e.profile,function(e){});else if("Account.Profile.Create"===t.current.name){var r=a.build(e.profile);a.api.oneParam.save(null,r,function(e){alert("DONE")})}}}]),angular.module("AccountApp").controller("ExtProfileMainCtrl",["$rootScope","$scope",function(e,t){}]),angular.module("ApplicationApp").controller("ApplicationCreateModalCtrl",["$scope","$uibModalInstance","FlexGetSetSvc","TokenSvc","ApplicationResource",function(e,t,a,n,o){e.apartment=a.get("ApartmentApplyingTo"),e.apartmentSlotsModal=[];var r={apartmentInfo:null,users:null,owner:null};e.applicationArray=[],e.trial=[];for(var i=1;i<=e.apartment.beds-1;i++){var s={id:i};e.apartmentSlotsModal.push(s)}e.applicationSignup=function(){var a={apartmentId:e.apartment.id,apartmentMaxResidency:e.apartment.maxResidency};r.apartmentInfo=a,r.users=e.applicationArray,r.owner=n.decode().id,r.ownerEmail=n.decode().email,o.base.save(r,function(e,a){t.close("ok")})},e.closeModal=function(){t.dismiss("cancel")}}]),angular.module("ApplicationApp").controller("ApplicationDetailCtrl",["$scope","FlexGetSetSvc",function(e,t){e.applicationDetails=t.get("ApplicationDetails","ApplicationDetails")}]),angular.module("ApplicationApp").controller("ApplicationFormCtrl",["$scope",function(e){alert("test")}]),angular.module("ApplicationApp").controller("ApplicationOverviewCtrl",["$scope","$state","$uibModalInstance","modalData","lodash","FlexGetSetSvc",function(e,t,a,n,o,r){e.modalData=n,e.applications=o.groupBy(n,"ApplicationId"),e.applicationArray=[];for(var i in e.applications)e.applications.hasOwnProperty(i)&&e.applicationArray.push([e.applications[i]]);e.applicationArray=o.flatten(e.applicationArray),e.viewDetails=function(t){r.set(e.applicationArray[t],"ApplicationDetails","ApplicationDetails"),a.close("VIEW-DETAILS")}}]),angular.module("ApplicationApp").controller("ContactRepFormCtrl",["$scope","$uibModalInstance","$resource","modalData","WizioConfig",function(e,t,a,n,o){e.lead={},e.closeModal=function(){t.dismiss()},e.submit=function(){e.lead.PropertyManagerId=n.PropertyManagerId,e.lead.LeaseId=n.id,e.lead.BrokerageId=n.BrokerageId,e.lead.ApartmentId=n.ApartmentId,e.lead.ApartmentAddress=n.Apartment.concatAddr,e.lead.unitNum=n.Apartment.unitNum,a(o.baseAPIURL+"lead").save(e.lead,function(e){t.close("submit")})}}]),angular.module("ApplicationApp").controller("LeadsListCtrl",["$scope","TimeFormatterSvc","modalData","$uibModalInstance",function(e,t,a,n){e.addr=a[1];for(var o=0;o<a[0].length;o++){var r=t.formatTimeFlex(a[0][o].moveInDate,"MMMM DD, YYYY");a[0][o].moveInDate=r}e.leads=a[0],e.unitNum=a[2],e.closeModal=function(){n.close()}}]),angular.module("ApplicationApp").controller("NewOwnerSelectModalCtrl",["$scope","$uibModalInstance","TokenSvc","modalData","ApplicantModel","ApplicationResource",function(e,t,a,n,o,r){e.applications=n,e.selectNewOwner=function(i){var s=o.build(e.applications[i]);n.removeCurrentUser&&(s.removeCurrentUser=!0),s.setOwner(function(n){if(s.removeCurrentUser){var o={UserId:a.decode().id,ApartmentId:s.ApartmentId,ApplicationId:s.ApplicationId,concatAddr:e.applications[i].Apartment.concatAddr};r.flex.save({item:"user",action:"remove"},o,function(e,a){alert("Removed from application"),t.close()})}else t.close()})},e.cancel=function(){t.dismiss()}}]),angular.module("SharedServiceApp").service("ApartmentClaimGetSetSvc",["$sessionStorage",function(e){var t=[],a=function(a,n){return"undefined"!=typeof e[n]&&e[n]&&n?(e[n].push(a),void t.push(a)):(e[n]=[],e[n].push(a),void t.push(a))},n=function(a){return a?e[a]:0===t.length?[]:t[0]},o=function(a){return a?(delete e[a],void(t=[])):void(t=[])};return{set:a,get:n,reset:o}}]),angular.module("SharedServiceApp").service("ApartmentGetSetSvc",["$sessionStorage","$stateParams","$q","UnitResource","lodash","SearchFct",function(e,t,a,n,o,r){var i=null,s=function(e){return a(function(t,a){n.get({id:e},function(e){response=r.formatSearchResults([e]),t(response)})})},l=function(t,a){a&&(e[a]=t),i=t},c=function(a){return a?i=e[a]:null!==i&&i.id===t.id?i:void s(apartmentURLID).then(function(e){callback(e)})},u=function(){i=null},d=function(a){var n=t.id,o=e.apartmentSelected;if(o){if(n===o.ApartmentId)return a(o);s(n).then(function(e){a(e)})}else s(n).then(function(e){a(e)})};return{set:l,get:c,reset:u,checkApartment:d}}]),angular.module("SharedServiceApp").service("FlexGetSetSvc",["$sessionStorage","$sessionStorage",function(e,t){var a=[],n={},o=function(t,o,r){return o?(e[o]=t,void a.push(t)):(r&&(n[r]=t),void a.push(t))},r=function(t,o){return t&&"undefined"!=typeof e[t]&&e[t]?e[t]:o?n[o]:0===a.length?[]:a[0]},i=function(t){return t?(delete e[t],void(a=[])):void(a=[])};return{set:o,get:r,reset:i}}]),angular.module("SharedServiceApp").service("RerouteGetSetSvc",["$sessionStorage",function(e){var t=[],a=function(a,n){return n?(e[n]=a,t=[],void t.push(a)):(t=[],void t.push(a))},n=function(a){if(a)return e[a];if(0===t.length)return[];var n=t[0];return t=[],n},o=function(a){return a?(delete e[a],void(t=[])):void(t=[])};return{set:a,get:n,reset:o}}]);